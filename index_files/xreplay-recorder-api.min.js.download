var xr=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=55)}([function(t,e,n){"use strict";var r={};n.r(r),n.d(r,"set",function(){return l}),n.d(r,"get",function(){return f}),n.d(r,"isDaily",function(){return h}),n.d(r,"isPre",function(){return p}),n.d(r,"isProd",function(){return d}),n.d(r,"version",function(){return _});var o={};n.r(o),n.d(o,"AUDIO_KEY",function(){return y}),n.d(o,"SUBTITLE_KEY",function(){return v}),n.d(o,"VIDEO_KEY",function(){return g});var i={};n.r(i),n.d(i,"webWorkers",function(){return A}),n.d(i,"webSockets",function(){return N}),n.d(i,"fetch",function(){return I});var a={};n.r(a),n.d(a,"get",function(){return F}),n.d(a,"post",function(){return M});var s={};n.r(s),n.d(s,"get",function(){return Y}),n.d(s,"post",function(){return Q});var u=["DAILY","PRE","PROD"],c="PROD";function l(t){if("string"==typeof t){var e=t.toUpperCase();if(-1!==u.indexOf(e))return void(c=e)}throw new Error('Invalid XReplay environment, it must be one of the following: "DAILY", "PRE" or "PROD".')}function f(){return c}function h(){return"DAILY"===f()}function p(){return"PRE"===f()}function d(){return"PROD"===f()}var _="0.12.28",y="audio",v="subtitle",g="video",m="x-xreplay-request",b=_,w=o,E=function(){function t(){this._isSuspended=!1}return Object.defineProperty(t.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSuspended",{get:function(){return this._isSuspended},enumerable:!0,configurable:!0}),t.prototype.init=function(t){this._owner=t},t.prototype.suspend=function(){this._isSuspended=!0},t.prototype.resume=function(){this._isSuspended=!1},t.prototype.dispose=function(){},t}(),k=window.requestIdleCallback;if(!k){k=function(t,e){var n=Date.now();return setTimeout(function(){var r=Date.now()-n;t({didTimeout:e&&r>e.timeout||!1,timeRemaining:function(){return Math.max(0,7-r)}})})},window.requestIdleCallback=k}var O=window.cancelIdleCallback;O||(O=function(t){clearTimeout(t)},window.cancelIdleCallback=O);var T=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},x=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(T(arguments[e]));return t},S=function(){function t(){this._queue=[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this._queue.length},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._queue.length=0},t.prototype.dequeue=function(){return this._queue.shift()},t.prototype.dump=function(){var t=this.toArray();return this._queue.splice(0,t.length),t},t.prototype.enqueue=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._queue).push.apply(t,x(e))},t.prototype.forEach=function(t,e){this._queue.forEach(t,e||this)},t.prototype.map=function(t,e){return this._queue.map(t,e||this)},t.prototype.peek=function(){return this._queue[0]},t.prototype.toArray=function(){return x(this._queue)},t}(),R=n(1);function A(){return window&&!!window.Worker}function N(){return window&&!!window.WebSocket}function I(){return window&&"function"==typeof window.fetch}var C,P=n(48),D=function(){return(D=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},L=n.n(P).a.create({xsrfCookieName:"xreplay_csrf",xsrfHeaderName:"X-XSRF-TOKEN",withCredentials:!1,headers:(C={},C[m]=b,C)});function F(t,e){return j(D({method:"GET",url:t},e))}function M(t,e){var n=D({method:"POST",url:t},e);return e&&Object.prototype.hasOwnProperty.call(e,"params")&&(n.data=e.params,delete n.params),j(n)}function j(t){return L(t)}var U,q,B,H,W,z,K,V,G,X=n(49),J=function(){return(J=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function Y(t,e){return $("GET",t,e)}function Q(t,e){return $("POST",t,e)}function $(t,e,n){var r,o={prefix:"h5api"};h()?(o.prefix="acs",o.subDomain="waptest"):p()?o.subDomain="wapa":o.subDomain="m",-1!==window.location.hostname.indexOf("lazada")?(o.prefix=null,o.mainDomain="lazada.com.my",p()?o.subDomain="acs-wapa":o.subDomain="acs-m"):window.location.hostname.endsWith("alibaba-inc.com")&&(o.mainDomain="taobao.com");var i=J({},n.headers,((r={})[m]=b,r));return new X.CLASS({type:t,api:n.baseURL+"."+e,v:"1.0",data:n.params,dataType:"json",ecode:0,headers:i}).request(o).then(function(t){return t.data})}!function(t){t[t.CONSOLE_ASSERT=1001]="CONSOLE_ASSERT",t[t.CONSOLE_DEBUG=1002]="CONSOLE_DEBUG",t[t.CONSOLE_DIR=1003]="CONSOLE_DIR",t[t.CONSOLE_DIRXML=1004]="CONSOLE_DIRXML",t[t.CONSOLE_ERROR=1005]="CONSOLE_ERROR",t[t.CONSOLE_INFO=1006]="CONSOLE_INFO",t[t.CONSOLE_LOG=1007]="CONSOLE_LOG",t[t.CONSOLE_TABLE=1008]="CONSOLE_TABLE",t[t.CONSOLE_TRACE=1009]="CONSOLE_TRACE",t[t.CONSOLE_WARN=1010]="CONSOLE_WARN",t[t.ERROR_SCRIPT=1101]="ERROR_SCRIPT",t[t.ERROR_RUNTIME=1102]="ERROR_RUNTIME",t[t.ERROR_NOTFOUND=1103]="ERROR_NOTFOUND",t[t.ERROR_PROMISEREJECTION=1104]="ERROR_PROMISEREJECTION",t[t.HTML_SNAPSHOT=11]="HTML_SNAPSHOT",t[t.HTML_ACTION=12]="HTML_ACTION",t[t.MOUSE_MOVE=101]="MOUSE_MOVE",t[t.MOUSE_DOWN=102]="MOUSE_DOWN",t[t.MOUSE_UP=103]="MOUSE_UP",t[t.NETWORK_SEND=1201]="NETWORK_SEND",t[t.NETWORK_DONE=1202]="NETWORK_DONE",t[t.NETWORK_ABORT=1203]="NETWORK_ABORT",t[t.NETWORK_ERROR=1204]="NETWORK_ERROR",t[t.NETWORK_TIMEOUT=1205]="NETWORK_TIMEOUT",t[t.XTRACKER_EVENT=3001]="XTRACKER_EVENT",t[t.NOOP=-1]="NOOP"}(U||(U={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ENQUEUE=1]="ENQUEUE",t[t.TAKE_TASKS=2]="TAKE_TASKS",t[t.BACKUP_TASKS=3]="BACKUP_TASKS",t[t.CLIP_BLACKBOX=4]="CLIP_BLACKBOX",t[t.PAUSE=5]="PAUSE",t[t.RESUME=6]="RESUME"}(q||(q={})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.PAUSE_RECORDING=1]="PAUSE_RECORDING",t[t.RESUME_RECORDING=2]="RESUME_RECORDING",t[t.INDEX=3]="INDEX",t[t.STREAMING_DISCONNECT=4]="STREAMING_DISCONNECT",t[t.STREAMING_RESUME=5]="STREAMING_RESUME",t[t.CLIP_START=10]="CLIP_START",t[t.CLIP_END=11]="CLIP_END"}(B||(B={})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.BIZ=1]="BIZ"}(H||(H={})),function(t){t[t.SEQUENTIAL=0]="SEQUENTIAL",t[t.RANDOM=1]="RANDOM"}(W||(W={})),function(t){t[t.IN_MEMORY=-1]="IN_MEMORY",t[t.DEFAULT=0]="DEFAULT",t[t.BREAKPOINT_CONTINUINGLY=1]="BREAKPOINT_CONTINUINGLY",t[t.BLACKBOX=2]="BLACKBOX",t[t.STREAMING=3]="STREAMING",t[t.LIVE_STREAMING=4]="LIVE_STREAMING",t[t.LIVE_STREAMING_PERSISTENCE=5]="LIVE_STREAMING_PERSISTENCE",t[t.CROSS_PAGE=6]="CROSS_PAGE"}(z||(z={})),function(t){t[t.EOF=-1]="EOF",t[t.SNAPSHOT=0]="SNAPSHOT",t[t.KEYFRAMES=1]="KEYFRAMES",t[t.DATA=2]="DATA",t[t.MARKERS=3]="MARKERS",t[t.TAGS=4]="TAGS",t[t.EVENT=5]="EVENT",t[t.PAUSE=6]="PAUSE",t[t.RESUME=7]="RESUME"}(K||(K={})),function(t){t.CONNECTED="connected",t.DISCONNECTED="disconnected",t.MESSAGE="message",t.ERROR="error"}(V||(V={})),function(t){t[t.HTML=10]="HTML",t[t.Mouse=100]="Mouse",t[t.Console=1e3]="Console",t[t.Error=1100]="Error",t[t.Network=1200]="Network",t[t.XTracker=3e3]="XTracker",t[t.NOOP=-1]="NOOP"}(G||(G={}));function Z(t,e,n,r){var o=[t,e,n];return r&&o.push(r),o}function tt(t){return t[0]}function et(t){return t[1]}function nt(t){return t[3]}function rt(t,e){var n={id:t,keyFrames:e,firstKeyFrameTime:-1,lastKeyFrameTime:-1},r=e.length;return r>0&&(n.firstKeyFrameTime=tt(e[0]),n.lastKeyFrameTime=tt(e[r-1])),n}function ot(){return"block-"+Date.now()}var it=n(50);function at(){function t(t){if(null!=t){var e="string"==typeof t?t:JSON.stringify(t),n=pako.gzip(e);return new Blob([n],{type:"application/octet-stream"})}throw new Error("Compression Failed: Invalid Data.")}importScripts("https://g.alicdn.com/nue/y/pako/1.0.6/pako_deflate.min.js");var e=self;e.addEventListener("message",function(n){if(n.data){var r=n.data,o=r.id,i=r.data;try{e.postMessage({id:o,data:t(i)})}catch(t){e.postMessage({id:o,error:"Compression Failed: "+t.message})}}})}var st,ut=n(51);function ct(t){if(null!=t){var e="string"==typeof t?t:JSON.stringify(t),n=Object(it.gzip)(e);return new Blob([n],{type:"application/octet-stream"})}throw new Error("Compression Failed: Invalid Data.")}function lt(t,e){return A()?(st||(n=at,st=new Worker(URL.createObjectURL(new Blob(["("+n+")()"])))),null==e&&(e=ut()),new Promise(function(n,r){st.addEventListener("message",function t(o){if(o.data){var i=o.data,a=i.id,s=i.data,u=i.error;a===e&&(st.removeEventListener("message",t),u?r(new Error(u)):n(s))}}),st.addEventListener("error",function t(e){st.removeEventListener("error",t),r(new Error("Compression Failed: "+e))});try{st.postMessage({id:e,data:t})}catch(e){n(ct(t))}})):Promise.resolve(ct(t));var n}function ft(t,e,n){return[t,e,n]}function ht(t){return"function"==typeof t&&/^function fetch\(\)[\s\S]+\[native code\].*/gi.test(t.toString())}function pt(t){return t instanceof Request}function dt(t){return"string"==typeof t||t instanceof String}var _t=function(){return(_t=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},yt=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};function vt(t){var e={};if(null!=t)if(t instanceof Headers)t.forEach(function(t,n){e[n]=t});else if(Array.isArray(t))t.forEach(function(t){var n=yt(t,2),r=n[0],o=n[1];e[r]=o});else if(dt(t)){t.trim().split(/[\r\n]+/).forEach(function(t){var n=t.split(": "),r=n[0];null!=r&&""!==r.trim()&&(e[r]=n[1])})}else e=_t({},t);return e}function gt(t){var e={};return t.forEach(function(t,n){t instanceof File?e[n]="[object File]":e[n]=t}),e}function mt(t,e,n){return[t,e,n]}function bt(t){var e;if(dt(t)?e=new URL(t):t instanceof URL&&(e=t),e){var n=e.pathname.match(/\/(\w+)\/recording\/([\S]+)/);if(n&&3===n.length)return{appKey:n[1],recordingId:n[2]}}}var wt,Et=n(52),kt=(wt=function(t,e){return(wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}wt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ot=new(function(t){function e(){var e=t.call(this,"xreplay")||this;return e.version(1).stores({tasks:"++id",breakpoints:"++id, appKey, recordingId, lastModified"}),e.version(2).stores({tasks:"++id, retry, retryTimestamp, status",breakpoints:"++id, appKey, recordingId, lastModified"}),e}return kt(e,t),e.prototype.putBreakpoint=function(t,e,n,r){var o={appKey:t,recordingId:e,lastModified:n};return null!=r&&(o.id=r),this.breakpoints.put(o).catch()},e.prototype.queryBreakpoint=function(t,e){var n={appKey:t};return null!=e&&(n.recordingId=e),this.breakpoints.get(n)},e.prototype.clearBreakpoints=function(){return this.breakpoints.clear().catch()},e}(Et.a));function Tt(t,e,n,r){var o=null==t?"":t+"/",i=new URLSearchParams;n&&i.set("clipStartTime",n.toString()),r&&i.set("clipEndTime",r.toString());var a=i.toString();return a&&(a="?"+a),h()?"xrtp://xreplay.alibaba.net/"+o+"recording/"+e+a:p()?"xrtp://pre-xreplay.alibaba-inc.com/"+o+"recording/"+e+a:"xrtp://xreplay.alibaba-inc.com/"+o+"recording/"+e+a}function xt(t,e,n){return St(t,e,"record",n)}function St(t,e,n,r){return(r=null==r||""===r?function(){if(h())return"wss://xreplay-service.alibaba.net";if(p())return"wss://pre-xreplay-service.alibaba-inc.com";return"wss://xreplay-service.alibaba-inc.com"}():""+r)+"/"+n+"/"+t+"/"+e}var Rt,At=i,Nt=a,It=s,Ct=function(){return function(t){this.version=_,this.createTime=0,this.duration=0,this.id=ut(),this.meta=Object(R.e)(),t&&(this.meta.data=t)}}();!function(t){t.OPEN="open",t.CLOSED="closed",t.DATA="data",t.ERROR="error"}(Rt||(Rt={}));var Pt,Dt=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},Lt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};!function(t){t[t.INITIAL=0]="INITIAL",t[t.RUNNING=1]="RUNNING",t[t.FULFILLED=2]="FULFILLED",t[t.REJECTED=3]="REJECTED"}(Pt||(Pt={}));var Ft=function(){function t(t,e,n){var r=this;this._isStopped=!1,this._isScheduled=!1,this._isPerforming=!1,this._processWorkLoop=function(t){return Dt(r,void 0,void 0,function(){var e;return Lt(this,function(n){switch(n.label){case 0:return!this._isStopped&&this.hasMoreWork()&&(t.timeRemaining()>0||t.didTimeout)&&(e=this.requestNextWork())?[4,this._performWork(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return this._isScheduled=!1,!this._isStopped&&this.hasMoreWork()&&this.start(),[2]}})})},this._tasks=t,this._taskHandler=e,n&&(this._scheduleOptions=n)}return t.prototype.start=function(){this._isStopped=!1,this._isScheduled||this._isPerforming||(this._isScheduled=!0,window.requestIdleCallback(this._processWorkLoop,this._scheduleOptions))},t.prototype.stop=function(){this._isStopped=!0,this._isScheduled=!1},t.prototype._performWork=function(t){return Dt(this,void 0,void 0,function(){return Lt(this,function(e){switch(e.label){case 0:return this._taskHandler?(this._isPerforming=!0,[4,this._taskHandler(t)]):[3,2];case 1:e.sent(),this._isPerforming=!1,e.label=2;case 2:return[2]}})})},t}(),Mt=function(){function t(){this._tasks=new S}return Object.defineProperty(t.prototype,"tasks",{get:function(){return this._tasks},enumerable:!0,configurable:!0}),t.prototype.dequeue=function(){return this._tasks.dequeue()},t.prototype.enqueue=function(t){this._tasks.enqueue(t)},t.prototype.clear=function(){this._tasks.clear()},t}(),jt={queryReadableRecording:"recording.play",queryWritableRecording:"recording.read"};function Ut(t,e,n){return void 0===n&&(n="mtop.alibaba.rdc.xreplay"),It.get(jt.queryWritableRecording,{baseURL:n,params:{appKey:t,recordingId:e}}).then(function(t){return t})}var qt=n(53),Bt=function(){return(Bt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Ht=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},Wt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},zt=function(){function t(e,n){var r=this;this._isClosed=!1,this._isOpening=!1,this._handleOpen=function(t){r._config.debug&&console.info("StreamingSocket","connected",t),r._emitter.emit(V.CONNECTED)},this._handleClose=function(t){r._isClosed||(r._config.debug&&console.info("StreamingSocket","disconnected",t),r._emitter.emit(V.DISCONNECTED))},this._handleError=function(t){r._config.debug&&console.info("StreamingSocket","error",t),r._emitter.emit(V.ERROR,t)},this._handleMessage=function(t){r._config.debug&&console.info("StreamingSocket","message",t),r._emitter.emit(V.MESSAGE,t)},this._url=e,this._config=Bt({},t.DEFAULT_CONFIG,n),this._emitter=new qt}return Object.defineProperty(t.prototype,"isReady",{get:function(){return!(this._isClosed||!this._ws)&&this._ws.readyState===WebSocket.OPEN},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n){return this._emitter.on(t,e,n),this},t.prototype.off=function(t,e,n){return this._emitter.off(t,e,n),this},t.prototype.open=function(){return Ht(this,void 0,void 0,function(){var t=this;return Wt(this,function(e){return this._isOpening||this._isClosed?[2]:(this._isOpening=!0,[2,new Promise(function(e){t._unsubscribe(t._ws),t._ws=new WebSocket(t._url);var n=function(){t._isOpening=!1,t._ws.removeEventListener("open",n),t._ws.removeEventListener("close",n),e()};t._ws.addEventListener("open",n),t._ws.addEventListener("close",n),t._subscribe(t._ws)})])})})},t.prototype.send=function(t){if(!this._ws)throw new Error("Cannot call send before the StreamingSocket is open.");this._ws.send(t)},t.prototype.close=function(){this._ws&&this._ws.close(),this._isClosed=!0,this._config.debug&&console.info("StreamingSocket","closed"),this._emitter.emit(V.DISCONNECTED)},t.prototype._subscribe=function(t){t&&(t.addEventListener("open",this._handleOpen),t.addEventListener("close",this._handleClose),t.addEventListener("error",this._handleError),t.addEventListener("message",this._handleMessage))},t.prototype._unsubscribe=function(t){t&&(t.removeEventListener("open",this._handleOpen),t.removeEventListener("close",this._handleClose),t.removeEventListener("error",this._handleError),t.removeEventListener("message",this._handleMessage))},t.DEFAULT_CONFIG={debug:!1},t}();n.d(e,"y",function(){return Kt}),n.d(e,"O",function(){return w}),n.d(e,"p",function(){return m}),n.d(e,"e",function(){return E}),n.d(e,"f",function(){return Ct}),n.d(e,"a",function(){return Pt}),n.d(e,"j",function(){return Ft}),n.d(e,"o",function(){return Mt}),n.d(e,"N",function(){return Ut}),n.d(e,"l",function(){return zt}),n.d(e,"b",function(){return U}),n.d(e,"c",function(){return q}),n.d(e,"d",function(){return B}),n.d(e,"g",function(){return H}),n.d(e,"h",function(){return W}),n.d(e,"i",function(){return z}),n.d(e,"k",function(){return K}),n.d(e,"m",function(){return V}),n.d(e,"n",function(){return G}),n.d(e,"r",function(){return At}),n.d(e,"q",function(){return Nt}),n.d(e,"K",function(){return It}),n.d(e,"u",function(){return rt}),n.d(e,"A",function(){return ot}),n.d(e,"s",function(){return ct}),n.d(e,"t",function(){return lt}),n.d(e,"v",function(){return Z}),n.d(e,"D",function(){return tt}),n.d(e,"E",function(){return et}),n.d(e,"C",function(){return nt}),n.d(e,"w",function(){return ft}),n.d(e,"L",function(){return vt}),n.d(e,"z",function(){return gt}),n.d(e,"x",function(){return mt}),n.d(e,"M",function(){return bt}),n.d(e,"P",function(){return Ot}),n.d(e,"B",function(){return ut}),n.d(e,"I",function(){return ht}),n.d(e,"H",function(){return pt}),n.d(e,"J",function(){return dt}),n.d(e,"F",function(){return Tt}),n.d(e,"G",function(){return xt});var Kt=r},function(t,e,n){"use strict";var r,o={};n.r(o),n.d(o,"min",function(){return d}),n.d(o,"max",function(){return _}),function(t){t[t.RESET=0]="RESET",t[t.ADD_NODE=1]="ADD_NODE",t[t.REMOVE_NODE=2]="REMOVE_NODE",t[t.CHANGE_TEXT=101]="CHANGE_TEXT",t[t.CHANGE_ATTRIBUTES=102]="CHANGE_ATTRIBUTES",t[t.CHANGE_VALUE=103]="CHANGE_VALUE",t[t.FOCUS=501]="FOCUS",t[t.BLUR=502]="BLUR",t[t.SCROLL=510]="SCROLL",t[t.RESIZE_WINDOW=520]="RESIZE_WINDOW",t[t.HIDE_WINDOW=521]="HIDE_WINDOW",t[t.SHOW_WINDOW=522]="SHOW_WINDOW"}(r||(r={}));var i,a=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},s=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=function(){function t(){this._isInitialized=!1,this._isRenderingSnapshot=!1}return Object.defineProperty(t.prototype,"isInitialized",{get:function(){return this._isInitialized},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRenderingSnapshot",{get:function(){return this._isRenderingSnapshot},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentDocument",{get:function(){return this._contentDocument},enumerable:!0,configurable:!0}),t.prototype.renderActions=function(t){return a(this,void 0,void 0,function(){return s(this,function(e){return this.performActions(t),[2]})})},t.prototype.render=function(t){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this._isRenderingSnapshot=!0,[4,this.renderActions(t.actions)];case 1:return e.sent(),this._isRenderingSnapshot=!1,[2]}})})},t.prototype.reset=function(){this._isInitialized=!0},t.prototype.performActions=function(t){var e=this;t.forEach(function(t){e.performAction(t)})},t.prototype.performAction=function(t){if(t.type===r.RESET)this.performReset();else switch(this.isInitialized||this.performReset(),t.type){case r.ADD_NODE:this.performAddNode(t);break;case r.REMOVE_NODE:this.performRemoveNode(t);break;case r.CHANGE_ATTRIBUTES:this.performChangeAttributes(t);break;case r.CHANGE_TEXT:this.performChangeText(t);break;case r.CHANGE_VALUE:this.performChangeValue(t);break;case r.FOCUS:this.performFocus(t);break;case r.BLUR:this.performBlur(t);break;case r.SCROLL:this.performScroll(t);break;case r.RESIZE_WINDOW:this.performResizeWindow(t);break;case r.SHOW_WINDOW:this.performShowWindow(t);break;case r.HIDE_WINDOW:this.performHideWindow(t)}},t.prototype.performReset=function(){this.reset()},t}(),c=/[^a-zA-Z0-9]/,l=/\s/,f=/[\r\n]/,h=/\n\r?\n$/,p=/^\r?\n\r?\n/;function d(t,e){return t<e?t:e}function _(t,e){return t>e?t:e}!function(t){t[t.DIFF_DELETE=-1]="DIFF_DELETE",t[t.DIFF_INSERT=1]="DIFF_INSERT",t[t.DIFF_EQUAL=0]="DIFF_EQUAL"}(i||(i={}));var y=o,v=function(){function t(){this.diffs=[],this.start1=0,this.start2=0,this.length1=0,this.length2=0}return t.prototype.toString=function(){for(var t,e=["@@ -"+(0===this.length1?this.start1+",0":1===this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1===this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case i.DIFF_INSERT:t="+";break;case i.DIFF_DELETE:t="-";break;case i.DIFF_EQUAL:t=" "}e[n+1]=t+encodeURI(this.diffs[n][1])+"\n"}return e.join("").replace(/%20/g," ")},t}(),g=function(){function t(){this.diffTimeout=1,this.diffEditCost=4,this.matchThreshold=.5,this.matchDistance=1e3,this.patchDeleteThreshold=.5,this.patchMargin=4,this.matchMaxBits=32}return t.prototype.diff_main=function(t,e,n,r){void 0===r&&(r=this.diffTimeout<=0?Number.MAX_VALUE:Date.now()+1e3*this.diffTimeout);var o=r;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t===e)return t?[[i.DIFF_EQUAL,t]]:[];void 0===n&&(n=!0);var a=n,s=this.diff_commonPrefix(t,e),u=t.substring(0,s);t=t.substring(s),e=e.substring(s),s=this.diff_commonSuffix(t,e);var c=t.substring(t.length-s);t=t.substring(0,t.length-s),e=e.substring(0,e.length-s);var l=this.diff_compute_(t,e,a,o);return u&&l.unshift([i.DIFF_EQUAL,u]),c&&l.push([i.DIFF_EQUAL,c]),this.diff_cleanupMerge(l),l},t.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var n=0,r=y.min(t.length,e.length),o=r,i=0;n<o;)t.substring(i,o)===e.substring(i,o)?i=n=o:r=o,o=Math.floor((r-n)/2+n);return o},t.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!==e.charAt(e.length-1))return 0;for(var n=0,r=y.min(t.length,e.length),o=r,i=0;n<o;)t.substring(t.length-o,t.length-i)===e.substring(e.length-o,e.length-i)?i=n=o:r=o,o=Math.floor((r-n)/2+n);return o},t.prototype.diff_cleanupSemantic=function(t){for(var e=!1,n=[],r=0,o=null,a=0,s=0,u=0,c=0,l=0;a<t.length;)t[a][0]===i.DIFF_EQUAL?(n[r++]=a,s=c,u=l,c=0,l=0,o=t[a][1]):(t[a][0]===i.DIFF_INSERT?c+=t[a][1].length:l+=t[a][1].length,o&&o.length<=y.max(s,u)&&o.length<=y.max(c,l)&&(t.splice(n[r-1],0,[i.DIFF_DELETE,o]),t[n[r-1]+1][0]=i.DIFF_INSERT,r--,a=--r>0?n[r-1]:-1,s=0,u=0,c=0,l=0,o=null,e=!0)),a++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),a=1;a<t.length;){if(t[a-1][0]===i.DIFF_DELETE&&t[a][0]===i.DIFF_INSERT){var f=t[a-1][1],h=t[a][1],p=this.diff_commonOverlap_(f,h),d=this.diff_commonOverlap_(h,f);p>=d?(p>=f.length/2||p>=h.length/2)&&(t.splice(a,0,[i.DIFF_EQUAL,h.substring(0,p)]),t[a-1][1]=f.substring(0,f.length-p),t[a+1][1]=h.substring(p),a++):(d>=f.length/2||d>=h.length/2)&&(t.splice(a,0,[i.DIFF_EQUAL,f.substring(0,d)]),t[a-1][0]=i.DIFF_INSERT,t[a-1][1]=h.substring(0,h.length-d),t[a+1][0]=i.DIFF_DELETE,t[a+1][1]=f.substring(d),a++),a++}a++}},t.prototype.diff_cleanupSemanticLossless=function(t){for(var e=1;e<t.length-1;){if(t[e-1][0]===i.DIFF_EQUAL&&t[e+1][0]===i.DIFF_EQUAL){var n=t[e-1][1],r=t[e][1],o=t[e+1][1],a=this.diff_commonSuffix(n,r);if(a){var s=r.substring(r.length-a);n=n.substring(0,n.length-a),r=s+r.substring(0,r.length-a),o=s+o}for(var u=n,c=r,l=o,f=this.diff_cleanupSemanticScore_(n,r)+this.diff_cleanupSemanticScore_(r,o);r.charAt(0)===o.charAt(0);){n+=r.charAt(0),r=r.substring(1)+o.charAt(0),o=o.substring(1);var h=this.diff_cleanupSemanticScore_(n,r)+this.diff_cleanupSemanticScore_(r,o);h>=f&&(f=h,u=n,c=r,l=o)}t[e-1][1]!==u&&(u?t[e-1][1]=u:(t.splice(e-1,1),e--),t[e][1]=c,l?t[e+1][1]=l:(t.splice(e+1,1),e--))}e++}},t.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,n=[],r=0,o=null,a=0,s=!1,u=!1,c=!1,l=!1;a<t.length;)t[a][0]===i.DIFF_EQUAL?(t[a][1].length<this.diffEditCost&&(c||l)?(n[r++]=a,s=c,u=l,o=t[a][1]):(r=0,o=null),c=l=!1):(t[a][0]===i.DIFF_DELETE?l=!0:c=!0,o&&(s&&u&&c&&l||o.length<this.diffEditCost/2&&Number(s)+Number(u)+Number(c)+Number(l)===3)&&(t.splice(n[r-1],0,[i.DIFF_DELETE,o]),t[n[r-1]+1][0]=i.DIFF_INSERT,r--,o=null,s&&u?(c=l=!0,r=0):(a=--r>0?n[r-1]:-1,c=l=!1),e=!0)),a++;e&&this.diff_cleanupMerge(t)},t.prototype.diff_cleanupMerge=function(t){t.push([i.DIFF_EQUAL,""]);for(var e,n=0,r=0,o=0,a="",s="";n<t.length;)switch(t[n][0]){case i.DIFF_INSERT:o++,s+=t[n][1],n++;break;case i.DIFF_DELETE:r++,a+=t[n][1],n++;break;case i.DIFF_EQUAL:r+o>1?(0!==r&&0!==o&&(0!==(e=this.diff_commonPrefix(s,a))&&(n-r-o>0&&t[n-r-o-1][0]===i.DIFF_EQUAL?t[n-r-o-1][1]+=s.substring(0,e):(t.splice(0,0,[i.DIFF_EQUAL,s.substring(0,e)]),n++),s=s.substring(e),a=a.substring(e)),0!==(e=this.diff_commonSuffix(s,a))&&(t[n][1]=s.substring(s.length-e)+t[n][1],s=s.substring(0,s.length-e),a=a.substring(0,a.length-e))),n-=r+o,t.splice(n,r+o),a.length&&(t.splice(n,0,[i.DIFF_DELETE,a]),n++),s.length&&(t.splice(n,0,[i.DIFF_INSERT,s]),n++),n++):0!==n&&t[n-1][0]===i.DIFF_EQUAL?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,o=0,r=0,a="",s=""}""===t[t.length-1][1]&&t.pop();var u=!1;for(n=1;n<t.length-1;)t[n-1][0]===i.DIFF_EQUAL&&t[n+1][0]===i.DIFF_EQUAL&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)===t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),u=!0):t[n][1].substring(0,t[n+1][1].length)===t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),u=!0)),n++;u&&this.diff_cleanupMerge(t)},t.prototype.diff_xIndex=function(t,e){var n,r=0,o=0,a=0,s=0;for(n=0;n<t.length&&(t[n][0]!==i.DIFF_INSERT&&(r+=t[n][1].length),t[n][0]!==i.DIFF_DELETE&&(o+=t[n][1].length),!(r>e));n++)a=r,s=o;return t.length!==n&&t[n][0]===i.DIFF_DELETE?s:s+(e-a)},t.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,r=/</g,o=/>/g,a=/\n/g,s=0;s<t.length;s++){var u=t[s][0],c=t[s][1].replace(n,"&amp;").replace(r,"&lt;").replace(o,"&gt;").replace(a,"&para;<br>");switch(u){case i.DIFF_INSERT:e[s]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case i.DIFF_DELETE:e[s]='<del style="background:#ffe6e6;">'+c+"</del>";break;case i.DIFF_EQUAL:e[s]="<span>"+c+"</span>"}}return e.join("")},t.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==i.DIFF_INSERT&&(e[n]=t[n][1]);return e.join("")},t.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==i.DIFF_DELETE&&(e[n]=t[n][1]);return e.join("")},t.prototype.diff_levenshtein=function(t){for(var e=0,n=0,r=0,o=0;o<t.length;o++){var a=t[o][0],s=t[o][1];switch(a){case i.DIFF_INSERT:n+=s.length;break;case i.DIFF_DELETE:r+=s.length;break;case i.DIFF_EQUAL:e+=y.max(n,r),n=0,r=0}}return e+=y.max(n,r)},t.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case i.DIFF_INSERT:e[n]="+"+encodeURI(t[n][1]);break;case i.DIFF_DELETE:e[n]="-"+t[n][1].length;break;case i.DIFF_EQUAL:e[n]="="+t[n][1].length}return e.join("\t").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(t,e){for(var n=[],r=0,o=0,a=e.split(/\t/g),s=0;s<a.length;s++){var u=a[s].substring(1);switch(a[s].charAt(0)){case"+":try{n[r++]=[i.DIFF_INSERT,decodeURI(u)]}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var c=parseInt(u,10);if(isNaN(c)||c<0)throw new Error("Invalid number in diff_fromDelta: "+u);var l=t.substring(o,o+=c);"="===a[s].charAt(0)?n[r++]=[i.DIFF_EQUAL,l]:n[r++]=[i.DIFF_DELETE,l];break;default:if(a[s])throw new Error("Invalid diff operation in diff_fromDelta: "+a[s])}}if(o!==t.length)throw new Error("Delta length ("+o+") does not equal source text length ("+t.length+")");return n},t.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=y.max(0,y.min(n,t.length)),t===e?0:t.length?t.substring(n,n+e.length)===e?n:this.match_bitap_(t,e,n):-1},t.prototype.patch_make=function(t,e,n){var r,o;if("string"==typeof t&&"string"==typeof e&&void 0===n)r=t,(o=this.diff_main(r,e,!0)).length>2&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(t&&"object"==typeof t&&void 0===e&&void 0===n)o=t,r=this.diff_text1(o);else if("string"==typeof t&&e&&"object"==typeof e&&void 0===n)r=t,o=e;else{if("string"!=typeof t||"string"!=typeof e||!n||"object"!=typeof n)throw new Error("Unknown call format to patch_make");r=t,o=n}if(0===o.length)return[];for(var a=[],s=new v,u=0,c=0,l=0,f=r,h=r,p=0;p<o.length;p++){var d=o[p][0],_=o[p][1];switch(u||d===i.DIFF_EQUAL||(s.start1=c,s.start2=l),d){case i.DIFF_INSERT:s.diffs[u++]=o[p],s.length2+=_.length,h=h.substring(0,l)+_+h.substring(l);break;case i.DIFF_DELETE:s.length1+=_.length,s.diffs[u++]=o[p],h=h.substring(0,l)+h.substring(l+_.length);break;case i.DIFF_EQUAL:_.length<=2*this.patchMargin&&u&&o.length!==p+1?(s.diffs[u++]=o[p],s.length1+=_.length,s.length2+=_.length):_.length>=2*this.patchMargin&&u&&(this.patch_addContext_(s,f),a.push(s),s=new v,u=0,f=h,c=l)}d!==i.DIFF_INSERT&&(c+=_.length),d!==i.DIFF_DELETE&&(l+=_.length)}return u&&(this.patch_addContext_(s,f),a.push(s)),a},t.prototype.patch_deepCopy=function(t){for(var e=[],n=0;n<t.length;n++){for(var r=t[n],o=new v,i=0;i<r.diffs.length;i++)o.diffs[i]=[r.diffs[i][0],r.diffs[i][1]];o.start1=r.start1,o.start2=r.start2,o.length1=r.length1,o.length2=r.length2,e[n]=o}return e},t.prototype.patch_apply=function(t,e){if(0===t.length)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var r=0,o=[],a=0;a<t.length;a++){var s=t[a].start2+r,u=this.diff_text1(t[a].diffs),c=void 0,l=-1;if(u.length>this.matchMaxBits?-1!==(c=this.match_main(e,u.substring(0,this.matchMaxBits),s))&&(-1===(l=this.match_main(e,u.substring(u.length-this.matchMaxBits),s+u.length-this.matchMaxBits))||c>=l)&&(c=-1):c=this.match_main(e,u,s),-1===c)o[a]=!1,r-=t[a].length2-t[a].length1;else{o[a]=!0,r=c-s;var f=void 0;if(u===(f=-1===l?e.substring(c,c+u.length):e.substring(c,l+this.matchMaxBits)))e=e.substring(0,c)+this.diff_text2(t[a].diffs)+e.substring(c+u.length);else{var h=this.diff_main(u,f,!1);if(u.length>this.matchMaxBits&&this.diff_levenshtein(h)/u.length>this.patchDeleteThreshold)o[a]=!1;else{this.diff_cleanupSemanticLossless(h);for(var p=0,d=0,_=0;_<t[a].diffs.length;_++){var y=t[a].diffs[_];y[0]!==i.DIFF_EQUAL&&(d=this.diff_xIndex(h,p)),y[0]===i.DIFF_INSERT?e=e.substring(0,c+d)+y[1]+e.substring(c+d):y[0]===i.DIFF_DELETE&&(e=e.substring(0,c+d)+e.substring(c+this.diff_xIndex(h,p+y[1].length))),y[0]!==i.DIFF_DELETE&&(p+=y[1].length)}}}}}return[e=e.substring(n.length,e.length-n.length),o]},t.prototype.patch_addPadding=function(t){for(var e=this.patchMargin,n="",r=1;r<=e;r++)n+=String.fromCharCode(r);for(r=0;r<t.length;r++)t[r].start1+=e,t[r].start2+=e;var o=t[0],a=o.diffs;if(0===a.length||a[0][0]!==i.DIFF_EQUAL)a.unshift([i.DIFF_EQUAL,n]),o.start1-=e,o.start2-=e,o.length1+=e,o.length2+=e;else if(e>a[0][1].length){var s=e-a[0][1].length;a[0][1]=n.substring(a[0][1].length)+a[0][1],o.start1-=s,o.start2-=s,o.length1+=s,o.length2+=s}if(0===(a=(o=t[t.length-1]).diffs).length||a[a.length-1][0]!==i.DIFF_EQUAL)a.push([i.DIFF_EQUAL,n]),o.length1+=e,o.length2+=e;else if(e>a[a.length-1][1].length){s=e-a[a.length-1][1].length;a[a.length-1][1]+=n.substring(0,s),o.length1+=s,o.length2+=s}return n},t.prototype.patch_splitMax=function(t){for(var e=this.matchMaxBits,n=0;n<t.length;n++)if(!(t[n].length1<=e)){var r=t[n];t.splice(n--,1);for(var o=r.start1,a=r.start2,s="";0!==r.diffs.length;){var u=new v,c=!0;for(u.start1=o-s.length,u.start2=a-s.length,""!==s&&(u.length1=u.length2=s.length,u.diffs.push([i.DIFF_EQUAL,s]));0!==r.diffs.length&&u.length1<e-this.patchMargin;){var l=r.diffs[0][0],f=r.diffs[0][1];l===i.DIFF_INSERT?(u.length2+=f.length,a+=f.length,u.diffs.push(r.diffs.shift()),c=!1):l===i.DIFF_DELETE&&1===u.diffs.length&&u.diffs[0][0]===i.DIFF_EQUAL&&f.length>2*e?(u.length1+=f.length,o+=f.length,c=!1,u.diffs.push([l,f]),r.diffs.shift()):(f=f.substring(0,e-u.length1-this.patchMargin),u.length1+=f.length,o+=f.length,l===i.DIFF_EQUAL?(u.length2+=f.length,a+=f.length):c=!1,u.diffs.push([l,f]),f===r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(f.length))}s=(s=this.diff_text2(u.diffs)).substring(s.length-this.patchMargin);var h=this.diff_text1(r.diffs).substring(0,this.patchMargin);""!==h&&(u.length1+=h.length,u.length2+=h.length,0!==u.diffs.length&&u.diffs[u.diffs.length-1][0]===i.DIFF_EQUAL?u.diffs[u.diffs.length-1][1]+=h:u.diffs.push([i.DIFF_EQUAL,h])),c||t.splice(++n,0,u)}}},t.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},t.prototype.patch_fromText=function(t){var e=[];if(!t)return e;for(var n=t.split("\n"),r=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;r<n.length;){var a=n[r].match(o);if(!a)throw new Error("Invalid patch string: "+n[r]);var s=new v;e.push(s),s.start1=parseInt(a[1],10),""===a[2]?(s.start1--,s.length1=1):"0"===a[2]?s.length1=0:(s.start1--,s.length1=parseInt(a[2],10)),s.start2=parseInt(a[3],10),""===a[4]?(s.start2--,s.length2=1):"0"===a[4]?s.length2=0:(s.start2--,s.length2=parseInt(a[4],10)),r++;for(var u=void 0,c=void 0,l=void 0;r<n.length;){u=n[r].charAt(0),l=n[r].substring(1);try{c=decodeURI(l)}catch(t){throw new Error("Illegal escape in patch_fromText: "+l)}if("-"===u)s.diffs.push([i.DIFF_DELETE,c]);else if("+"===u)s.diffs.push([i.DIFF_INSERT,c]);else if(" "===u)s.diffs.push([i.DIFF_EQUAL,c]);else{if("@"===u)break;if(""!==u)throw new Error('Invalid patch mode "'+u+'" in: '+c)}r++}}return e},t.prototype.diff_compute_=function(t,e,n,r){var o;if(!t)return[[i.DIFF_INSERT,e]];if(!e)return[[i.DIFF_DELETE,t]];var a=t.length>e.length?t:e,s=t.length>e.length?e:t,u=a.indexOf(s);if(-1!==u)return o=[[i.DIFF_INSERT,a.substring(0,u)],[i.DIFF_EQUAL,s],[i.DIFF_INSERT,a.substring(u+s.length)]],t.length>e.length&&(o[0][0]=i.DIFF_DELETE,o[2][0]=i.DIFF_DELETE),o;if(1===s.length)return[[i.DIFF_DELETE,t],[i.DIFF_INSERT,e]];var c=this.diff_halfMatch_(t,e);if(c){var l=c[0],f=c[1],h=c[2],p=c[3],d=c[4],_=this.diff_main(l,h,n,r),y=this.diff_main(f,p,n,r);return _.concat([[i.DIFF_EQUAL,d]],y)}return n&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,r):this.diff_bisect_(t,e,r)},t.prototype.diff_lineMode_=function(t,e,n){var r=this.diff_linesToChars_(t,e);t=r.chars1,e=r.chars2;var o=r.lineArray,a=this.diff_main(t,e,!1,n);this.diff_charsToLines_(a,o),this.diff_cleanupSemantic(a),a.push([i.DIFF_EQUAL,""]);for(var s=0,u=0,c=0,l="",f="";s<a.length;){switch(a[s][0]){case i.DIFF_INSERT:c++,f+=a[s][1];break;case i.DIFF_DELETE:u++,l+=a[s][1];break;case i.DIFF_EQUAL:if(u>=1&&c>=1){a.splice(s-u-c,u+c),s=s-u-c;for(var h=this.diff_main(l,f,!1,n),p=h.length-1;p>=0;p--)a.splice(s,0,h[p]);s+=h.length}c=0,u=0,l="",f=""}s++}return a.pop(),a},t.prototype.diff_bisect_=function(t,e,n){for(var r=t.length,o=e.length,a=Math.ceil((r+o)/2),s=a,u=2*a,c=new Array(u),l=new Array(u),f=0;f<u;f++)c[f]=-1,l[f]=-1;c[s+1]=0,l[s+1]=0;for(var h=r-o,p=h%2!=0,d=0,_=0,y=0,v=0,g=0;g<a&&!(Date.now()>n);g++){for(var m=-g+d;m<=g-_;m+=2){for(var b=s+m,w=void 0,E=(w=m===-g||m!==g&&c[b-1]<c[b+1]?c[b+1]:c[b-1]+1)-m;w<r&&E<o&&t.charAt(w)===e.charAt(E);)w++,E++;if(c[b]=w,w>r)_+=2;else if(E>o)d+=2;else if(p){if((O=s+h-m)>=0&&O<u&&-1!==l[O])if(w>=(T=r-l[O]))return this.diff_bisectSplit_(t,e,w,E,n)}}for(var k=-g+y;k<=g-v;k+=2){for(var O=s+k,T=void 0,x=(T=k===-g||k!==g&&l[O-1]<l[O+1]?l[O+1]:l[O-1]+1)-k;T<r&&x<o&&t.charAt(r-T-1)===e.charAt(o-x-1);)T++,x++;if(l[O]=T,T>r)v+=2;else if(x>o)y+=2;else if(!p){if((b=s+h-k)>=0&&b<u&&-1!==c[b]){E=s+(w=c[b])-b;if(w>=(T=r-T))return this.diff_bisectSplit_(t,e,w,E,n)}}}}return[[i.DIFF_DELETE,t],[i.DIFF_INSERT,e]]},t.prototype.diff_bisectSplit_=function(t,e,n,r,o){var i=t.substring(0,n),a=e.substring(0,r),s=t.substring(n),u=e.substring(r),c=this.diff_main(i,a,!1,o),l=this.diff_main(s,u,!1,o);return c.concat(l)},t.prototype.diff_linesToChars_=function(t,e){var n=[],r={};return n[0]="",{chars1:this.diff_linesToCharsMunge_(t,n,r,4e4),chars2:this.diff_linesToCharsMunge_(e,n,r,65535),lineArray:n}},t.prototype.diff_linesToCharsMunge_=function(t,e,n,r){for(var o="",i=0,a=-1,s=e.length;a<t.length-1;){-1===(a=t.indexOf("\n",i))&&(a=t.length-1);var u=t.substring(i,a+1);(n.hasOwnProperty?n.hasOwnProperty(u):void 0!==n[u])?o+=String.fromCharCode(n[u]):(s===r&&(u=t.substring(i),a=t.length),o+=String.fromCharCode(s),n[u]=s,e[s++]=u),i=a+1}return o},t.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var r=t[n][1],o=[],i=0;i<r.length;i++)o[i]=e[r.charCodeAt(i)];t[n][1]=o.join("")}},t.prototype.diff_commonOverlap_=function(t,e){var n=t.length,r=e.length;if(0===n||0===r)return 0;n>r?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var o=y.min(n,r);if(t===e)return o;for(var i=0,a=1;;){var s=t.substring(o-a),u=e.indexOf(s);if(-1===u)return i;a+=u,0!==u&&t.substring(o-a)!==e.substring(0,a)||(i=a,a++)}},t.prototype.diff_halfMatch_=function(t,e){if(this.diffTimeout<=0)return null;var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||2*r.length<n.length)return null;var o,i,a,s,u,c=this.diff_halfMatchI_(n,r,Math.ceil(n.length/4)),l=this.diff_halfMatchI_(n,r,Math.ceil(n.length/2));if(!c&&!l)return null;var f=(o=l?c&&c[4].length>l[4].length?c:l:c)[4];return t.length>e.length?(i=o[0],a=o[1],s=o[2],u=o[3]):(s=o[0],u=o[1],i=o[2],a=o[3]),[i,a,s,u,f]},t.prototype.diff_halfMatchI_=function(t,e,n){for(var r,o,i,a,s=t.substring(n,n+Math.floor(t.length/4)),u="",c=e.indexOf(s,0);-1!==c;){var l=this.diff_commonPrefix(t.substring(n),e.substring(c)),f=this.diff_commonSuffix(t.substring(0,n),e.substring(0,c));u.length<f+l&&(u=e.substring(c-f,c)+e.substring(c,c+l),r=t.substring(0,n-f),o=t.substring(n+l),i=e.substring(0,c-f),a=e.substring(c+l)),c=e.indexOf(s,c+1)}return 2*u.length>=t.length?[r,o,i,a,u]:null},t.prototype.diff_cleanupSemanticScore_=function(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),r=e.charAt(0),o=n.match(c),i=r.match(c),a=o&&n.match(l),s=i&&r.match(l),u=a&&n.match(f),d=s&&r.match(f),_=u&&t.match(h),y=d&&e.match(p);return _||y?5:u||d?4:o&&!a&&s?3:a||s?2:o||i?1:0},t.prototype.match_bitap_=function(t,e,n){if(e.length>this.matchMaxBits)throw new Error("Pattern too long for this browser");var r=this.match_alphabet_(e),o=this.matchThreshold,i=t.indexOf(e,n);-1!==i&&(o=y.min(this.match_bitapScore_(0,i,e,n),o),-1!==(i=t.lastIndexOf(e,n+e.length))&&(o=y.min(this.match_bitapScore_(0,i,e,n),o)));var a,s,u=1<<e.length-1;i=-1;for(var c,l=e.length+t.length,f=0;f<e.length;f++){for(a=0,s=l;a<s;)this.match_bitapScore_(f,n+s,e,n)<=o?a=s:l=s,s=Math.floor((l-a)/2+a);l=s;var h=y.max(1,n-s+1),p=y.min(n+s,t.length)+e.length,d=Array(p+2);d[p+1]=(1<<f)-1;for(var _=p;_>=h;_--){var v=r[t.charAt(_-1)];if(d[_]=0===f?(d[_+1]<<1|1)&v:(d[_+1]<<1|1)&v|(c[_+1]|c[_])<<1|1|c[_+1],d[_]&u){var g=this.match_bitapScore_(f,_-1,e,n);if(g<=o){if(o=g,!((i=_-1)>n))break;h=y.max(1,2*n-i)}}}if(this.match_bitapScore_(f+1,n,e,n)>o)break;c=d}return i},t.prototype.match_bitapScore_=function(t,e,n,r){var o=t/n.length,i=Math.abs(r-e);return this.matchDistance?o+i/this.matchDistance:i?1:o},t.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},t.prototype.patch_addContext_=function(t,e){if(0!==e.length){if(null==t.start2)throw Error("patch not initialized");for(var n=e.substring(t.start2,t.start2+t.length1),r=0;e.indexOf(n)!==e.lastIndexOf(n)&&n.length<this.matchMaxBits-this.patchMargin-this.patchMargin;)r+=this.patchMargin,n=e.substring(t.start2-r,t.start2+t.length1+r);r+=this.patchMargin;var o=e.substring(t.start2-r,t.start2);o&&t.diffs.unshift([i.DIFF_EQUAL,o]);var a=e.substring(t.start2+t.length1,t.start2+t.length1+r);a&&t.diffs.push([i.DIFF_EQUAL,a]),t.start1-=o.length,t.start2-=o.length,t.length1+=o.length+a.length,t.length2+=o.length+a.length}},t}(),m=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},b=function(){function t(t){this._dmp=new g,t&&(this._dmp.diffTimeout=t.timeout/1e3)}return t.prototype.makePatch=function(t,e,n){var r=this._dmp.diff_main(t,e,!0);r.length>2&&this._dmp.diff_cleanupSemanticLossless(r);var o=!0;null!=n&&(this._dmp.diff_levenshtein(r)<n&&(o=!1));if(o){var i=this._dmp.patch_make(t,e,r);return this._dmp.patch_toText(i)}},t.prototype.patchText=function(t,e){if("string"==typeof t&&"string"==typeof e){var n=this._dmp.patch_fromText(e),r=m(this._dmp.patch_apply(n,t),2),o=r[0];if(r[1].every(function(t){return t}))return o}},t}();function w(t,e){return t||(t=document),e||(e=window),{env:E(),window:{location:e.location.href,size:[e.innerWidth,e.innerHeight]},document:{title:t.title,size:[document.body.scrollWidth,document.body.scrollHeight]}}}function E(){var t={};return["appCodeName","appName","appVersion","deviceMemory","hardwareConcurrency","language","languages","platform","userAgent"].forEach(function(e){t[e]=navigator[e]}),t.screenWidth=window.screen.width,t.screenHeight=window.screen.height,t}function k(t){void 0===t&&(t=document),Array.prototype.forEach.call(t.querySelectorAll("svg.icon-svg"),function(t){t.innerHTML=t.innerHTML})}var O,T=function(){function t(t,e){void 0===t&&(t=document),void 0===e&&(e={captureCanvas:!1,captureHidden:!0}),this.SELECTOR="*:not(script)",this._id=0,this._idMap=new WeakMap,this._nodeMap=new Map,this._styledComponents=new Set,this._contentDocument=t,this._options=e,void 0===e.captureCanvas&&(this._options.captureCanvas=!1),void 0===e.captureHidden&&(this._options.captureHidden=!0)}return Object.defineProperty(t.prototype,"contentDocument",{get:function(){return this._contentDocument},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentWindow",{get:function(){return this.contentDocument.defaultView},enumerable:!0,configurable:!0}),t.prototype.capture=function(){this._reset();var t=this._captureReset(),e=this._captureWindowResize(),n=new Array;return n.push(t,e),this._captureAddedNode(this.contentDocument.documentElement,!0,n),{version:"1.0.0",meta:w(),actions:n}},t.prototype.captureMutations=function(t){var e=this,n=new Array;return t.forEach(function(t){switch(t.type){case"attributes":e._captureAttributeMutation(t,n);break;case"characterData":e._captureTextMutation(t,n);break;case"childList":e._captureChildListMutation(t,n);break;default:console.warn('Unsupported mutation type "'+t.type+'".')}}),n},t.prototype.captureScroll=function(t){var e=new Array;return t instanceof Document&&(t=this.contentDocument.documentElement),this.hasNode(t)&&this._captureScroll(this.getNodeId(t),t,e),e},t.prototype.captureInput=function(t){var e=new Array;return this.hasNode(t)&&this._captureValue(this.getNodeId(t),t,e,!0),e},t.prototype.captureCustomAction=function(t,e){return this.hasNode(t)?{type:e,id:this.getNodeId(t)}:null},t.prototype.getNodeId=function(t){return t&&this._idMap.has(t)?this._idMap.get(t):void 0},t.prototype.getNodeById=function(t){return this._nodeMap.get(t)},t.prototype.hasNode=function(t){return null!=t&&this._idMap.has(t)},t.prototype.getStyledComponents=function(){var t=this,e=[];return this._styledComponents.forEach(function(n){if(t._idMap.get(n)&&n.sheet&&n.sheet.cssRules&&n.sheet.cssRules.length){var r=n.sheet.cssRules,o=Array.prototype.map.call(r,function(t){return t.cssText}).join("\n");e.push({id:t._idMap.get(n),rules:o})}}),e},t.prototype._reset=function(){this._id=0,this._idMap=new WeakMap},t.prototype._nextId=function(){return++this._id},t.prototype._saveNode=function(t,e){this._idMap.set(e,t),this._nodeMap.set(t,e)},t.prototype._removeNode=function(t){this._idMap.delete(t)},t.prototype._captureReset=function(){return{type:r.RESET,id:0}},t.prototype._captureWindowResize=function(){return{type:r.RESIZE_WINDOW,id:0,size:[this.contentWindow.innerWidth,this.contentWindow.innerHeight]}},t.prototype._captureAddedNode=function(t,e,n){var r=this;if(void 0===e&&(e=!0),!this._isIgnored(t)){var o=new Set;if(t instanceof Element){this._captureElement(t,o,n);e&&Array.prototype.forEach.call(t.querySelectorAll(this.SELECTOR),function(t){r._captureElement(t,o,n)})}else t instanceof Text&&this._captureTextNode(t,n);o.forEach(function(t){r._captureTextNode(t,n)}),o.clear()}},t.prototype._captureElement=function(t,e,n){if(!this._isIgnored(t)){var o;o=this.hasNode(t)?this.getNodeId(t):this._nextId();var i={type:r.ADD_NODE,id:o,tag:t.tagName};if(null!=this._applyParent(t,i)||"HTML"===t.tagName){if(t.namespaceURI&&t.namespaceURI!==this.contentDocument.documentElement.namespaceURI&&(i.ns=t.namespaceURI),this._saveNode(i.id,t),this._applySibling(t,i,n),n.push(i),this._captureAttributes(i.id,t,n),this._captureValue(i.id,t,n),(t.scrollTop||t.scrollLeft)&&this._captureScroll(i.id,t,n),"STYLE"===t.tagName&&""===t.textContent){var a=t;if(a.sheet&&a.sheet.cssRules&&a.sheet.cssRules.length){var s=a.sheet.cssRules,u=Array.prototype.map.call(s,function(t){return t.cssText}).join("\n");i.text=u,this._styledComponents.add(a)}}if(this._options.captureCanvas&&"CANVAS"===t.tagName){var c=t;try{var l=c.toDataURL("image/webp",.9);i.text=l}catch(t){}}0===t.childElementCount&&null!=t.textContent&&""!==t.textContent?Array.prototype.forEach.call(t.childNodes,function(t){t instanceof Text&&e.add(t)}):t.childElementCount!==t.childNodes.length&&Array.prototype.forEach.call(t.childNodes,function(t){t instanceof Text&&t.textContent&&""!==t.textContent.trim()&&e.add(t)})}}},t.prototype._captureTextNode=function(t,e){var n;n=this.hasNode(t)?this.getNodeId(t):this._nextId();var o={type:r.ADD_NODE,id:n,text:t.textContent};t.parentElement&&this._isMasked(t.parentElement)&&(o.text=this._maskText(o.text)),this._applyParent(t,o),this._saveNode(o.id,t),this._applySibling(t,o,e),e.push(o)},t.prototype._captureAttributes=function(t,e,n){if(e.attributes.length){var o={type:r.CHANGE_ATTRIBUTES,id:t,attrs:{}};this._applyAttributes(e,o),n.push(o)}},t.prototype._captureValue=function(t,e,n,o){if(void 0===o&&(o=!1),e instanceof HTMLElement&&-1!==["INPUT","SELECT","TEXTAREA"].indexOf(e.tagName)){var i=null;if("INPUT"===e.tagName&&e.type&&-1!==["checkbox","radio"].indexOf(e.type.toLowerCase())&&"boolean"==typeof e.checked){var a=e.checked;(o||a)&&(i={type:r.CHANGE_VALUE,id:t,checked:a})}else if(this._isMasked(e)||"INPUT"===e.tagName&&e.type&&"password"===e.type.toLowerCase()){var s=e.value;s=this._maskText(s),i={type:r.CHANGE_VALUE,id:t,value:s}}else{s=e.value;(o||s!==e.getAttribute("value"))&&(i={type:r.CHANGE_VALUE,id:t,value:s})}i&&n.push(i)}},t.prototype._captureScroll=function(t,e,n){var o={type:r.SCROLL,id:t,scroll:[e.scrollLeft,e.scrollTop]};n.push(o)},t.prototype._captureAttributeMutation=function(t,e){var n=this.getNodeId(t.target);if(n&&t.attributeName){var o={type:r.CHANGE_ATTRIBUTES,id:n,attrs:{}};this._applyAttribute(t.target,t.attributeName,o),e.push(o)}},t.prototype._captureTextMutation=function(t,e){if(t.target&&t.target instanceof Text){var n=this.getNodeId(t.target);if(n){var o={type:r.CHANGE_TEXT,id:n,text:t.target.textContent};t.target.parentElement&&this._isMasked(t.target.parentElement)&&(o.text=this._maskText(o.text)),e.push(o)}}},t.prototype._captureChildListMutation=function(t,e){var n=this;Array.prototype.forEach.call(t.addedNodes,function(t){n._captureAddedNode(t,!0,e)}),Array.prototype.forEach.call(t.removedNodes,function(t){var o=n.getNodeId(t);if(o){var i={type:r.REMOVE_NODE,id:o};e.push(i)}})},t.prototype._applyParent=function(t,e){if(t.parentElement){var n=this.getNodeId(t.parentElement);if(n)return e.parentId=n,n}return null},t.prototype._applySibling=function(t,e,n){var r=t,o=r.nextElementSibling,i=r.nextSibling,a=o||i;if(a){var s=this.getNodeId(a);s||this._captureAddedNode(a,!1,n),void 0!==(s=this.getNodeId(a))&&(e.nextSiblingId=s)}},t.prototype._applyAttributes=function(t,e){var n=this;t.attributes.length&&Array.prototype.forEach.call(t.attributes,function(r){n._applyAttribute(t,r.name,e)})},t.prototype._applyAttribute=function(e,n,r){var o=null,i=!0;"src"===n&&"string"==typeof e.src?"IMG"===e.tagName&&this._isMasked(e)?i=!1:o=e.src:"href"===n&&"string"==typeof e.href?"A"===e.tagName?(o=e.getAttribute(n),r.attrs[t.DATA_HREF]=e.href):o=e.href:o=e.getAttribute(n),i&&(r.attrs[n]=o)},t.prototype._isIgnored=function(e){if(e instanceof Element){if(null!=e.getAttribute(t.DATA_IGNORE)||null!=e.getAttribute(t.DATA_IGNORED))return!0;if(this._options.captureHidden&&e instanceof HTMLElement&&e.parentElement&&"none"===e.parentElement.style.display)return!0;switch(e.tagName){case"SCRIPT":return!0}}return!1},t.prototype._isMasked=function(e){return null!=e.getAttribute(t.DATA_MASKED)},t.prototype._isDesensitized=function(e){return null!=e.getAttribute(t.DATA_DESENSITIZED)},t.prototype._maskText=function(t){return"*".repeat((t||"").length)},t.DATA_HREF="data-xreplay-href",t.DATA_IGNORE="data-xreplay-ignore",t.DATA_IGNORED="data-xreplay-ignored",t.DATA_MASKED="data-xreplay-masked",t.DATA_DESENSITIZED="data-xreplay-masked",t}(),x=n(47),S=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._desensitizers=t}return t.prototype.desensitize=function(t){return this._desensitizers.reduce(function(t,e){return e.desensitize(t)},t)},t}(),R=function(){function t(t,e){void 0===e&&(e="*"),this._searchValue=t,this._replaceValue=e}return t.prototype.desensitize=function(t){return t.replace(this._searchValue,this._replaceValue)},t}(),A=(O=function(t,e){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}O(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),N=function(t){function e(e,n,r){void 0===r&&(r="*");if(e<3)throw new Error("The minimum of 'digits' parameter is 3.");if(void 0===n&&(n=e/2,e>=10&&(n=e-7)),n<=0)throw new Error("The minimum of 'mask' parameter is 1.");if(e-n<1)throw new Error("The 'digits' parameter must be greater than 'mask' parameter.");var o=Math.ceil((e-n)/2),i=n,a=e-o-i;return t.call(this,new RegExp("(\\d{"+a+"})(\\d{"+i+"})(\\d{"+o+"})"),"$1"+r.repeat(i)+"$3")||this}return A(e,t),e}(R),I=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),C=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object(x.polyfill)();!function(t){function e(e,n,r){void 0===n&&(n=e.parentElement);var o=void 0===r?{}:r,i=o.width,a=void 0===i?0:i,s=o.height,u=void 0===s?0:s,c=o.autoResize,l=void 0!==c&&c,f=o.autoAlignCenter,h=void 0!==f&&f,p=o.staticOnly,d=void 0!==p&&p,_=o.renderCanvas,y=void 0!==_&&_,v=o.renderTimeout,g=void 0===v?400:v,m=t.call(this)||this;if(m._loadingElements=new Set,m._scrollActions=new Set,m._resizeTimer=null,m._svgFixingTimer=0,m._renderTimeout=400,m._loadingSubscribed=!1,m._idMap=new WeakMap,m._dataMap=null,m._isSuspended=!1,m._preventClick=function(t){t.stopPropagation(),t.preventDefault()},!e)throw new Error("Content frame can not be null or empty.");if(!n)throw new Error("Content container can not be null or empty.");if(m._contentFrame=e,m._contentContainer=n,m._contentDocument=m._contentFrame.contentDocument,m.contentFrame.setAttribute("sandbox","allow-same-origin"),0===a&&m.contentFrame.parentElement&&(a=m.contentFrame.parentElement.offsetWidth),0===u&&m.contentFrame.parentElement&&(u=m.contentFrame.parentElement.offsetHeight),m._autoResize=l,m._autoAlignCenter=h,m._staticOnly=d,m._renderCanvas=y,m._width=a,m._height=u,m._dmp=new b,isNaN(g)||g<0)throw new Error("renderTimeout must be a non-negative number (>=0).");return m._renderTimeout=g,m._initDesensitizer(),m._initOverlay(),m}I(e,t),Object.defineProperty(e.prototype,"dataMap",{get:function(){return this._dataMap},set:function(t){this._dataMap=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoResize",{get:function(){return this._autoResize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoAlignCenter",{get:function(){return this._autoAlignCenter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isStaticOnly",{get:function(){return this._staticOnly},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderCanvas",{get:function(){return this._renderCanvas},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSuspended",{get:function(){return this._isSuspended||this.isStaticOnly},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width!==t&&(this._width=t,this._resize())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height!==t&&(this._height=t,this._resize())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentContainer",{get:function(){return this._contentContainer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentWidth",{get:function(){return this._contentWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentHeight",{get:function(){return this._contentHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentFrame",{get:function(){return this._contentFrame},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nodeMap",{get:function(){return this._nodeMap},enumerable:!0,configurable:!0}),e.prototype.hasNode=function(t){return this.nodeMap.has(t)},e.prototype.getNode=function(t){return this._nodeMap.has(t)?this.nodeMap.get(t):void 0},e.prototype.getNodeId=function(t){return t&&this._idMap.has(t)?this._idMap.get(t):void 0},e.prototype.renderActions=function(t){var e=this;return this._isRenderingSnapshot=!0,new Promise(function(n){if(!e._contentFrame.contentDocument)throw new Error("IFrame must have its own content document.");if(e.performActions(t),e._loadingSubscribed||e._appendBodyFragment(),e.isStaticOnly){var r=e._contentFrame.contentDocument.createElement("style");r.textContent="* { transition: none !important; animation: none !important; }",e._contentFrame.contentDocument.head.appendChild(r)}e._afterLoading().then(function(){e._applyScrollings(),e._isRenderingSnapshot=!1,n()})})},e.prototype.reset=function(){var e,n;if(!this._contentFrame.contentDocument)throw new Error("Fail to reset content document of iframe.");t.prototype.reset.call(this),this.nodeMap?this.nodeMap.clear():this._nodeMap=new Map,this._contentDocument=this._contentFrame.contentDocument,this._bodyFragment=null,this._loadingSubscribed=!1;try{for(var r=C(this._loadingElements),o=r.next();!o.done;o=r.next()){var i=o.value;i.onload=null,i.onerror=null,i.onabort=null}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}this._resetDocument(),this._scrollActions.clear(),this._loadingElements.clear()},e.prototype.suspend=function(){this._isSuspended=!0},e.prototype.resume=function(){this._isSuspended=!1},e.prototype.performAddNode=function(t){var e;if(this.hasNode(t.id))e=this.getNode(t.id);else{try{if(t.tag){if(t.ns)e=this.contentDocument.createElementNS(t.ns,t.tag);else if(e=this.contentDocument.createElement(t.tag),"IFRAME"===t.tag)e.setAttribute("sandbox","allow-forms allow-orientation-lock allow-same-origin allow-scripts");else if(this.renderCanvas&&"CANVAS"===t.tag&&t.text){var n=e.getContext("2d");n&&setTimeout(function(){var e=new Image;e.addEventListener("load",function(){n.drawImage(e,0,0)}),e.src=t.text})}else if("STYLE"===t.tag&&t.text){var r=t.text,o="styledComponent-"+t.id;this.dataMap&&this.dataMap.has(o)&&(r=this.dataMap.get(o)),e.innerText=r}else if("HEAD"===t.tag){var i=e,a=this.contentDocument.createElement("style");a.innerText="\n.xspace-foresee-components-MainOrder-index_sub-orders-vRpAP,\n.xspace-foresee-components-OrderCard2-index_goodsInfo-3K9HA {\n  filter: blur(3px);\n}",i.appendChild(a)}}else{var s=t.text||"",u=this.desensitize(s);e=this.contentDocument.createTextNode(u)}}catch(n){e=document.createElement("invalidtag"),console.info("Cannot create the element "+t.tag+": "+n)}this._saveNode(t.id,e)}if(t.parentId){var c=this.getNode(t.parentId);if(this.isRenderingSnapshot&&c&&"BODY"===c.tagName&&!this._bodyFragment&&(this._bodyFragment=this.contentDocument.createDocumentFragment(),this._bodyFragment.appendChild(c)),c){var l=void 0;if(t.nextSiblingId&&(l=this.getNode(t.nextSiblingId)),l)try{c.insertBefore(e,l)}catch(t){c.appendChild(e)}else c.appendChild(e)}}else"HTML"===t.tag&&this.contentDocument.appendChild(e)},e.prototype.performRemoveNode=function(t){var e=this.getNode(t.id);e&&e.remove()},e.prototype.performChangeAttributes=function(t){var n=this,r=this.getNode(t.id);r&&(this.isRenderingSnapshot&&"LINK"===r.tagName&&t.attrs.rel&&"stylesheet"===t.attrs.rel.toLocaleLowerCase()&&"href"in t.attrs&&!("disabled"in t.attrs)&&(this._fixMixedContent(t),this._inBodyFragment(r)||(this._subscribeLoading(r),null!=this._fallbackTimer&&clearTimeout(this._fallbackTimer),this._fallbackTimer=window.setTimeout(function(){n._appendBodyFragment(),n._fallbackTimer=null},800))),"type"in t.attrs&&(null==t.attrs.type?r.removeAttribute("type"):r.setAttribute("type",t.attrs.type)),Object.keys(t.attrs).forEach(function(e){if("type"!==e)if(null==t.attrs[e])r.removeAttribute(e);else{var n=t.attrs[e];try{"SELECT"===r.tagName&&"value"===e?window.setTimeout(function(){r.value=n,r.setAttribute(e,n)}):r.setAttribute(e,n)}catch(t){}}}),"IMG"===r.tagName&&e.DATA_MASKED in t.attrs&&r.setAttribute("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAAXNSR0IArs4c6QAAAAxJREFUCB1jmDlzJgADmgHMnUAPsQAAAABJRU5ErkJggg=="),"svg"===r.tagName&&r.classList.contains("icon-svg")&&this.tryFixSVG())},e.prototype.performChangeText=function(t){var e=this.getNode(t.id);if(e)if(t.isPatch&&null!=t.text){if(null!=e.textContent){var n=this._dmp.patchText(e.textContent,t.text);null!=n&&(e.textContent=n)}}else e.textContent=t.text},e.prototype.performChangeValue=function(t){var e=this,n=this.getNode(t.id);n&&window.setTimeout(function(){if(t.isPatch&&null!=t.value){var r=e._dmp.patchText(n.value,t.value);null!=r&&(n.value=e.desensitize(r))}else"value"in t&&(n.value=e.desensitize(t.value));"boolean"==typeof t.checked&&(n.checked=t.checked)},0)},e.prototype.performFocus=function(t){var e=this;if(!this.isRenderingSnapshot){var n=this.getNode(t.id);n&&"function"==typeof n.focus&&window.setTimeout(function(){e.contentFrame.focus(),n.focus()},0)}},e.prototype.performBlur=function(t){if(!this.isRenderingSnapshot){var e=this.getNode(t.id);e&&"function"==typeof e.blur&&window.setTimeout(function(){e.blur()},0)}},e.prototype.performScroll=function(t){this.isRenderingSnapshot?this._scrollActions.add(t):this._applyScrolling(t)},e.prototype.performResizeWindow=function(t){this._contentWidth=t.size[0],this._contentHeight=t.size[1],this.contentFrame.width=this.contentWidth+"px",this.contentFrame.height=this.contentHeight+"px",this._resize()},e.prototype.performShowWindow=function(){},e.prototype.performHideWindow=function(){},e.prototype.desensitize=function(t){return t&&this._desensitizer?this._desensitizer.desensitize(t):t||""},e.prototype.tryFixSVG=function(){var t=this;0!==this._svgFixingTimer&&(clearTimeout(this._svgFixingTimer),this._svgFixingTimer=0),this._svgFixingTimer=window.setTimeout(function(){k(t.contentDocument),t._svgFixingTimer=0},300)},e.prototype._initDesensitizer=function(){this._desensitizer=new S(new N(16),new N(11),new R("你身后轻轻地唱歌","你******歌"),new R("徐晴空","徐**"),new R("西兴瞌睡","徐**"))},e.prototype._initOverlay=function(){this._overlay=this.contentDocument.createElement("div"),this._overlay.style.display="flex",this._overlay.style.alignItems="center",this._overlay.style.justifyContent="center",this._overlay.style.color="rgba(255, 255, 255, 0.85)",this._overlay.style.fontSize="18px",this._overlay.style.textAlign="center",this._overlay.style.background="rgba(0, 0, 0, 0.66)",this._overlay.style.position="absolute",this._overlay.style.zIndex="99999999",this._overlay.style.left="0",this._overlay.style.right="0",this._overlay.style.top="0",this._overlay.style.bottom="0"},e.prototype._showOverlay=function(t){void 0===t&&(t=""),this._overlay.innerText=t,this._contentContainer.appendChild(this._overlay)},e.prototype._hideOverlay=function(){this._overlay.remove()},e.prototype._resetDocument=function(){!function(t){void 0===t&&(t=document);var e=t.readyState,n=function(){k(t)};"complete"!==e&&"interactive"!==e||window.setTimeout(n,500),t.addEventListener("DOMContentLoaded",function(){window.setTimeout(n,500)})}(this.contentDocument),this.contentDocument.documentElement&&(this.contentDocument.documentElement.remove(),this.contentDocument.write("<!DOCTYPE html>"),this.contentDocument.removeEventListener("click",this._preventClick,!0),this.contentDocument.addEventListener("click",this._preventClick,!0))},e.prototype._resize=function(){var t=this;this.autoResize&&null!=this.contentWidth&&0!==this.contentWidth&&null!=this.contentHeight&&0!==this.contentHeight&&null!=this.width&&0!==this.width&&null!=this.height&&0!==this.height&&(this._resizeTimer&&(clearTimeout(this._resizeTimer),this._resizeTimer=null),this._resizeTimer=window.setTimeout(function(){var e,n;t.contentFrame.width=t.contentWidth+"px",t.contentFrame.height=t.contentHeight+"px",e=t.width/t.contentWidth,n=t.height/t.contentHeight;var r=Math.min(e,n);t.contentContainer.style.width=t.contentFrame.width,t.contentContainer.style.height=t.contentFrame.height,t.contentContainer.style.transform="scale("+r+")",t.contentContainer.style.transformOrigin="top left",t.autoAlignCenter&&(t.contentContainer.style.marginLeft=(t.width-t.contentWidth*r)/2+"px",t.contentContainer.style.marginTop=(t.height-t.contentHeight*r)/2+"px")},10))},e.prototype._subscribeLoading=function(t){var e=this;this._loadingSubscribed=!0,this._loadingElements.add(t);var n=function(){t.onload=null,t.onerror=null,t.onabort=null,e._loadingElements.delete(t),0===e._loadingElements.size&&(null!=e._fallbackTimer&&clearTimeout(e._fallbackTimer),e._appendBodyFragment())};t.onload=n,t.onerror=n,t.onabort=n},e.prototype._applyScrollings=function(){var t=this;this._scrollActions.forEach(function(e){t._applyScrolling(e)}),this._scrollActions.clear()},e.prototype._applyScrolling=function(t){var e=this.getNode(t.id);if(e)try{e.scrollTo({behavior:this.isSuspended?"auto":"smooth",left:t.scroll[0],top:t.scroll[1]})}catch(t){}},e.prototype._afterLoading=function(){var t=this,e=this._loadingElements;return Promise.race([new Promise(function(n){window.setTimeout(function(){e.clear(),n()},t._renderTimeout)}),new Promise(function(t){!function n(){0===e.size?t():window.setTimeout(n,50)}()})])},e.prototype._saveNode=function(t,e){this._idMap.set(e,t),this.nodeMap.set(t,e)},e.prototype._appendBodyFragment=function(){this._bodyFragment&&(this.contentDocument.documentElement.appendChild(this._bodyFragment),this._bodyFragment=null,this._loadingSubscribed=!1)},e.prototype._inBodyFragment=function(t){return!!this._bodyFragment&&this._bodyFragment.contains(t)},e.prototype._fixMixedContent=function(t){var e=t.attrs.href;null!=e&&e.endsWith(".css")&&e.startsWith("http://")&&"https:"===location.protocol&&(t.attrs.href=e.replace("http://","https://"))},e.DATA_HREF="data-xreplay-href",e.DATA_IGNORE="data-xreplay-ignore",e.DATA_IGNORED="data-xreplay-ignored",e.DATA_MASKED="data-xreplay-masked"}(u);n.d(e,"b",function(){return u}),n.d(e,"d",function(){return T}),n.d(e,"a",function(){return r}),n.d(e,"c",function(){return b}),n.d(e,"e",function(){return w})},function(t,e,n){"use strict";var r={};n.r(r),n.d(r,"createRecording",function(){return u}),n.d(r,"createBlock",function(){return c}),n.d(r,"addRecordingData",function(){return l}),n.d(r,"CloudServiceType",function(){return d}),n.d(r,"uploadBlockFile",function(){return v}),n.d(r,"uploadSnapshotFile",function(){return g}),n.d(r,"getCloudFileURL",function(){return m});var o=n(14),i=n(0),a=function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},s={createRecording:"recording.create",createRecordingBlock:"block.create",addRecordingData:"recording.data.add"};function u(t){var e={};return null!=t.user&&(e.user=JSON.stringify(t.user)),i.K.post(s.createRecording,{baseURL:t.baseServiceURL,params:a({appKey:t.appKey,baseServiceURL:t.baseServiceURL,createTime:t.createTime,duration:t.duration,id:t.id,meta:JSON.stringify(t.meta),type:t.type,version:t.version},e)}).then(function(t){if(t.uploadType&&t.uploadConfig)return{type:t.uploadType,config:t.uploadConfig}})}function c(t,e){var n=t.block,r=t.compressedSnapshot,o=t.data,u=t.markers,c=t.recording,l=t.tags,f={};return o&&(f.data=JSON.stringify(o)),u&&(f.markers=JSON.stringify(u)),l&&(f.tags=JSON.stringify(l)),e&&(f.blockURL=e),i.K.post(s.createRecordingBlock,{baseURL:c.baseServiceURL,params:a({appKey:c.appKey,blockId:n.id,recordingId:c.id,firstKeyFrameTime:n.firstKeyFrameTime,lastKeyFrameTime:n.lastKeyFrameTime,duration:c.duration,hasSnapshot:r||n.snapshot?1:0},f)})}function l(t,e){return i.K.post(s.addRecordingData,{baseURL:e.baseServiceURL,params:{appKey:e.appKey,recordingId:e.id,data:JSON.stringify(t)}})}var f=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},h=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function p(t,e,n){return f(this,void 0,void 0,function(){var r;return h(this,function(o){switch(o.label){case 0:return r=function(t,e,n){var r=new FormData;return r.append("Content-Type","application/gzip"),r.append("Content-Encoding","gzip"),r.append("OSSAccessKeyId",n.accessId),r.append("policy",n.policy),r.append("Signature",n.signature),r.append("key",""+n.dir+e),r.append("success_action_status","200"),r.append("file",t),r}(t,e,n),[4,i.q.post(n.host,{params:r})];case 1:return o.sent(),[2]}})})}var d,_=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},y=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function v(t,e,n){return _(this,void 0,void 0,function(){return y(this,function(r){switch(r.label){case 0:return n.type!==d.ALI_OSS?[3,2]:[4,p(t,e,n.config)];case 1:r.sent(),r.label=2;case 2:return[2]}})})}function g(t,e,n){return _(this,void 0,void 0,function(){return y(this,function(r){switch(r.label){case 0:return n.type!==d.ALI_OSS?[3,2]:[4,p(t,e,n.config)];case 1:r.sent(),r.label=2;case 2:return[2]}})})}function m(t,e){if(e.type===d.ALI_OSS)return function(t,e){return e.host+"/"+e.dir+t}(t,e.config)}!function(t){t.ALI_OSS="ali-oss"}(d||(d={}));var b,w=(b=function(t,e){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}b(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),E=function(t){function e(e,n){void 0===n&&(n="mtop.alibaba.rdc.xreplay");var r=t.call(this,e)||this;return r.keyFrames=[],r.baseServiceURL=n,r}return w(e,t),e}(i.f),k=n(1),O=n(13),T=n(12),x=n(11),S=function(){return(S=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},R=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},A=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},N=function(){function t(t){this._currentTime=-1,this._isJumping=!1,this._contentDocument=new O.a,this._initPerformers(t)}return Object.defineProperty(t.prototype,"recording",{get:function(){return this._recording},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentDocument",{get:function(){return this._contentDocument},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this._currentTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReady",{get:function(){return this._recordingReader&&this._recordingReader.isOpen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isJumping",{get:function(){return this._isJumping},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._recordingReader.getDuration()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"snapshotCapturers",{get:function(){return this._snapshotCapturer||(this._snapshotCapturer=new T.a),this._snapshotCapturer},enumerable:!0,configurable:!0}),t.prototype.getPerformer=function(t){return this._performers[t]},t.prototype.open=function(t){return R(this,void 0,void 0,function(){var e;return A(this,function(n){switch(n.label){case 0:return this.close(),this._recording=t,e=this,[4,t.openRead()];case 1:return e._recordingReader=n.sent(),[2]}})})},t.prototype.close=function(){this._isJumping=!1,this._currentTime=-1,this._contentDocument.clear()},t.prototype.jumpTo=function(t){return R(this,void 0,void 0,function(){var e;return A(this,function(n){switch(n.label){case 0:if(!this.isReady)throw new Error("VirtualPlayer is not ready.");return t<=this.currentTime?[2,[]]:(t>this.duration&&(t=this.duration),this._isJumping=!0,[4,this._recordingReader.readKeyFrames(t)]);case 1:return(e=n.sent())&&e.length?[4,this._batchPerformKeyFrames(e)]:[3,3];case 2:n.sent(),n.label=3;case 3:return this._currentTime=t,e&&e.length?[2,e]:[2,[]]}})})},t.prototype.captureSnapshot=function(){return this.snapshotCapturers.capture(this.contentDocument)},t.prototype.captureSnapshotWithKeyFrames=function(){var t=[],e=this.captureSnapshot(),n=this.getPerformer(i.n.Mouse);if(n){var r=Object(i.v)(this.currentTime,i.n.Mouse,i.b.MOUSE_MOVE,n.mousePosition);t.push(r)}return S({},e,{keyFrames:t})},t.prototype._initPerformers=function(t){var e,n=this;if(0===(e=t?t.length>0?"string"==typeof t[0]?Object(x.createPerformers)(t):t:[]:Object(x.createPerformers)()).length)throw new Error('Cannot find any "Performer".');var r={};e.forEach(function(t){r[t.type]=t}),this._performers=r,e.forEach(function(t){return t.init(n)})},t.prototype._batchPerformKeyFrames=function(t){var e=this;return new Promise(function(n){t.forEach(function(t){e._performKeyFrame(t)}),t.reduce(function(t,n){return t.then(function(){return e._performKeyFrame(n)})},Promise.resolve()).then(function(){n()})})},t.prototype._performKeyFrame=function(t){var e=Object(i.E)(t),n=this._performers[e];return n?n.perform(t,this.recording.getDataMap()):Promise.resolve()},t}(),I=function(){function t(t){this._isOpen=!1,this._recording=t}return Object.defineProperty(t.prototype,"isOpen",{get:function(){return this._isOpen},enumerable:!0,configurable:!0}),t.prototype.isEOF=function(){if(!this.isOpen)throw new Error("VirtualRecordingReader is not open.");return 0===this._recording.keyFrames.length},t.prototype.getCreateTime=function(){if(!this.isOpen)throw new Error("VirtualRecordingReader is not open.");return this._recording.createTime},t.prototype.getDuration=function(){if(!this.isOpen)throw new Error("VirtualRecordingReader is not open.");return this._recording.duration},t.prototype.open=function(){if(this.isOpen)throw new Error("VirtualRecordingReader is already open.");return this._isOpen=!0,Promise.resolve()},t.prototype.close=function(){this._isOpen=!1},t.prototype.readKeyFrames=function(t,e){if(void 0===e&&(e=i.h.SEQUENTIAL),!this.isOpen)throw new Error("VirtualRecordingReader is not open.");if(e!==i.h.SEQUENTIAL)throw new Error("VirtualRecordingReader only supports sequential read mode.");for(var n=-1,r=0;r<this._recording.keyFrames.length;r++){var o=this._recording.keyFrames[r];if(!(Object(i.D)(o)<=t))break;n=r}if(-1!==n){var a=this._recording.shiftKeyFrames(n+1);return Promise.resolve(a)}return Promise.resolve([])},t.prototype.readIndexMarkerDetail=function(){throw new Error("VirtualRecordingReader does not support readIndexMarkerDetail().")},t.prototype.readTags=function(){throw new Error("VirtualRecordingReader does not support readTags().")},t.prototype.readMarkers=function(){throw new Error("VirtualRecordingReader does not support readMarkers().")},t}(),C=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),P=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},D=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},L=function(t){function e(e){var n=t.call(this)||this;return n.createTime=e.createTime,n.duration=e.duration,e.tags&&(n.tags=e.tags),e.markers&&(n.markers=e.markers),e.keyFrames?n._keyFrames=e.keyFrames:n._keyFrames=[],n}return C(e,t),Object.defineProperty(e.prototype,"keyFrames",{get:function(){return this._keyFrames},enumerable:!0,configurable:!0}),e.prototype.openRead=function(){return P(this,void 0,void 0,function(){var t;return D(this,function(e){switch(e.label){case 0:return[4,(t=new I(this)).open()];case 1:return e.sent(),[2,t]}})})},e.prototype.getDataMap=function(){return null},e.prototype.openWrite=function(){throw new Error("Not implemented yet.")},e.prototype.shiftKeyFrames=function(t){return this.keyFrames.splice(0,t)},e.prototype.writeKeyFrame=function(t){this.duration=Object(i.D)(t),this.keyFrames.push(t)},e.prototype.writeKeyFrames=function(t){var e=this;t.forEach(function(t){return e.writeKeyFrame(t)})},e}(i.f),F=n(24),M=n.n(F),j=function(){return(j=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},U=function(){function t(t,e){this._recording=t,this._initConfig(e),this._initVirtualPlayer(t)}return t.prototype.shouldTransfer=function(){var t=this._recording.keyFrames,e=t.length;if(e>=2){var n=Object(i.D)(t[0]);if(Object(i.D)(t[e-1])-n>=this._config.period)return!0}return!1},t.prototype.createPayload=function(t){void 0===t&&(t=!1);var e=this._recording,n=e.keyFrames,r=e.data,o=e.markers,i=e.tags;if(t||n.length>0){var a={};return r&&r.length>0&&(a.data=r.splice(0)),o&&o.length>0&&(a.markers=o.splice(0)),i&&i.length>0&&(a.tags=i.splice(0)),j({keyFrames:n.splice(0)},a)}},t.prototype.createTask=function(t){var e={retry:0,retryTimestamp:Date.now(),status:i.a.INITIAL,payload:{block:Object(i.u)(Object(i.A)(),t.keyFrames),recording:this._recording,data:t.data,markers:t.markers,tags:t.tags}};if(this._virtualPlayer.contentDocument.documentElement){var n=!1,r=t.keyFrames[0];if(r){var o=Object(i.C)(r);n=o&&Array.isArray(o)&&o[0].type===k.a.RESET}if(!n){var a=this._virtualPlayer.captureSnapshotWithKeyFrames();e.payload.block.snapshot=a}}return this._virtualRecording.writeKeyFrames(t.keyFrames),this._virtualPlayer.jumpTo(this._virtualRecording.duration),e},t.prototype._initConfig=function(e){this._config=j({},t.DEFAULT_CONFIG,e),"string"==typeof this._config.period&&(this._config.period=M()(this._config.period))},t.prototype._initVirtualPlayer=function(t){this._virtualPlayer=new N,this._virtualRecording=new L(t),this._virtualPlayer.open(this._virtualRecording)},t.DEFAULT_CONFIG={period:"2m"},t}();function q(t){var e=o.get(t),n={};if(e){var r=e.enableWebWorker,i=e.interceptors;null!=r&&(n.enableWebWorker=r),null!=i&&(n.interceptors=i)}return n}var B,H=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),W=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.hasMoreWork=function(){return this._tasks.length>0},e.prototype.requestNextWork=function(){return this._tasks.peek()},e}(i.j),z=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),K=function(){return(K=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},V=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},G=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},X=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n},J=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},Y=function(t){function e(e){var n=t.call(this)||this;return n._isPaused=!1,n._isFlushing=!1,n._perform=function(e){switch(e.status){case i.a.INITIAL:n._currentRetries=1,n._transfer(e);break;case i.a.REJECTED:n._currentRetries++,n._currentRetries<=n._config.maxRetries?n._transfer(e):(t.prototype.dequeue.call(n),n._backupFailedTask(e));break;case i.a.FULFILLED:t.prototype.dequeue.call(n)}},n._initConfig(e),n._scheduler=new W(n.tasks,n._perform,{timeout:7}),n}return z(e,t),e.prototype.enqueue=function(e){t.prototype.enqueue.call(this,e),this._isFlushing||this._isPaused||this._scheduler.start()},e.prototype.flush=function(e){return void 0===e&&(e=i.c.NORMAL),V(this,void 0,void 0,function(){var n,r,o,a,s,u,c,l,f,h;return G(this,function(p){switch(p.label){case 0:return this._isFlushing=!0,n=[],e!==i.c.BACKUP_TASKS?[3,2]:[4,this._backupWorkloop()];case 1:return n=p.sent(),[3,17];case 2:return e!==i.c.TAKE_TASKS?[3,3]:(n=this.tasks.toArray(),this.clear(),[3,17]);case 3:this._scheduler.stop(),r=!1,o=3,n=this.tasks.toArray(),p.label=4;case 4:p.trys.push([4,14,15,16]),a=J(n),s=a.next(),p.label=5;case 5:if(s.done)return[3,13];if((u=s.value).status===i.a.FULFILLED)return[3,11];c=0,p.label=6;case 6:if(!(c<o))return[3,11];p.label=7;case 7:return p.trys.push([7,9,,10]),[4,this._upload(u)];case 8:return p.sent(),[3,11];case 9:return p.sent(),c===o-1&&(r=!0),[3,10];case 10:return c++,[3,6];case 11:t.prototype.dequeue.call(this),p.label=12;case 12:return s=a.next(),[3,5];case 13:return[3,16];case 14:return l=p.sent(),f={error:l},[3,16];case 15:try{s&&!s.done&&(h=a.return)&&h.call(a)}finally{if(f)throw f.error}return[7];case 16:if(this._scheduler.start(),r)throw this._isFlushing=!1,new Error("XReplay - Error while flushing tasks.");p.label=17;case 17:return this._isFlushing=!1,[2,n]}})})},e.prototype.suspend=function(){this._isPaused=!0},e.prototype.resume=function(){this._isPaused=!1},e.prototype.createRecording=function(t){return V(this,void 0,void 0,function(){var e;return G(this,function(n){switch(n.label){case 0:return this._cloudServiceConfig&&t.id===this._lastCreatedRecordingId?[3,2]:(this._lastCreatedRecordingId=t.id,e=this,[4,u(t)]);case 1:e._cloudServiceConfig=n.sent(),n.label=2;case 2:return[2]}})})},e.prototype._initConfig=function(t){this._config=K({},e.DEFAULT_CONFIG,t)},e.prototype._transfer=function(t){return V(this,void 0,void 0,function(){var e;return G(this,function(n){switch(n.label){case 0:this._isPaused=!0,this._scheduler.stop(),t.status=i.a.RUNNING,n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,this._upload(t)];case 2:return n.sent(),t.status=i.a.FULFILLED,[3,5];case 3:return e=n.sent(),t.status=i.a.REJECTED,console.error("XReplay - Error while transfering workloop:",e),[3,5];case 4:return this._isPaused=!1,this._scheduler.start(),[7];case 5:return[2,t.status]}})})},e.prototype._upload=function(t){return V(this,void 0,void 0,function(){var e,n,r,o,i,a,s,u,l,f,h,p;return G(this,function(d){switch(d.label){case 0:return e=t.payload,[4,this.createRecording(e.recording)];case 1:return d.sent(),this._cloudServiceConfig?(n=e.block,r=n.snapshot,o=X(n,["snapshot"]),e.compressedBlock?[3,3]:(i=e,[4,this._compressData(o)])):[3,15];case 2:i.compressedBlock=d.sent(),d.label=3;case 3:return a=e.recording.id+"/"+o.id,s=a+".json",u=!0,(l=this._config.interceptors)&&"function"==typeof l.uploadBlockFile?[4,l.uploadBlockFile(e.compressedBlock,s)]:[3,5];case 4:u=d.sent(),d.label=5;case 5:return u?[4,v(e.compressedBlock,s,this._cloudServiceConfig)]:[3,7];case 6:d.sent(),d.label=7;case 7:return f=m(s,this._cloudServiceConfig),[4,c(e,f)];case 8:return d.sent(),e.compressedSnapshot||!r?[3,10]:(h=e,[4,this._compressData(r)]);case 9:h.compressedSnapshot=d.sent(),d.label=10;case 10:return e.compressedSnapshot?(p=a+".snapshot.json",u=!0,l&&"function"==typeof l.uploadSnapshotFile?[4,l.uploadSnapshotFile(e.compressedSnapshot,p)]:[3,12]):[3,14];case 11:u=d.sent(),d.label=12;case 12:return u?[4,g(e.compressedSnapshot,p,this._cloudServiceConfig)]:[3,14];case 13:d.sent(),d.label=14;case 14:return e.compressedBlock=void 0,e.compressedSnapshot=void 0,[3,16];case 15:throw new Error("Cannot fetch the configuration of the cloud service.");case 16:return[2]}})})},e.prototype._backupFailedTask=function(t){return V(this,void 0,void 0,function(){var e;return G(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,this._prepareBackupTask(t)];case 1:return null==(e=n.sent()).retry?e.retry=0:e.retry+=1,e.retryTimestamp=Date.now(),e.status=i.a.INITIAL,[4,i.P.tasks.add(e)];case 2:return n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return[2]}})})},e.prototype._prepareBackupTask=function(t){return V(this,void 0,void 0,function(){var e,n,r,o,i,a,s,u;return G(this,function(c){switch(c.label){case 0:return e=K({},t.payload),n=e.block,r=n.snapshot,o=X(n,["snapshot"]),i=e.compressedBlock,a=e.compressedSnapshot,i?[3,2]:(s=e,[4,this._compressData(o)]);case 1:s.compressedBlock=c.sent(),c.label=2;case 2:return a||!r?[3,4]:(u=e,[4,this._compressData(r)]);case 3:u.compressedSnapshot=c.sent(),c.label=4;case 4:return e.block=K({},o,{keyFrames:[]}),[2,K({},t,{payload:e})]}})})},e.prototype._backupWorkloop=function(){return V(this,void 0,void 0,function(){var t,e,n,r,o,a,s;return G(this,function(u){switch(u.label){case 0:if(t=this.tasks.toArray(),e=[],!(t.length>0))return[3,4];this.clear(),u.label=1;case 1:u.trys.push([1,3,,4]);try{for(n=J(t),r=n.next();!r.done;r=n.next())(o=r.value).status=i.a.INITIAL,e.push(o)}catch(t){a={error:t}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[4,i.P.tasks.bulkAdd(e)];case 2:return u.sent(),[3,4];case 3:return u.sent(),[3,4];case 4:return[2,e]}})})},e.prototype._compressData=function(t){return V(this,void 0,void 0,function(){var e;return G(this,function(n){switch(n.label){case 0:return this._config.enableWebWorker?[4,Object(i.t)(t)]:[3,2];case 1:return e=n.sent(),[3,3];case 2:e=Object(i.s)(t),n.label=3;case 3:return[2,e]}})})},e.DEFAULT_CONFIG={enableWebWorker:!0,maxRetries:3},e}(i.o),Q=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},Z=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},tt=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r._tasks=[],r._workLoop=new Y(q(e.id)),r}return Q(e,t),e.prototype.trigger=function(){this.shouldTransfer()&&this._updateBlackbox()},e.prototype.flush=function(t){return $(this,void 0,void 0,function(){var e=this;return Z(this,function(n){return this._recording.id=Object(i.B)(),this._updateBlackbox().forEach(function(t){return e._workLoop.enqueue(t)}),t!==i.c.CLIP_BLACKBOX&&(this._tasks=[]),[2,[]]})})},e.prototype._updateBlackbox=function(){var t=this.createPayload();if(t){var e=this.createTask(t);this._stageTask(e)}return this._tasks},e.prototype._stageTask=function(t){this._tasks.push(t),this._tasks.length>3&&this._tasks.shift()},e}(U),et=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nt=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},rt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ot=function(t){function e(e,n){var r=t.call(this,e,n)||this;if(r._isCreatingRecording=!1,r._createRecordingAttempts=0,r._maxCreateRecordingAttempts=3,r._onceDisconnected=!1,r._messageId=-1,r._chunkSize=10,!i.r.webSockets())throw new Error("Failed to initialize the Streaming Recording: The WebSocket protocol is not supported on this platform.");return r}return et(e,t),e.prototype.trigger=function(){return nt(this,void 0,void 0,function(){var t;return rt(this,function(e){switch(e.label){case 0:return[4,this._createRecording()];case 1:return e.sent(),this._cloudServiceConfig?(t=this._createStreamingSocket()).isReady?(this._sendAll(),[3,4]):[3,2]:[3,4];case 2:return[4,t.open()];case 3:e.sent(),e.label=4;case 4:return[2]}})})},e.prototype.flush=function(t){return nt(this,void 0,void 0,function(){return rt(this,function(e){return t===i.c.NORMAL?this._socket&&(this._socket.isReady&&(this._sendAll(),this._sendEOF()),this._socket.close(),this._unsubscribe()):t===i.c.PAUSE?(this._sendAll(),this._sendPause()):t===i.c.RESUME&&this._sendResume(),[2,[]]})})},e.prototype._createRecording=function(){return nt(this,void 0,void 0,function(){var t;return rt(this,function(e){switch(e.label){case 0:if(this._isCreatingRecording||!(this._createRecordingAttempts<this._maxCreateRecordingAttempts)||this._cloudServiceConfig)return[3,6];this._isCreatingRecording=!0,this._createRecordingAttempts++,e.label=1;case 1:return e.trys.push([1,3,4,5]),t=this,[4,u(this._recording)];case 2:return t._cloudServiceConfig=e.sent(),[3,5];case 3:if(e.sent(),this._createRecordingAttempts===this._maxCreateRecordingAttempts)throw new Error("Failed to create the Streaming Recording: Service is unavailable.");return[3,5];case 4:return this._isCreatingRecording=!1,[7];case 5:if(!this._cloudServiceConfig&&this._createRecordingAttempts===this._maxCreateRecordingAttempts)throw new Error("Failed to create the Streaming Recording.");e.label=6;case 6:return[2]}})})},e.prototype._createStreamingSocket=function(){if(!this._socket){var t=this._recording,e=t.appKey,n=t.baseStreamURL,r=t.id;this._socket=new i.l(Object(i.G)(e,r,n)),this._subscribe()}return this._socket},e.prototype._subscribe=function(){this._socket&&(this._socket.on(i.m.CONNECTED,this._handleConnected,this),this._socket.on(i.m.DISCONNECTED,this._handleDisconnected,this))},e.prototype._unsubscribe=function(){this._socket&&(this._socket.off(i.m.CONNECTED,this._handleConnected,this),this._socket.off(i.m.DISCONNECTED,this._handleDisconnected,this))},e.prototype._handleConnected=function(){this._sendAll(this._onceDisconnected),this._onceDisconnected=!1},e.prototype._handleDisconnected=function(){this._onceDisconnected=!0},e.prototype._sendAll=function(t){void 0===t&&(t=!1);var e=this.createPayload(!0);e&&(this._writeVirtualPlayer(e.keyFrames),this._splitSend(e.keyFrames,i.k.KEYFRAMES),this._splitSend(e.data,i.k.DATA),this._splitSend(e.markers,i.k.MARKERS),this._splitSend(e.tags,i.k.TAGS)),t&&this._sendSnapshot()},e.prototype._writeVirtualPlayer=function(t){t.length>0&&(this._virtualRecording.writeKeyFrames(t),this._virtualPlayer.jumpTo(this._virtualRecording.duration))},e.prototype._splitSend=function(t,e){if(t){var n=t.length;if(n>0)for(var r=0;r<n;r+=this._chunkSize)this._send(t.slice(r,r+this._chunkSize),e)}},e.prototype._sendSnapshot=function(){var t=this._virtualPlayer.captureSnapshotWithKeyFrames();this._send([t],i.k.SNAPSHOT,this._virtualPlayer.duration)},e.prototype._sendPause=function(){this._socket&&this._socket.send(JSON.stringify({type:i.k.PAUSE}))},e.prototype._sendResume=function(){this._socket&&this._socket.send(JSON.stringify({type:i.k.RESUME}))},e.prototype._sendEOF=function(){this._socket&&this._socket.send(JSON.stringify({type:i.k.EOF}))},e.prototype._send=function(t,e,n){if(t&&this._socket){var r={type:e,data:t,id:this._generateMessageId()};null!=n&&(r.time=n),this._socket.send(JSON.stringify(r))}},e.prototype._generateMessageId=function(){return++this._messageId},e}(U),it=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),at=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},st=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ut=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r._workLoop=new Y(q(e.id)),r}return it(e,t),e.resumeTransfersFromStorage=function(){return at(this,void 0,void 0,function(){var t,n,r;return st(this,function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),[4,i.P.tasks.where("retry").above(6).delete()];case 1:return o.sent(),[4,i.P.tasks.filter(function(t){return null==t.retryTimestamp||Date.now()-t.retryTimestamp>=144e5})];case 2:return[4,(t=o.sent()).toArray()];case 3:return n=o.sent(),[4,t.delete()];case 4:return o.sent(),n&&n.length>0&&(r=new e(new Ht),n.forEach(function(t){return r.enqueue(t)})),[3,6];case 5:return o.sent(),[3,6];case 6:return[2]}})})},e.resumeTransfersFromTasks=function(t){return at(this,void 0,void 0,function(){var n;return st(this,function(r){return t&&t.length>0?((n=new e(new Ht)).suspendWorkloop(),t.forEach(function(t){return n.enqueue(t)}),n.resumeWorkloop(),[2,n.flush(i.c.NORMAL)]):[2,[]]})})},e.prototype.trigger=function(){this.shouldTransfer()&&this._transferRemaining()},e.prototype.flush=function(t){return at(this,void 0,void 0,function(){return st(this,function(e){return this._transferRemaining(),t!==i.c.ENQUEUE?[2,this._workLoop.flush(t)]:[2,[]]})})},e.prototype.enqueue=function(t){this._workLoop.enqueue(t)},e.prototype.suspendWorkloop=function(){this._workLoop.suspend()},e.prototype.resumeWorkloop=function(){this._workLoop.resume()},e.prototype._transferRemaining=function(){var t=this.createPayload();if(t){var e=this.createTask(t);this.enqueue(e)}},e}(U),ct=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},lt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ft=function(){function t(t,e){this._isOpen=!1,this._recording=t,e&&(this._transferrer=e)}return Object.defineProperty(t.prototype,"isOpen",{get:function(){return this._isOpen},enumerable:!0,configurable:!0}),t.prototype.getCreateTime=function(){return this._recording.createTime},t.prototype.close=function(){this.writeKeyFrame(Object(i.v)(0,i.n.NOOP,i.b.NOOP))},t.prototype.flush=function(t){return ct(this,void 0,void 0,function(){return lt(this,function(e){return this._transferrer?[2,this._transferrer.flush(t)]:[2,[]]})})},t.prototype.writeMarker=function(t){if(!this.isOpen)throw new Error("RecordingWriter is not open.");var e=this._calculateTime();t[0]=e,this._recording.markers||(this._recording.markers=[]),this._recording.duration=e,this._recording.markers.push(t),this._triggerTransfer()},t.prototype.writeKeyFrame=function(t){if(!this.isOpen)throw new Error("RecordingWriter is not open.");var e=this._calculateTime();t[0]=e,this._recording.duration=e,this._recording.keyFrames.push(t),this._triggerTransfer()},t.prototype.writeRecordingData=function(t){if(!this.isOpen)throw new Error("RecordingWriter is not open.");var e=this._calculateTime();t[0]=e,this._recording.data||(this._recording.data=[]),this._recording.data.push(t),this._triggerTransfer()},t.prototype.writeTag=function(t){if(!this.isOpen)throw new Error("RecordingWriter is not open.");if(this._recording.tags||(this._recording.tags=[]),"string"==typeof t){var e=t.trim();""!==e&&-1===this._recording.tags.indexOf(e)&&this._recording.tags.push(e)}},t.prototype._calculateTime=function(){var t=0;return 0===this._recording.createTime?this._recording.createTime=Date.now():t=Date.now()-this._recording.createTime,t},t.prototype._triggerTransfer=function(){this._transferrer&&this._transferrer.trigger()},t}(),ht=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pt=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},dt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},_t=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r._hasOpen=!1,r._hasClose=!1,r}return ht(e,t),e.prototype.close=function(){this._hasClose||(t.prototype.close.call(this),this.flush(i.c.ENQUEUE),this._hasClose=!0,this._isOpen=!1)},e.prototype.open=function(){return pt(this,void 0,void 0,function(){return dt(this,function(t){return this._hasOpen||(this._hasOpen=!0,this._isOpen=!0),[2]})})},e}(ft),yt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vt=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},gt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},mt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yt(e,t),e.prototype.close=function(){t.prototype.close.call(this),this._isOpen=!1},e.prototype.open=function(){return vt(this,void 0,void 0,function(){return gt(this,function(t){return this._isOpen=!0,[2]})})},e}(ft),bt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wt=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},Et=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},kt=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r._hasOpen=!1,r._hasClose=!1,r}return bt(e,t),e.prototype.close=function(){this._hasClose||(t.prototype.close.call(this),this.flush(i.c.NORMAL),this._hasClose=!0,this._isOpen=!1)},e.prototype.open=function(){return wt(this,void 0,void 0,function(){return Et(this,function(t){return this._hasOpen||(this._hasOpen=!0,this._isOpen=!0),[2]})})},e}(ft),Ot=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tt=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},xt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},St=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r._hasOpen=!1,r._hasClose=!1,r}return Ot(e,t),e.prototype.close=function(){this._hasClose||(t.prototype.close.call(this),this.flush(i.c.ENQUEUE),this._hasClose=!0,this._isOpen=!1)},e.prototype.UNSAFE_close=function(){return Tt(this,void 0,void 0,function(){var e;return xt(this,function(n){switch(n.label){case 0:return e=[],this._hasClose?[3,2]:(t.prototype.close.call(this),[4,this.flush(i.c.TAKE_TASKS)]);case 1:e=n.sent(),this._hasClose=!0,this._isOpen=!1,n.label=2;case 2:return[2,e]}})})},e.prototype.open=function(){return Tt(this,void 0,void 0,function(){return xt(this,function(t){return this._hasOpen||(this._hasOpen=!0,this._isOpen=!0),[2]})})},e}(ft),Rt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),At=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},Nt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},It=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=i.i.BLACKBOX,e}return Rt(e,t),e.prototype.openWrite=function(){return At(this,void 0,void 0,function(){var t,e;return Nt(this,function(n){switch(n.label){case 0:return t=new tt(this),[4,(e=new _t(this,t)).open()];case 1:return n.sent(),[2,e]}})})},e}(E),Ct=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pt=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},Dt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Lt=(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=i.i.IN_MEMORY,e}Ct(e,t),e.prototype.openWrite=function(){return Pt(this,void 0,void 0,function(){var t;return Dt(this,function(e){switch(e.label){case 0:return[4,(t=new mt(this)).open()];case 1:return e.sent(),[2,t]}})})}}(E),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),Ft=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},Mt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},jt=function(t){function e(e,n,r){var o=t.call(this,e,n)||this;return o.type=i.i.STREAMING,o.baseStreamURL=r,o}return Lt(e,t),e.prototype.openWrite=function(){return Ft(this,void 0,void 0,function(){var t,e;return Mt(this,function(n){switch(n.label){case 0:return t=new ot(this),[4,(e=new kt(this,t)).open()];case 1:return n.sent(),[2,e]}})})},e}(E),Ut=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qt=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},Bt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=i.i.DEFAULT,e}return Ut(e,t),e.fromJSON=function(t){var n=new e;return n.appKey=t.appKey,n.createTime=t.createTime,n.duration=t.duration,n.meta=t.meta,n.type=t.type,n.version=t.version,null!=t.tags&&(n.tags=t.tags),null!=t.markers&&(n.markers=t.markers),null!=t.data&&(n.data=t.data),n.id=t.id,null!=t.baseServiceURL&&(n.baseServiceURL=t.baseServiceURL),n},e.prototype.openWrite=function(){return qt(this,void 0,void 0,function(){var t,e;return Bt(this,function(n){switch(n.label){case 0:return t=new ut(this),[4,(e=new St(this,t)).open()];case 1:return n.sent(),[2,e]}})})},e}(E),Wt=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},zt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Kt=function(){function t(){}return t.loadFromURL=function(t){return Wt(this,void 0,void 0,function(){var e,n;return zt(this,function(r){switch(r.label){case 0:return(e=Object(i.M)(t))?[4,Object(i.N)(e.appKey,e.recordingId)]:[3,2];case 1:return(n=r.sent()).data=[],n.markers=[],n.tags=[],[2,Ht.fromJSON(n)];case 2:throw new Error('Unrecognized XRTP URL "'+t+'".')}})})},t}(),Vt=n(54),Gt=n(5),Xt=n(6);!function(t){t.LOAD="load",t.START="start",t.PAUSE="pause",t.RESUME="resume",t.STOP="stop",t.ABORT="abort"}(B||(B={}));var Jt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yt=function(){return(Yt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Qt=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},$t=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Zt=function(t){function e(e){var n=t.call(this)||this;return n._isRecording=!1,n._isPaused=!1,n._htmlTracker=null,n._handleVisibilityChange=function(){n.didChangeVisibility(n._config.contentDocument.hidden)},n._handleBeforeUnload=function(){n.emit(B.ABORT),n.willUnload()},n._handleTrackerEvent=function(t){n._recordingWriter.writeKeyFrame(Object(i.v)(0,t.target.type,t.eventType,t.data));var e=n._recording.keyFrames.length-1;t.target.type===i.n.Console?n.addIndexMarker({id:t.data.id,text:i.b[t.eventType],trackType:t.target.type,eventType:t.eventType,keyFrameIndex:e}):t.target.type===i.n.Error?n.addIndexMarker({id:t.data.id,text:t.data.message,trackType:t.target.type,eventType:t.eventType,keyFrameIndex:e}):t.target.type===i.n.Network?n.addIndexMarker({id:t.data.id,text:i.b[t.eventType],trackType:t.target.type,eventType:t.eventType,keyFrameIndex:e}):t.target.type===i.n.XTracker&&n.addIndexMarker({id:t.data.id,text:t.data.eventName,trackType:t.target.type,eventType:t.eventType,keyFrameIndex:e,data:{projectId:t.data.tid,projectName:t.data.projectName}}),n.didHandleTrackerEvent(t)},n._initConfig(e),n._initTrackers(),n}return Jt(e,t),Object.defineProperty(e.prototype,"recording",{get:function(){return this._recording},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRecording",{get:function(){return this._isRecording},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPaused",{get:function(){return this._isPaused},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"capturer",{get:function(){return this._htmlTracker?this._htmlTracker.capturer:null},enumerable:!0,configurable:!0}),e.prototype.loadRecording=function(t){return Qt(this,void 0,void 0,function(){var e;return $t(this,function(n){switch(n.label){case 0:if(this.isRecording)throw new Error("Cannot load recording when the recorder is recording.");return this._recording=t,e=this,[4,t.openWrite()];case 1:return e._recordingWriter=n.sent(),this.emit(B.LOAD),[2]}})})},e.prototype.addMarker=function(t,e){if(void 0===e&&(e=i.d.DEFAULT),!this.isRecording)throw new Error("Cannot add marker when the recorder is not recording.");this._recordingWriter.writeMarker(Object(i.w)(0,e,t))},e.prototype.addRecordingData=function(t,e,n){void 0===n&&(n=i.g.DEFAULT);var r=Object(i.x)(0,n,{key:t,value:e});if(this.isRecording)this._recordingWriter.writeRecordingData(r);else{if(!this.recording)throw new Error("The recording must be loaded before adding recording data.");l(r,this.recording)}},e.prototype.addTag=function(t){if(!this.isRecording)throw new Error("Cannot add tag when recorder is not recording.");this._recordingWriter.writeTag(t)},e.prototype.start=function(){if(!this.isRecording){if(!this.recording)throw new Error("The recording must be loaded before starting.");this._subscribe(),this._isRecording=!0,this.startTrackers(),this.emit(B.START)}},e.prototype.pause=function(){this.isRecording&&!this.isPaused&&(this.pauseTrackers(),this.addPauseMarker(),this._isPaused=!0,this.emit(B.PAUSE),this.didPause())},e.prototype.resume=function(){this.isRecording&&this.isPaused&&(this.addResumeMarker(),this.resumeTrackers(),this._isPaused=!1,this.emit(B.RESUME),this.didResume())},e.prototype.stop=function(){this.isRecording&&(this.stopTrackers(),this._recordingWriter.close(),this._isRecording=!1,this._unsubscribe(),this.emit(B.STOP))},e.prototype.didPause=function(){},e.prototype.didResume=function(){},e.prototype.didHandleTrackerEvent=function(t){},e.prototype.willUnload=function(){},e.prototype.didChangeVisibility=function(t){},e.prototype.addPauseMarker=function(){this.addMarker({text:"暂停录制"},i.d.PAUSE_RECORDING)},e.prototype.addResumeMarker=function(){this.addMarker({text:"恢复录制"},i.d.RESUME_RECORDING)},e.prototype.addIndexMarker=function(t){if(null==t.id)throw new Error("Cannot add index marker without id.");if(null==t.trackType)throw new Error("Cannot add index marker without trackType.");if(null==t.eventType)throw new Error("Cannot add index marker without eventType.");this.addMarker(t,i.d.INDEX)},e.prototype.startTrackers=function(){var t=this;this._trackers.forEach(function(e){return e.subscribe(t._handleTrackerEvent)}),this._trackers.forEach(function(t){return t.start()})},e.prototype.pauseTrackers=function(){this._trackers.forEach(function(t){return t.pause()})},e.prototype.resumeTrackers=function(){this._trackers.forEach(function(t){return t.resume()})},e.prototype.stopTrackers=function(){var t=this;this._trackers.forEach(function(e){return e.unsubscribe(t._handleTrackerEvent)}),this._trackers.forEach(function(t){return t.stop()})},e.prototype._initConfig=function(t){if(this._config=Yt({},e.DEFAULT_CONFIG,t),"string"==typeof this._config.durationLimit&&(this._config.durationLimit=M()(this._config.durationLimit)),this._config.trackers){var n=this._config.trackers.indexOf(i.n[i.n.HTML]);n>0&&this._config.trackers.unshift(this._config.trackers.splice(n,1)[0])}},e.prototype._initTrackers=function(){var t=this,e=new Gt.TrackerLoader(this._config.contentDocument,this);this._trackers=e.createTrackers(this._config.trackers);var n=this._config.trackerConfigs;n?this._trackers.forEach(function(e){e.init(n[i.n[e.type]]),e instanceof Xt.HTMLTracker&&(t._htmlTracker=e)}):this._trackers.forEach(function(e){e.init(),e instanceof Xt.HTMLTracker&&(t._htmlTracker=e)})},e.prototype._subscribe=function(){var t=this._config.contentDocument,e=t.defaultView;t.addEventListener("visibilitychange",this._handleVisibilityChange,!0),e&&e.addEventListener("beforeunload",this._handleBeforeUnload,!0)},e.prototype._unsubscribe=function(){var t=this._config.contentDocument,e=t.defaultView;t.removeEventListener("visibilitychange",this._handleVisibilityChange,!0),e&&e.removeEventListener("beforeunload",this._handleBeforeUnload,!0)},e.DEFAULT_CONFIG={durationLimit:-1,contentDocument:document},e}(Vt),te=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ee=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},ne=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},re=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return te(e,t),e.prototype.loadRecording=function(e){return ee(this,void 0,void 0,function(){return ne(this,function(n){return[2,t.prototype.loadRecording.call(this,e)]})})},e.prototype.dump=function(){return ee(this,void 0,void 0,function(){return ne(this,function(t){switch(t.label){case 0:return[4,this._recordingWriter.flush(i.c.CLIP_BLACKBOX)];case 1:return t.sent(),[2,this._recording.id]}})})},e}(Zt),oe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ie=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},ae=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},se=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isTransferAbort=!1,e}return oe(e,t),e.prototype.loadRecording=function(e){return t.prototype.loadRecording.call(this,e)},e.prototype.UNSAFE_stop=function(){return ie(this,void 0,void 0,function(){var t;return ae(this,function(e){switch(e.label){case 0:return t=[],this.isRecording?(this.stopTrackers(),this._recordingWriter instanceof St?[4,this._recordingWriter.UNSAFE_close()]:[3,2]):[3,4];case 1:return t=e.sent(),[3,3];case 2:this._recordingWriter.close(),e.label=3;case 3:this._isRecording=!1,this.emit(B.STOP),e.label=4;case 4:return[2,t]}})})},e.prototype.abortTransfers=function(){return ie(this,void 0,void 0,function(){return ae(this,function(t){return this._isTransferAbort=!0,[2,this._recordingWriter.flush(i.c.TAKE_TASKS)]})})},e.prototype.didPause=function(){return ie(this,void 0,void 0,function(){return ae(this,function(t){switch(t.label){case 0:return[4,this._recordingWriter.flush(i.c.NORMAL).catch()];case 1:return t.sent(),this._shouldStopRecording(),[2]}})})},e.prototype.didResume=function(){this._shouldStopRecording()},e.prototype.didHandleTrackerEvent=function(){this._shouldStopRecording()},e.prototype.willUnload=function(){this._isTransferAbort||this._recordingWriter.flush(i.c.BACKUP_TASKS)},e.prototype._shouldStopRecording=function(){if(this.isRecording){var t=this._config.durationLimit;if(null!=t&&-1!==t&&this.recording.duration>=t)return this.stop(),!0}return!1},e}(Zt),ue=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ce=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ue(e,t),e.prototype.stop=function(){t.prototype.stop.call(this),i.P.clearBreakpoints()},e}(se),le=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fe=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},he=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},pe=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._debounceWait=300,e}return le(e,t),e.prototype.loadRecording=function(e){return fe(this,void 0,void 0,function(){return he(this,function(n){return[2,t.prototype.loadRecording.call(this,e)]})})},e.prototype.didPause=function(){this._recordingWriter.flush(i.c.PAUSE).catch()},e.prototype.didResume=function(){this._recordingWriter.flush(i.c.RESUME).catch()},e.prototype.didChangeVisibility=function(t){var e=this;null==this._latestHidden&&(this._latestHidden=!t),this._clearDebounceTimer(),this._debounceTimer=setTimeout(function(){e._clearDebounceTimer(),t!==e._latestHidden&&(e._latestHidden=void 0)},this._debounceWait)},e.prototype._clearDebounceTimer=function(){this._debounceTimer&&(clearTimeout(this._debounceTimer),this._debounceTimer=void 0)},e}(Zt);n.d(e,"k",function(){return de}),n.d(e,"l",function(){return _e}),n.d(e,"j",function(){return Kt}),n.d(e,"a",function(){return re}),n.d(e,"c",function(){return ce}),n.d(e,"e",function(){return pe}),n.d(e,"g",function(){return se}),n.d(e,"b",function(){return It}),n.d(e,"f",function(){return jt}),n.d(e,"i",function(){return Ht}),n.d(e,"h",function(){return ut}),n.d(e,"d",function(){return B});var de=o,_e=r},function(t,e,n){"use strict";n.r(e),n.d(e,"Tracker",function(){return r});var r=function(){function t(t){this._listeners=new Set,this._enableProcess=!1,this._context=t}return Object.defineProperty(t.prototype,"enableProcess",{get:function(){return this._enableProcess},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentDocument",{get:function(){return this.context.contentDocument},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentWindow",{get:function(){return this.context.contentWindow},enumerable:!0,configurable:!0}),t.prototype.init=function(t){this._config=t},t.prototype.start=function(){this._enableProcess=!0},t.prototype.stop=function(){this._enableProcess=!1},t.prototype.pause=function(){this._enableProcess=!1},t.prototype.resume=function(){this._enableProcess=!0},t.prototype.subscribe=function(t){this._listeners.add(t)},t.prototype.unsubscribe=function(t){this._listeners.delete(t),0===this._listeners.size&&(this._enableProcess=!1)},t.prototype.publish=function(t,e){var n={target:this,eventType:t,data:e};this._listeners.forEach(function(t){t(n)})},t}()},function(t,e,n){"use strict";var r=n(28),o=n(58),i=Object.prototype.toString;function a(t){return"[object Array]"===i.call(t)}function s(t){return null!==t&&"object"==typeof t}function u(t){return"[object Function]"===i.call(t)}function c(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),a(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}t.exports={isArray:a,isArrayBuffer:function(t){return"[object ArrayBuffer]"===i.call(t)},isBuffer:o,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:s,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===i.call(t)},isFile:function(t){return"[object File]"===i.call(t)},isBlob:function(t){return"[object Blob]"===i.call(t)},isFunction:u,isStream:function(t){return s(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function t(){var e={};function n(n,r){"object"==typeof e[r]&&"object"==typeof n?e[r]=t(e[r],n):e[r]=n}for(var r=0,o=arguments.length;r<o;r++)c(arguments[r],n);return e},deepMerge:function t(){var e={};function n(n,r){"object"==typeof e[r]&&"object"==typeof n?e[r]=t(e[r],n):e[r]="object"==typeof n?t({},n):n}for(var r=0,o=arguments.length;r<o;r++)c(arguments[r],n);return e},extend:function(t,e,n){return c(e,function(e,o){t[o]=n&&"function"==typeof e?r(e,n):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e,n){"use strict";n.r(e);var r=n(3);n.d(e,"Tracker",function(){return r.Tracker});var o=n(10);n.d(e,"TrackerContext",function(){return o.TrackerContext});var i=n(20);n.d(e,"TrackerLoader",function(){return i.TrackerLoader})},function(t,e,n){"use strict";n.r(e);var r=n(21);n.d(e,"HTMLTracker",function(){return r.HTMLTracker})},function(t,e,n){"use strict";n.r(e);var r=n(42);for(var o in r)"default"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);var i=n(43);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);var a=n(44);n.d(e,"RecordingEvent",function(){return a.a})},function(module,__webpack_exports__,__webpack_require__){"use strict";function decycle(t,e){var n=new WeakMap;return function t(r,o){var i,a;return void 0!==e&&(r=e(r)),"object"!=typeof r||null===r||r instanceof Boolean||r instanceof Date||r instanceof Number||r instanceof RegExp||r instanceof String?r:void 0!==(i=n.get(r))?{$ref:i}:(n.set(r,o),Array.isArray(r)?(a=[],r.forEach(function(e,n){a[n]=t(e,o+"["+n+"]")})):(a={},Object.getOwnPropertyNames(r).forEach(function(e){a[e]=t(r[e],o+"["+JSON.stringify(e)+"]")})),a)}(t,"$")}function retrocycle($){var px=/^\$(?:\[(?:\d+|"(?:[^\\"\u0000-\u001f]|\\(?:[\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*")\])*$/;return function rez(value){value&&"object"==typeof value&&(Array.isArray(value)?value.forEach(function(element,i){if("object"==typeof element&&null!==element){var path=element.$ref;"string"==typeof path&&px.test(path)?value[i]=eval(path):rez(element)}}):Object.keys(value).forEach(function(name){var item=value[name];if("object"==typeof item&&null!==item){var path=item.$ref;"string"==typeof path&&px.test(path)?value[name]=eval(path):rez(item)}}))}($),$}__webpack_require__.d(__webpack_exports__,"a",function(){return decycle})},function(t,e,n){"use strict";var r={APP_KEY_CAN_NOT_BE_NULL:"XReplay: 应用接入密钥不允许为空。",XREPLAY_ALREADY_INITIALIZED:"XReplay: 重复初始化。",XREPLAY_HTML_TRACKER_NOT_FOUND:"XReplay: 自定义 Trackers 时必须启用 HTML Tracker。",XREPLAY_NOT_READY:"XReplay: 尚未就绪，请检查 XReplay 是否已正确初始化。",XREPLAY_NOT_SUPPORTED:"XReplay: 该方法暂未支持。"};n.d(e,"a",function(){return r})},function(t,e,n){"use strict";n.r(e),n.d(e,"TrackerContext",function(){return r});var r=function(){function t(t){this._context=new Map,this._idPrefix=String(Date.now()),this._markerId=-1,this._contentDocument=t,this._contentWindow=t.defaultView}return Object.defineProperty(t.prototype,"contentWindow",{get:function(){return this._contentWindow},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentDocument",{get:function(){return this._contentDocument},enumerable:!0,configurable:!0}),t.prototype.getNextMarkerId=function(){return++this._markerId,""+this._idPrefix+this._markerId},t.prototype.setRecorder=function(t){this._set("recorder",t)},t.prototype.getRecorder=function(){return this._get("recorder")},t.prototype.setNodeIdResolver=function(t){this._set("nodeIdResolver",t)},t.prototype.getNodeIdResolver=function(){return this._get("nodeIdResolver")},t.prototype.clear=function(){this._context.clear()},t.prototype._get=function(t){return this._context.get(t)},t.prototype._set=function(t,e){return this._context.set(t,e)},t}()},function(t,e,n){"use strict";n.r(e),n.d(e,"DEFAULT_PERFORMER_TYPES",function(){return a}),n.d(e,"createPerformers",function(){return s}),n.d(e,"createPerformer",function(){return u});var r=n(0),o=n(18);n.d(e,"HTMLPerformer",function(){return o.HTMLPerformer});var i=n(19);n.d(e,"MousePerformer",function(){return i.MousePerformer});var a=[r.n[r.n.HTML],r.n[r.n.Mouse]];function s(t){return(t||a).map(u)}function u(t){var e,r=function(t){var e,r=t+"Performer";try{var o=n(83)("./"+r);(e=o[r])||(e=o)}catch(t){throw new Error('"'+r+'" is not found.')}return e}(t);try{e=new r}catch(e){throw new Error('"'+t+'Performer" is not a constructor.')}if(Object.prototype.hasOwnProperty.call(e,"type"))throw new Error('"'+t+'Performer" must have a property named "type".');return e}},function(t,e,n){"use strict";var r,o=n(1),i=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},a=function(){function t(){}return t.prototype.capture=function(t){var e,n,r=new Array;this._captureReset(r),this._captureResize(t,r);try{for(var o=i(t.all),a=o.next();!a.done;a=o.next()){var s=a.value;this.captureNode(s,r)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return{version:"1.0.0",meta:{window:{location:"",size:t.size},document:{title:""}},actions:r}},t.prototype.captureNode=function(t,e){this._captureAddNode(t,e),this._captureAttrs(t,e),this._captureValue(t,e),this._captureFocus(t,e),this._captureScroll(t,e)},t.prototype._captureReset=function(t){var e={type:o.a.RESET,id:0};t.push(e)},t.prototype._captureResize=function(t,e){var n={type:o.a.RESIZE_WINDOW,id:0,size:t.size};e.push(n)},t.prototype._captureAddNode=function(t,e){var n={type:o.a.ADD_NODE,id:t.id};t.parentId&&(n.parentId=t.parentId),t.tag&&(n.tag=t.tag),t.ns&&(n.ns=t.ns),t.text&&(n.text=t.text),e.push(n)},t.prototype._captureAttrs=function(t,e){if(t.attrs){var n={type:o.a.CHANGE_ATTRIBUTES,id:t.id,attrs:t.attrs};e.push(n)}},t.prototype._captureValue=function(t,e){if(t.checked||"value"in t){var n={type:o.a.CHANGE_VALUE,id:t.id};"value"in t&&(n.value=t.value),t.checked&&(n.checked=t.checked),e.push(n)}},t.prototype._captureFocus=function(t,e){if(t.hasFocus){var n={id:t.id,type:o.a.FOCUS};e.push(n)}},t.prototype._captureScroll=function(t,e){if(t.scroll&&(t.scroll[0]>0||t.scroll[1]>0)){var n={id:t.id,type:o.a.SCROLL,scroll:t.scroll};e.push(n)}},t}(),s=n(13),u=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t){function e(e){var n=t.call(this)||this;return n._dmp=new o.c,e&&(n._contentDocument=e),n}return u(e,t),e.prototype.getNode=function(t){return this.contentDocument.getNodeById(t)},e.prototype.hasNode=function(t){return this.contentDocument.hasNode(t)},e.prototype.reset=function(){t.prototype.reset.call(this),this.contentDocument?this.contentDocument.clear():this._contentDocument=new s.a},e.prototype.performAddNode=function(t){var e;if(e=this.hasNode(t.id)?this.getNode(t.id):this.contentDocument.createNode(t.id,t.tag,t.ns,t.text),t.parentId){var n=this.getNode(t.parentId);if(n){var r=void 0;t.nextSiblingId&&(r=this.getNode(t.nextSiblingId)),r?this.contentDocument.insertBefore(e,n,r):this.contentDocument.appendChild(e,n)}}else this.contentDocument.appendChild(e)},e.prototype.performRemoveNode=function(t){var e=this.getNode(t.id);e&&this.contentDocument.removeNode(e)},e.prototype.performChangeAttributes=function(t){var e=this.getNode(t.id);e&&(e.attrs||(e.attrs={}),Object.assign(e.attrs,t.attrs))},e.prototype.performChangeText=function(t){var e=this.getNode(t.id);if(e)if(t.isPatch){if(null!=e.text&&null!=t.text){var n=this._dmp.patchText(e.text,t.text);null!=n&&(e.text=n)}}else e.text=t.text},e.prototype.performChangeValue=function(t){var e=this.getNode(t.id);if(e){if(t.isPatch&&null!=t.value){if(null!=e.value){var n=this._dmp.patchText(e.value,t.value);null!=n&&(e.value=n)}}else void 0!==t.value&&(e.value=t.value);"boolean"==typeof t.checked&&(e.checked=t.checked)}},e.prototype.performScroll=function(t){var e=this.getNode(t.id);e&&(e.scroll=t.scroll)},e.prototype.performFocus=function(t){var e=this.getNode(t.id);e&&(e.hasFocus=!0)},e.prototype.performBlur=function(t){var e=this.getNode(t.id);e&&delete e.hasFocus},e.prototype.performResizeWindow=function(t){this.contentDocument.resizeTo(t.size)},e.prototype.performShowWindow=function(){},e.prototype.performHideWindow=function(){},e}(o.b);n.d(e,"a",function(){return a}),n.d(e,"b",function(){return c})},function(t,e,n){"use strict";var r=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},o=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},i=function(){function t(){this._size=[0,0],this._nodeMap=new Map}return Object.defineProperty(t.prototype,"documentElement",{get:function(){return this._documentElement},set:function(t){this._documentElement=t,this._documentElement&&this._saveNode(this._documentElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodeMap",{get:function(){return this._nodeMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"all",{get:function(){return this.documentElement?function t(e){var n,i,a,s,u,c,l,f;var h,p,d,_;return r(this,function(r){switch(r.label){case 0:return[4,e];case 1:if(r.sent(),!(e.children&&e.children.length>0))return[3,15];r.label=2;case 2:r.trys.push([2,13,14,15]),n=o(e.children),i=n.next(),r.label=3;case 3:if(i.done)return[3,12];a=i.value,s=t(a),r.label=4;case 4:r.trys.push([4,9,10,11]),d=void 0,u=o(s),c=u.next(),r.label=5;case 5:return c.done?[3,8]:[4,c.value];case 6:r.sent(),r.label=7;case 7:return c=u.next(),[3,5];case 8:return[3,11];case 9:return l=r.sent(),d={error:l},[3,11];case 10:try{c&&!c.done&&(_=u.return)&&_.call(u)}finally{if(d)throw d.error}return[7];case 11:return i=n.next(),[3,3];case 12:return[3,15];case 13:return f=r.sent(),h={error:f},[3,15];case 14:try{i&&!i.done&&(p=n.return)&&p.call(n)}finally{if(h)throw h.error}return[7];case 15:return[2]}})}(this.documentElement):[]},enumerable:!0,configurable:!0}),t.prototype.hasNode=function(t){return this.nodeMap.has(t)},t.prototype.getNodeById=function(t){if(this._nodeMap.has(t))return this.nodeMap.get(t)},t.prototype.createNode=function(t,e,n,r){var o={id:t};return n&&(o.ns=n),e&&(o.tag=e),r&&(o.text=r),o},t.prototype.appendChild=function(t,e){this._saveNode(t),e?(e.children||(e.children=[]),t.parentId=e.id,-1===e.children.indexOf(t)&&e.children.push(t)):"HTML"===t.tag&&(this._documentElement=t)},t.prototype.insertBefore=function(t,e,n){e.children||(e.children=[]),t.parentId=e.id,this._saveNode(t);var r=e.children.indexOf(n);-1!==r&&(-1===e.children.indexOf(t)&&e.children.splice(r,0,t))},t.prototype.removeNode=function(t){if(t.parentId){var e=this.getNodeById(t.parentId);if(t.parentId=null,e&&e.children){var n=e.children.indexOf(t);n>=0&&e.children.splice(n,1)}}},t.prototype.resizeTo=function(t){this._size=t},t.prototype.clear=function(){this._documentElement=null,this._size=[0,0],this.nodeMap.clear()},t.prototype.forEach=function(t){this.documentElement&&function t(e,n){n(e);e.children&&e.children.length>0&&e.children.forEach(function(e){t(e,n)})}(this.documentElement,t)},t.prototype._saveNode=function(t){this.nodeMap.set(t.id,t)},t}();n.d(e,"a",function(){return i})},function(t,e,n){"use strict";n.r(e),n.d(e,"clear",function(){return o}),n.d(e,"has",function(){return i}),n.d(e,"get",function(){return a}),n.d(e,"set",function(){return s}),n.d(e,"remove",function(){return u});var r=new Map;function o(){r.clear()}function i(t){return r.has(t)}function a(t){return r.get(t)}function s(t,e){return r.set(t,e)}function u(t){return r.delete(t)}},function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i});var r=n(0);function o(){return r.y.get()}var i=r.y.version},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r,o=n(0),i=n(2),a=n(25),s=n(7),u=n(26),c=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},f=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},h=function(t){function e(e,n){var r=t.call(this)||this;return r._recorder=e,r._recording=n,r._recordingURL=Object(o.F)(n.appKey,n.id),r._recorder.on(i.d.ABORT,r._handleRecorderAbort,r),r}return c(e,t),Object.defineProperty(e.prototype,"playerURL",{get:function(){return Object(u.a)("playerURL"),""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recordingURL",{get:function(){return this._recordingURL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._recording.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recordingId",{get:function(){return this._recording.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPaused",{get:function(){return this._recorder.isPaused},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRecording",{get:function(){return this._recorder.isRecording},enumerable:!0,configurable:!0}),e.prototype.UNSAFE_abortTransfers=function(){if(this._recorder instanceof i.g)return this._recorder.abortTransfers();throw new Error("UNSAFE_abortTransfers is not supported.")},e.prototype.dumpBlackboxRecording=function(){return l(this,void 0,Promise,function(){return f(this,function(t){return this._recorder instanceof i.a?[2,this._recorder.dump()]:[2]})})},e.prototype.pauseRecording=function(){this._recorder.pause()},e.prototype.resumeRecording=function(){this._recorder.resume()},e.prototype.stopRecording=function(){this._recorder.stop()},e.prototype.UNSAFE_stopRecording=function(){return l(this,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return this._recorder instanceof i.g?[4,this._recorder.UNSAFE_stop()]:[3,2];case 1:return[2,t.sent()];case 2:throw new Error("UNSAFE_stopRecording is not supported.")}})})},e.prototype.addMarker=function(t,e){this._recorder.addMarker({text:t,data:e})},e.prototype.addRecordingData=function(t,e){this._recorder.addRecordingData(t,e,o.g.BIZ)},e.prototype.addSubtitleData=function(t){this._recorder.addRecordingData(o.O.SUBTITLE_KEY,t)},e.prototype.addAudioData=function(t){this._recorder.addRecordingData(o.O.AUDIO_KEY,t)},e.prototype.addTag=function(t){this._recorder.addTag(t)},e.prototype._handleRecorderAbort=function(){this.emit(s.RecordingEvent.ABORT)},e}(a)},function(t,e,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)o(n,r)&&(t[r]=n[r])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,n,r,o){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),o);else for(var i=0;i<r;i++)t[o+i]=e[n+i]},flattenChunks:function(t){var e,n,r,o,i,a;for(r=0,e=0,n=t.length;e<n;e++)r+=t[e].length;for(a=new Uint8Array(r),o=0,e=0,n=t.length;e<n;e++)i=t[e],a.set(i,o),o+=i.length;return a}},a={arraySet:function(t,e,n,r,o){for(var i=0;i<r;i++)t[o+i]=e[n+i]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,i)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(r)},function(t,e,n){"use strict";n.r(e),n.d(e,"HTMLPerformer",function(){return s});var r,o=n(0),i=n(12),a=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return o.n.HTML},enumerable:!0,configurable:!0}),e.prototype.init=function(e){t.prototype.init.call(this,e),this._renderer=new i.b(e.contentDocument)},e.prototype.perform=function(t){var e=Object(o.C)(t);return this._renderer.renderActions(e),Promise.resolve()},e}(o.e)},function(t,e,n){"use strict";n.r(e),n.d(e,"MousePerformer",function(){return a});var r,o=n(0),i=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return o.n.Mouse},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mousePosition",{get:function(){return this._mousePosition},enumerable:!0,configurable:!0}),e.prototype.init=function(e){t.prototype.init.call(this,e)},e.prototype.perform=function(t){var e=Object(o.C)(t);return e&&void 0!==e[0]&&void 0!==e[1]&&(this._mousePosition=[e[0],e[1]]),Promise.resolve()},e}(o.e)},function(t,e,n){"use strict";n.r(e),n.d(e,"TrackerLoader",function(){return i});var r=n(0),o=n(10),i=function(){function t(t,e){this._context=new o.TrackerContext(t),e&&this._context.setRecorder(e)}return t.prototype.createTrackers=function(e){var n=this;return(e||t.DEFAULT_TRACK_TYPES).map(function(t){return n.createTracker(t)})},t.prototype.createTracker=function(t){var e,n=t+"Tracker",r=this._loadTracker(n);try{e=new r(this._context)}catch(e){throw new Error('"'+t+'Tracker" is not a constructor.')}if(null==e.type)throw new Error('"'+t+'Tracker" must have a property named "type".');return e},t.prototype._loadTracker=function(t){var e;try{var r=n(84)("./"+t);(e=r[t])||(e=r)}catch(e){throw new Error('"'+t+'" is not found.')}return e},t.DEFAULT_TRACK_TYPES=[r.n[r.n.HTML],r.n[r.n.Mouse]],t}()},function(t,e,n){"use strict";n.r(e),n.d(e,"HTMLTracker",function(){return l});var r,o=n(0),i=n(1),a=n(14),s=n(3),u=n(22),c=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._enableHTMLOptimization=!0,e._mutationObserverOptions={attributes:!0,childList:!0,characterData:!0,subtree:!0},e._handleMutation=function(t){if(e.enableProcess){var n=e._capturer.captureMutations(t);n.length&&(e._enableHTMLOptimization&&e._workLoop.enqueue(n),e.publish(o.b.HTML_ACTION,n))}},e._handleWindowResize=function(){e.enableProcess&&(e._resizeTimer&&(window.clearTimeout(e._resizeTimer),e._resizeTimer=0),e._resizeTimer=window.setTimeout(function(){var t={id:0,type:i.a.RESIZE_WINDOW,size:[e.contentWindow.innerWidth,e.contentWindow.innerHeight]};e.publish(o.b.HTML_ACTION,[t]),e._resizeTimer=0},300))},e._handleVisibilityChange=function(){if(e.enableProcess){var t={id:0,type:e.contentDocument.hidden?i.a.HIDE_WINDOW:i.a.SHOW_WINDOW};e.publish(o.b.HTML_ACTION,[t])}},e._handleScroll=function(t){if(e.enableProcess){var n=t.target;e._scrollElement===n&&e._scrollTimer&&(window.clearTimeout(e._scrollTimer),e._scrollTimer=0),e._scrollElement=n,e._scrollTimer=window.setTimeout(function(){var t=e._capturer.captureScroll(n);t.length&&e.publish(o.b.HTML_ACTION,t),e._scrollTimer=0},50)}},e._handleInput=function(t){if(e.enableProcess){var n=t.target;n.isContentEditable||(e._inputElement===n&&e._inputTimer&&(window.clearTimeout(e._inputTimer),e._inputTimer=0),e._inputElement=n,e._inputTimer=window.setTimeout(function(){var t=e._capturer.captureInput(n);t.length&&(e._enableHTMLOptimization&&e._workLoop.enqueue(t),e.publish(o.b.HTML_ACTION,t)),e._inputTimer=0},100))}},e._handleFocus=function(t){if(e.enableProcess&&t.target){var n=t.target;if("INPUT"===n.tagName||"TEXTAREA"===n.tagName){var r=e._capturer.captureCustomAction(n,"focus"===t.type?i.a.FOCUS:i.a.BLUR);r&&e.publish(o.b.HTML_ACTION,[r])}}},e}return c(e,t),Object.defineProperty(e.prototype,"capturer",{get:function(){return this._capturer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return o.n.HTML},enumerable:!0,configurable:!0}),e.prototype.init=function(){t.prototype.init.call(this),this._capturer=new i.d(this.contentDocument),this.context.setNodeIdResolver(this._capturer),this._workLoop=new u.ActionWorkLoop,this._mutationObserver=new MutationObserver(this._handleMutation)},e.prototype.start=function(){t.prototype.start.call(this),this._initConfig(),this._publishSnapshot(),this._mutationObserver.observe(this.contentDocument.documentElement,this._mutationObserverOptions),this.contentWindow.addEventListener("resize",this._handleWindowResize,!0),this.contentDocument.addEventListener("visibilitychange",this._handleVisibilityChange,!0),this.contentDocument.addEventListener("scroll",this._handleScroll,!0),this.contentDocument.addEventListener("input",this._handleInput,!0),this.contentDocument.addEventListener("focus",this._handleFocus,!0),this.contentDocument.addEventListener("blur",this._handleFocus,!0)},e.prototype.resume=function(){this._publishSnapshot(),t.prototype.resume.call(this)},e.prototype.stop=function(){t.prototype.stop.call(this);var e=this.context.getRecorder();e&&this._capturer.getStyledComponents().forEach(function(t){e.addRecordingData("styledComponent-"+t.id,t.rules,o.g.DEFAULT)});this._mutationObserver.disconnect(),this.contentWindow.removeEventListener("resize",this._handleWindowResize,!0),this.contentDocument.removeEventListener("visibilitychange",this._handleVisibilityChange,!0),this.contentDocument.removeEventListener("scroll",this._handleScroll,!0),this.contentDocument.removeEventListener("input",this._handleInput,!0),this.contentDocument.removeEventListener("focus",this._handleFocus,!0),this.contentDocument.removeEventListener("blur",this._handleFocus,!0),this._enableHTMLOptimization&&this._workLoop.clear()},e.prototype._initConfig=function(){var t=this.context.getRecorder();if(t&&t.recording){var e=t.recording.id;if(null!=e){var n=a.get(e);n&&null!=n.enableHTMLOptimization&&(this._enableHTMLOptimization=n.enableHTMLOptimization)}}},e.prototype._publishSnapshot=function(){var t=this._capturer.capture().actions;this.publish(o.b.HTML_SNAPSHOT,t)},e}(s.Tracker)},function(t,e,n){"use strict";n.r(e),n.d(e,"ActionWorkLoop",function(){return d});var r,o=n(0),i=n(1),a=n(23),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},c=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},l=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},f=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},h=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(f(arguments[e]));return t},p=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},d=function(t){function e(){var e=t.call(this)||this;return e._currentCycle=-1,e._isFlushing=!1,e._lastAddIds=new Map,e._lastRemoveIds=new Map,e._lastAttrIds=new Map,e._lastTextIds=new Map,e._lastValueIds=new Map,e._performTweak=function(t){return c(e,void 0,void 0,function(){var e,n,r,o=this;return l(this,function(a){return this._currentCycle++,this._releaseResource(),e=[],t.forEach(function(t,a,s){if(n=t.id,(r=t.type)===i.a.ADD_NODE)o._lastAddIds.has(n)?o._lastAddIds.set(n,[a,t]):o._lastRemoveIds.has(n)||o._lastAddIds.set(n,[a,t]);else if(r===i.a.REMOVE_NODE)o._lastAddIds.has(n)?(e.push.apply(e,h(o._getActionIndexesToDelete(s,o._lastAddIds.get(n)[0],a))),o._lastAddIds.delete(n)):(o._lastRemoveIds.has(n),o._lastRemoveIds.set(n,[a,t]));else if(r===i.a.CHANGE_ATTRIBUTES)if(o._lastAttrIds.has(n)){var c=f(o._lastAttrIds.get(n),2),l=c[0],p=c[1];e.push(l),Object.assign(t.attrs,p.attrs),o._lastAttrIds.set(n,[a,t])}else o._lastAttrIds.set(n,[a,t]);else if(r===i.a.CHANGE_TEXT)if(o._lastTextIds.has(n)){var d=f(o._lastTextIds.get(n),2),_=d[0],y=f(d[1],2),v=y[0],g=y[1],m="text";if(_===o._currentCycle)e.push(v),t[m]=g[m],o._lastTextIds.set(n,[o._currentCycle,[a,t]]);else{var b=u({},t);o._patchAction(g,t,m),o._lastTextIds.set(n,[o._currentCycle,[a,b]])}}else o._lastTextIds.set(n,[o._currentCycle,[a,t]]);else if(r===i.a.CHANGE_VALUE)if(o._lastValueIds.has(n)){var w=f(o._lastValueIds.get(n),2),E=(_=w[0],f(w[1],2));v=E[0],g=E[1],m="value";if(_===o._currentCycle)e.push(v),t[m]=g[m],o._lastValueIds.set(n,[o._currentCycle,[a,t]]);else{b=u({},t);o._patchAction(g,t,m),o._lastValueIds.set(n,[o._currentCycle,[a,b]])}}else o._lastValueIds.set(n,[o._currentCycle,[a,t]])}),h(new Set(e)).sort(function(t,e){return e-t}).forEach(function(e){t.splice(e,1)}),[2]})})},e._dmp=new i.c,e._scheduler=new a.ActionScheduler(e.tasks,e._performTweak,{timeout:7}),e}return s(e,t),e.prototype.enqueue=function(e){var n=this;Promise.resolve().then(function(){e.length>0&&(t.prototype.enqueue.call(n,e),n._isFlushing||n._scheduler.start())})},e.prototype.flush=function(){return c(this,void 0,void 0,function(){var e,n,r,o,i,a,s;return l(this,function(u){switch(u.label){case 0:this._isFlushing=!0,this._scheduler.stop(),e=this.tasks.toArray(),u.label=1;case 1:u.trys.push([1,6,7,8]),n=p(e),r=n.next(),u.label=2;case 2:return r.done?[3,5]:(o=r.value,[4,this._performTweak(o)]);case 3:u.sent(),t.prototype.dequeue.call(this),u.label=4;case 4:return r=n.next(),[3,2];case 5:return[3,8];case 6:return i=u.sent(),a={error:i},[3,8];case 7:try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}return[7];case 8:return this._releaseResource(!0),this._scheduler.start(),this._isFlushing=!1,[2,e]}})})},e.prototype._getActionIndexesToDelete=function(t,e,n){var r=[];if(t[e]&&t[n])for(var o=void 0,i=new Set([t[e].id]),a=e;a<=n;a++)o=t[a],i.has(o.id)?r.push(a):i.has(o.parentId)&&(i.add(o.id),r.push(a));return r},e.prototype._patchAction=function(t,e,n){var r=t[n],o=e[n];if("string"==typeof r&&"string"==typeof o&&r.length>=20){var i=this._dmp.makePatch(r,o);null!=i&&(e.isPatch=!0,e[n]=i)}},e.prototype._releaseResource=function(t){void 0===t&&(t=!1),this._lastRemoveIds.clear(),this._lastAddIds.clear(),this._lastAttrIds.clear(),t&&(this._lastTextIds.clear(),this._lastValueIds.clear())},e}(o.o)},function(t,e,n){"use strict";n.r(e),n.d(e,"ActionScheduler",function(){return a});var r,o=n(0),i=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.hasMoreWork=function(){return this._tasks.length>0},e.prototype.requestNextWork=function(){return this._tasks.dequeue()},e}(o.j)},function(t,e){var n=1e3,r=60*n,o=60*r,i=24*o,a=7*i,s=365.25*i;function u(t,e,n,r){var o=e>=1.5*n;return Math.round(t/n)+" "+r+(o?"s":"")}t.exports=function(t,e){e=e||{};var c=typeof t;if("string"===c&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var u=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*s;case"weeks":case"week":case"w":return u*a;case"days":case"day":case"d":return u*i;case"hours":case"hour":case"hrs":case"hr":case"h":return u*o;case"minutes":case"minute":case"mins":case"min":case"m":return u*r;case"seconds":case"second":case"secs":case"sec":case"s":return u*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(t);if("number"===c&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=i)return u(t,e,i,"day");if(e>=o)return u(t,e,o,"hour");if(e>=r)return u(t,e,r,"minute");if(e>=n)return u(t,e,n,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=i)return Math.round(t/i)+"d";if(e>=o)return Math.round(t/o)+"h";if(e>=r)return Math.round(t/r)+"m";if(e>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,o="~";function i(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new a(n,r||t,i),u=o?o+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function c(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),c.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(o?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},c.prototype.listeners=function(t){var e=o?o+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,a=new Array(i);r<i;r++)a[r]=n[r].fn;return a},c.prototype.listenerCount=function(t){var e=o?o+t:t,n=this._events[e];return n?n.fn?1:n.length:0},c.prototype.emit=function(t,e,n,r,i,a){var s=o?o+t:t;if(!this._events[s])return!1;var u,c,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,i),!0;case 6:return l.fn.call(l.context,e,n,r,i,a),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,p=l.length;for(c=0;c<p;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,n);break;case 4:l[c].fn.call(l[c].context,e,n,r);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},c.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},c.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},c.prototype.removeListener=function(t,e,n,r){var i=o?o+t:t;if(!this._events[i])return this;if(!e)return u(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||r&&!a.once||n&&a.context!==n||u(this,i);else{for(var s=0,c=[],l=a.length;s<l;s++)(a[s].fn!==e||r&&!a[s].once||n&&a[s].context!==n)&&c.push(a[s]);c.length?this._events[i]=1===c.length?c[0]:c:u(this,i)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=o?o+t:t,this._events[e]&&u(this,e)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=o,c.EventEmitter=c,t.exports=c},function(t,e,n){"use strict";function r(t,e){var n="Warning: '"+t+"' is deprecated.";if(null!=e&&(n=n+" Use '"+e+"' instead.'"),"undefined"!=typeof console)console.warn(n);else try{throw new Error(n)}catch(t){}}n.d(e,"a",function(){return r})},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e,n){"use strict";var r=n(4);function o(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var i;if(n)i=n(e);else if(r.isURLSearchParams(e))i=e.toString();else{var a=[];r.forEach(e,function(t,e){null!=t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),a.push(o(e)+"="+o(t))}))}),i=a.join("&")}if(i){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+i}return t}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";(function(e){var r=n(4),o=n(63),i={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s,u={adapter:(void 0!==e&&"[object process]"===Object.prototype.toString.call(e)?s=n(33):"undefined"!=typeof XMLHttpRequest&&(s=n(33)),s),transformRequest:[function(t,e){return o(e,"Accept"),o(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(a(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],function(t){u.headers[t]={}}),r.forEach(["post","put","patch"],function(t){u.headers[t]=r.merge(i)}),t.exports=u}).call(this,n(32))},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var t=s(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function _(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=_,o.addListener=_,o.once=_,o.off=_,o.removeListener=_,o.removeAllListeners=_,o.emit=_,o.prependListener=_,o.prependOnceListener=_,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){"use strict";var r=n(4),o=n(64),i=n(29),a=n(66),s=n(67),u=n(34);t.exports=function(t){return new Promise(function(e,c){var l=t.data,f=t.headers;r.isFormData(l)&&delete f["Content-Type"];var h=new XMLHttpRequest;if(t.auth){var p=t.auth.username||"",d=t.auth.password||"";f.Authorization="Basic "+btoa(p+":"+d)}if(h.open(t.method.toUpperCase(),i(t.url,t.params,t.paramsSerializer),!0),h.timeout=t.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null,r={data:t.responseType&&"text"!==t.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:n,config:t,request:h};o(e,c,r),h=null}},h.onabort=function(){h&&(c(u("Request aborted",t,"ECONNABORTED",h)),h=null)},h.onerror=function(){c(u("Network Error",t,null,h)),h=null},h.ontimeout=function(){c(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var _=n(68),y=(t.withCredentials||s(t.url))&&t.xsrfCookieName?_.read(t.xsrfCookieName):void 0;y&&(f[t.xsrfHeaderName]=y)}if("setRequestHeader"in h&&r.forEach(f,function(t,e){void 0===l&&"content-type"===e.toLowerCase()?delete f[e]:h.setRequestHeader(e,t)}),t.withCredentials&&(h.withCredentials=!0),t.responseType)try{h.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&h.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){h&&(h.abort(),c(t),h=null)}),void 0===l&&(l=null),h.send(l)})}},function(t,e,n){"use strict";var r=n(65);t.exports=function(t,e,n,o,i){var a=new Error(t);return r(a,e,n,o,i)}},function(t,e,n){"use strict";var r=n(4);t.exports=function(t,e){e=e||{};var n={};return r.forEach(["url","method","params","data"],function(t){void 0!==e[t]&&(n[t]=e[t])}),r.forEach(["headers","auth","proxy"],function(o){r.isObject(e[o])?n[o]=r.deepMerge(t[o],e[o]):void 0!==e[o]?n[o]=e[o]:r.isObject(t[o])?n[o]=r.deepMerge(t[o]):void 0!==t[o]&&(n[o]=t[o])}),r.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(r){void 0!==e[r]?n[r]=e[r]:void 0!==t[r]&&(n[r]=t[r])}),n}},function(t,e,n){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},function(t,e,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,n){"use strict";n.r(e),n.d(e,"ConsoleTracker",function(){return l});var r,o=n(0),i=n(8),a=n(3),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},c=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(u(arguments[e]));return t},l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._vanillaMethods=new Map,e._interceptedMethods=new Map,e}return s(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return o.n.Console},enumerable:!0,configurable:!0}),e.prototype.init=function(){t.prototype.init.call(this),this._logger=this.contentWindow.console,this._supportedMethodNames=this._getSupportedMethodNames(this._logger),this._methodNames2EventTypes=this._getEventTypesMapping(this._supportedMethodNames)},e.prototype.start=function(){var e=this;t.prototype.start.call(this),this._supportedMethodNames.forEach(function(t){return e._intercept(t,e._handleLogging)})},e.prototype.stop=function(){var e=this;t.prototype.stop.call(this),this._supportedMethodNames.forEach(function(t){return e._restore(t)}),this._vanillaMethods.clear(),this._interceptedMethods.clear()},e.prototype._intercept=function(t,e){if(!this._vanillaMethods.has(t)&&-1!==this._supportedMethodNames.indexOf(t)){var n=this._logger[t];this._vanillaMethods.set(t,n);var r=this;this._logger[t]=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];r.enableProcess&&e.apply(r,c([t],o)),n.apply(this,o)},this._interceptedMethods.set(t,this._logger[t])}},e.prototype._restore=function(t){this._vanillaMethods.has(t)&&this._logger[t]===this._interceptedMethods.get(t)&&(this._logger[t]=this._vanillaMethods.get(t))},e.prototype._handleLogging=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(this.enableProcess){var r=this._filterLogs(e);this.publish(this._methodNames2EventTypes[t],{id:this.context.getNextMarkerId(),logs:Object(i.a)(r)})}},e.prototype._getSupportedMethodNames=function(t){return t?e.CONSOLE_METHODS.filter(function(e){return"function"==typeof t[e]}):[]},e.prototype._getEventTypesMapping=function(t){var e={};return t.forEach(function(t){e[t]=o.b["CONSOLE_"+t.toUpperCase()]}),e},e.prototype._filterLogs=function(t){return t.filter(function(t){return!(t instanceof Window||t instanceof Document||t instanceof Element||t instanceof Node||t instanceof FormData)})},e.CONSOLE_METHODS=["error"],e}(a.Tracker)},function(t,e,n){"use strict";n.r(e),n.d(e,"ErrorTracker",function(){return l});var r,o=n(0),i=n(8),a=n(3),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},c=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._handleError=function(t){if(e.enableProcess){var n=e.contentWindow.location.href,r=e.context.getNextMarkerId();if(t instanceof ErrorEvent){var a=t.message;if(/^script error\.?$/i.test(a)){var s={id:r,message:a,page:n};e._passThroughError(s)&&e.publish(o.b.ERROR_SCRIPT,s)}else{var c={},l=t.error;l&&(c.stack=Object(i.a)(l.stack));s=u({id:r,message:a,source:t.filename,lineno:t.lineno,colno:t.colno,page:n},c);e._passThroughError(s)&&e.publish(o.b.ERROR_RUNTIME,s)}}else{s={id:r,message:"Resource Not Found."};var f=t.target;f&&(s.page=f.baseURI||n,s.source=f.src||f.href),e._passThroughError(s)&&e.publish(o.b.ERROR_NOTFOUND,s)}}},e._handleRejection=function(t){if(e.enableProcess){var n="Uncaught (in promise) Error",r={id:e.context.getNextMarkerId(),message:n+".",page:e.contentWindow.location.href},a=t.reason;a&&("string"==typeof a?r.message=a:(r.message=n+": "+a.message,r.stack=Object(i.a)(a.stack))),e._passThroughError(r)&&e.publish(o.b.ERROR_PROMISEREJECTION,r)}},e}return s(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return o.n.Error},enumerable:!0,configurable:!0}),e.prototype.init=function(e){var n,r;if(t.prototype.init.call(this,e),e&&Array.isArray(e.blacklist)){var i=[];try{for(var a=c(e.blacklist),s=a.next();!s.done;s=a.next()){var u=s.value;if(Object(o.J)(u)){var l=u.trim();""!==l&&i.push(l.toLowerCase())}}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}i.length>0&&(this._blacklist=i)}},e.prototype.start=function(){t.prototype.start.call(this),this.contentWindow.addEventListener("error",this._handleError,!0),this.contentWindow.addEventListener("unhandledrejection",this._handleRejection,!0)},e.prototype.stop=function(){t.prototype.stop.call(this),this.contentWindow.removeEventListener("error",this._handleError,!0),this.contentWindow.removeEventListener("unhandledrejection",this._handleRejection,!0)},e.prototype._passThroughError=function(t){if(this._blacklist&&Object(o.J)(t.message)){var e=t.message.toLowerCase();return!this._blacklist.some(function(t){return-1!==e.indexOf(t)})}return!0},e}(a.Tracker)},function(t,e,n){"use strict";n.r(e),n.d(e,"MouseTracker",function(){return s});var r,o=n(0),i=n(3),a=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lastMouseMoveTime=0,e._lastMousePosition={x:0,y:0},e._mouseMoveDetectionInterval=500,e._mouseMoveDetectionSensitiveness=2,e._handleMouseMove=function(t){e.enableProcess&&(0===e._lastMouseMoveTime||Date.now()-e._lastMouseMoveTime>e._mouseMoveDetectionInterval)&&Math.abs(t.x-e._lastMousePosition.x)+Math.abs(t.y-e._lastMousePosition.y)>e._mouseMoveDetectionSensitiveness&&(e._lastMouseMoveTime=Date.now(),e._lastMousePosition.x=t.x,e._lastMousePosition.y=t.y,e.publish(o.b.MOUSE_MOVE,[t.x,t.y,t.buttons]))},e._handleMouseDown=function(t){if(e.enableProcess){var n=[t.x,t.y,t.buttons],r=t.target,i=e.context.getNodeIdResolver();if(i){if(r&&"http://www.w3.org/2000/svg"===r.namespaceURI)for(;"http://www.w3.org/2000/svg"===r.namespaceURI&&r.parentElement;)r=r.parentElement;if(r)i.getNodeId(r)&&n.push(i.getNodeId(r))}e.publish(o.b.MOUSE_DOWN,n)}},e._handleMouseUp=function(t){if(e.enableProcess){var n=[t.x,t.y,t.buttons],r=t.target,i=e.context.getNodeIdResolver();if(i)i.getNodeId(r)&&n.push(i.getNodeId(r));e.publish(o.b.MOUSE_UP,n)}},e}return a(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return o.n.Mouse},enumerable:!0,configurable:!0}),e.prototype.start=function(){t.prototype.start.call(this),this.contentDocument.addEventListener("mousemove",this._handleMouseMove,!0),this.contentDocument.addEventListener("mousedown",this._handleMouseDown,!0),this.contentDocument.addEventListener("mouseup",this._handleMouseUp,!0)},e.prototype.stop=function(){t.prototype.stop.call(this),this.contentDocument.removeEventListener("mousemove",this._handleMouseMove,!0),this.contentDocument.removeEventListener("mousedown",this._handleMouseDown,!0),this.contentDocument.removeEventListener("mouseup",this._handleMouseUp,!0)},e}(i.Tracker)},function(t,e,n){"use strict";n.r(e),n.d(e,"NetworkTracker",function(){return l});var r,o=n(0),i=n(3),a=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},u=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},c=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._xhrContexts=new WeakMap,e._vanillaMethods=new Map,e._interceptedMethods=new Map,e._handleXHRSend=function(t,n){if(e.enableProcess){var r=e._xhrContexts.get(t);r&&(e._isXReplayRequest(r)||!e._passThroughNetworkActivity(r.request.url)?e._xhrContexts.delete(t):e.publish(o.b.NETWORK_SEND,s({},r.request,{body:e._parseBody(n)})))}},e._handleXHRLoad=function(t){if(e.enableProcess){var n=t.target,r=e._xhrContexts.get(n);r&&(e.publish(o.b.NETWORK_DONE,s({},r.response,{url:n.responseURL,headers:Object(o.L)(n.getAllResponseHeaders()),status:n.status,statusText:n.statusText,type:n.responseType})),e._xhrContexts.delete(n))}},e._handleXHRAbort=function(t){if(e.enableProcess){var n=t.target,r=e._xhrContexts.get(n);r&&(e.publish(o.b.NETWORK_ABORT,s({},r.response)),e._xhrContexts.delete(n))}},e._handleXHRTimeout=function(t){if(e.enableProcess){var n=t.target,r=e._xhrContexts.get(n);r&&(e.publish(o.b.NETWORK_TIMEOUT,s({},r.response)),e._xhrContexts.delete(n))}},e._handleXHRError=function(t){if(e.enableProcess){var n=t.target,r=e._xhrContexts.get(n);r&&(e.publish(o.b.NETWORK_ERROR,s({},r.response,{headers:Object(o.L)(n.getAllResponseHeaders())})),e._xhrContexts.delete(n))}},e}return a(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return o.n.Network},enumerable:!0,configurable:!0}),e.prototype.init=function(n){var r,i;if(t.prototype.init.call(this,n),n&&Array.isArray(n.blacklist)){var a=[];try{for(var s=u(n.blacklist),c=s.next();!c.done;c=s.next()){var l=c.value;if(Object(o.J)(l)){var f=l.trim();""!==f&&a.push(f.toLowerCase())}}}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}a.length>0&&(this._blacklist=a)}o.r.fetch()&&Object(o.I)(this.contentWindow[e.FETCH_API])&&(this._vanillaFetch=this.contentWindow[e.FETCH_API]),this._vanillaXHR=XMLHttpRequest?XMLHttpRequest.prototype:void 0,this._supportedXHRMethodNames=this._getSupportedXHRMethodNames(this._vanillaXHR)},e.prototype.start=function(){var e=this;t.prototype.start.call(this),this._supportedXHRMethodNames.forEach(function(t){return e._interceptXHR(t)}),this._interceptFetch()},e.prototype.stop=function(){var e=this;t.prototype.stop.call(this),this._supportedXHRMethodNames.forEach(function(t){return e._restoreXHR(t)}),this._restoreFetch()},e.prototype._interceptXHR=function(t){if(this._vanillaXHR&&!this._vanillaMethods.has(t)){var n=this._vanillaXHR[t];this._vanillaMethods.set(t,n);var r=this;this._vanillaXHR[t]=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];if(r.enableProcess)if(t===e.XHR_OPEN){var a=r.context.getNextMarkerId(),s=c(o,5),u=s[0],l=s[1],f=s[2],h=s[3],p=s[4],d={request:{id:a,contextType:"xhr",method:u,url:l},response:{id:a,contextType:"xhr"}};null!=f&&(d.request.async=f),null!=h&&(d.request.user=h),null!=p&&(d.request.password=p),r._xhrContexts.set(this,d)}else if(t===e.XHR_SEND){if(!this.addEventListener)throw new Error("Failed to initialize the Network Tracker: The Network Tracker is not supported on this platform.");this.removeEventListener&&(this.removeEventListener("abort",r._handleXHRAbort),this.removeEventListener("error",r._handleXHRError),this.removeEventListener("timeout",r._handleXHRTimeout),this.removeEventListener("load",r._handleXHRLoad)),this.addEventListener("abort",r._handleXHRAbort),this.addEventListener("error",r._handleXHRError),this.addEventListener("timeout",r._handleXHRTimeout),this.addEventListener("load",r._handleXHRLoad),r._handleXHRSend(this,o[0])}else if(t===e.XHR_SET_REQUEST_HEADER){if(d=r._xhrContexts.get(this)){var _=c(o,2),y=_[0],v=_[1];null==d.request.headers&&(d.request.headers={}),null==d.request.headers[y]?d.request.headers[y]=v:d.request.headers[y]=d.request.headers[y]+", "+v}}n.apply(this,o)},this._interceptedMethods.set(t,this._vanillaXHR[t])}},e.prototype._interceptFetch=function(){var t=e.FETCH_API;if(this._vanillaFetch&&!this._vanillaMethods.has(t)){this._vanillaMethods.set(t,this._vanillaFetch);var n=this;this.contentWindow[t]=function(t,e){if(n.enableProcess){var r=n.context.getNextMarkerId(),i={request:{id:r,contextType:"fetch"},response:{id:r,contextType:"fetch"}};return Object(o.J)(t)?i.request.url=t:Object(o.H)(t)&&(i.request.body=n._parseBody(t.body),i.request.method=t.method,i.request.url=t.url,i.request.cache=t.cache,i.request.credentials=t.credentials,i.request.headers=Object(o.L)(t.headers),i.request.integrity=t.integrity,i.request.keepalive=t.keepalive,i.request.mode=t.mode,i.request.redirect=t.redirect,i.request.referrer=t.referrer,i.request.referrerPolicy=t.referrerPolicy),null!=e&&(null!=e.body&&(i.request.body=n._parseBody(e.body)),null!=e.cache&&(i.request.cache=e.cache),null!=e.credentials&&(i.request.credentials=e.credentials),null!=e.integrity&&(i.request.integrity=e.integrity),null!=e.keepalive&&(i.request.keepalive=e.keepalive),null!=e.method&&(i.request.method=e.method),null!=e.mode&&(i.request.mode=e.mode),null!=e.redirect&&(i.request.redirect=e.redirect),null!=e.referrer&&(i.request.referrer=e.referrer),null!=e.referrerPolicy&&(i.request.referrerPolicy=e.referrerPolicy),null!=e.headers&&(i.request.headers=Object(o.L)(e.headers))),n._handleFetchEvent(i,o.b.NETWORK_SEND),n._vanillaFetch.call(this,t,e).then(function(t){return i.response.ok=t.ok,i.response.url=t.url,i.response.redirected=t.redirected,i.response.status=t.status,i.response.statusText=t.statusText,i.response.type=t.type,i.response.headers=Object(o.L)(t.headers),n._handleFetchEvent(i,o.b.NETWORK_DONE),t}).catch(function(t){throw n._handleFetchEvent(i,o.b.NETWORK_ERROR),t})}return n._vanillaFetch.call(this,t,e)},this.contentWindow[t].toString=function(){return"function fetch() { [native code] }"},this._interceptedMethods.set(t,this.contentWindow[t])}},e.prototype._restoreXHR=function(t){this._restore(this._vanillaXHR,t)},e.prototype._restoreFetch=function(){this._restore(this.contentWindow,e.FETCH_API)},e.prototype._restore=function(t,e){t&&this._vanillaMethods.has(e)&&this._interceptedMethods.has(e)&&t[e]===this._interceptedMethods.get(e)&&(t[e]=this._vanillaMethods.get(e),this._vanillaMethods.delete(e),this._interceptedMethods.delete(e))},e.prototype._handleFetchEvent=function(t,e){this.enableProcess&&t&&!this._isXReplayRequest(t)&&this._passThroughNetworkActivity(t.request.url)&&(e===o.b.NETWORK_SEND?this.publish(e,s({},t.request)):this.publish(e,s({},t.response)))},e.prototype._getSupportedXHRMethodNames=function(t){return t?e.XHR_METHODS.filter(function(e){return"function"==typeof t[e]}):[]},e.prototype._parseBody=function(t){return t instanceof FormData?Object(o.z)(t):t},e.prototype._isXReplayRequest=function(t){return null!=t.request.headers&&null!=t.request.headers[o.p]},e.prototype._passThroughNetworkActivity=function(t){if(this._blacklist&&Object(o.J)(t)){var e=t.toLowerCase();return!this._blacklist.some(function(t){return-1!==e.indexOf(t)})}return!0},e.FETCH_API="fetch",e.XHR_OPEN="open",e.XHR_SEND="send",e.XHR_SET_REQUEST_HEADER="setRequestHeader",e.XHR_METHODS=[e.XHR_OPEN,e.XHR_SEND,e.XHR_SET_REQUEST_HEADER],e}(i.Tracker)},function(t,e){},function(t,e){},function(t,e,n){"use strict";var r;n.d(e,"a",function(){return r}),function(t){t.ABORT="abort",t.RECORDING_START="recordingstart",t.RECORDING_STOP="recordingstop"}(r||(r={}))},function(t,e,n){"use strict";var r,o=n(0),i=n(2),a=n(9),s=n(15),u=n(25),c=n(16),l=n(7),f=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),h=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},p=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},d=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n},_=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._recordingContexts=new Map,e._handleRecorderEvents=function(t,n,r){return function(){switch(t){case i.d.START:e._recordingContexts.set(r.id,r),1===e._recordingContexts.size&&e.emit(l.RecordingEvent.RECORDING_START);break;case i.d.STOP:e._unsubscribe(n),i.k.remove(r.recordingId),e._recordingContexts.delete(r.id),0===e._recordingContexts.size&&e.emit(l.RecordingEvent.RECORDING_STOP)}}},e}return f(e,t),Object.defineProperty(e.prototype,"recordingContexts",{get:function(){return this._recordingContexts},enumerable:!0,configurable:!0}),e.prototype.UNSAFE_createRecordingContext=function(t,e,n){return h(this,void 0,Promise,function(){var r,a,s,u,l,f,h,_,y;return p(this,function(p){switch(p.label){case 0:return r=e.durationLimit,a=e.trackerConfigs,s=e.trackers,u=d(e,["durationLimit","trackerConfigs","trackers"]),t===o.i.BLACKBOX?l=new i.b(n,u.baseXRTPURL):t===o.i.STREAMING?l=new i.f(n,u.baseXRTPURL,u.baseStreamURL):(l=new i.i(n,u.baseXRTPURL)).type=t,null!=u.user&&(l.user=u.user),l.appKey=u.appKey,t!==o.i.BREAKPOINT_CONTINUINGLY?[3,5]:[4,this._queryBreakpoint(l.appKey)];case 1:return(f=p.sent())?this._recordingContexts.has(f.recordingId)?[2,this._recordingContexts.get(f.recordingId)]:[4,this._resumeContinuinglyRecording(f)]:[3,3];case 2:l=p.sent(),p.label=3;case 3:return[4,this._updateBreakpoint(l)];case 4:p.sent(),p.label=5;case 5:return i.k.set(l.id,u),h={},null!=r&&(h.durationLimit=r),null!=a&&(h.trackerConfigs=a),null!=s&&(h.trackers=s),[4,(_=t===o.i.BLACKBOX?new i.a(h):t===o.i.BREAKPOINT_CONTINUINGLY?new i.c(h):t===o.i.STREAMING?new i.e(h):new i.g(h)).loadRecording(l)];case 6:return p.sent(),y=new c.a(_,l),this._subscribe(_,y),_.start(),[2,y]}})})},e.prototype.UNSAFE_createRecordingContextFromURL=function(t,e){return h(this,void 0,Promise,function(){var n,r,o,a,s,u,l,f;return p(this,function(h){switch(h.label){case 0:return[4,i.j.loadFromURL(e)];case 1:return n=h.sent(),r=t.durationLimit,o=t.trackerConfigs,a=t.trackers,s=d(t,["durationLimit","trackerConfigs","trackers"]),i.k.set(n.id,s),u={},null!=r&&(u.durationLimit=r),null!=o&&(u.trackerConfigs=o),null!=a&&(u.trackers=a),[4,(l=new i.g(u)).loadRecording(n)];case 2:return h.sent(),f=new c.a(l,n),this._subscribe(l,f),l.start(),[2,f]}})})},e.prototype.isRecording=function(){var t,e;try{for(var n=_(this._recordingContexts.values()),r=n.next();!r.done;r=n.next()){if(r.value.isRecording)return!0}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return!1},e.prototype.stopRecordings=function(){var t,e;try{for(var n=_(this._recordingContexts.values()),r=n.next();!r.done;r=n.next()){r.value.stopRecording()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},e.prototype.addMarker=function(t,e){var n,r;try{for(var o=_(this._recordingContexts.values()),i=o.next();!i.done;i=o.next()){i.value.addMarker(t,e)}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype._subscribe=function(t,e){var n=this;[i.d.START,i.d.STOP].forEach(function(r){t.on(r,n._handleRecorderEvents(r,t,e))})},e.prototype._unsubscribe=function(t){var e=this;[i.d.START,i.d.STOP].forEach(function(n){return t.off(n,e._handleRecorderEvents)})},e.prototype._queryBreakpoint=function(t){return h(this,void 0,void 0,function(){var e;return p(this,function(n){switch(n.label){case 0:return[4,o.P.queryBreakpoint(t)];case 1:return(e=n.sent())&&Date.now()-e.lastModified<288e5?[2,e]:[2]}})})},e.prototype._resumeContinuinglyRecording=function(t){return h(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,i.j.loadFromURL(Object(o.F)(t.appKey,t.recordingId))];case 1:return[2,e.sent()]}})})},e.prototype._updateBreakpoint=function(t){return h(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,o.P.clearBreakpoints()];case 1:return e.sent(),[4,o.P.putBreakpoint(t.appKey,t.id,Date.now())];case 2:return e.sent(),[2]}})})},e}(u),v=n(1),g=function(){return(g=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},m=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},b=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},w={format:"png",quality:100,timeout:12e3};function E(){return m(this,void 0,Promise,function(){var t,e,n,r,i;return b(this,function(a){switch(a.label){case 0:try{e=new v.d(document,{captureCanvas:!0}),t=e.capture()}catch(t){throw(i=new Error("Failed to capture JSON of DOM: "+t.message+"\n See error.internalError for more details.")).internalError=t,i}a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Object(o.t)(t)];case 2:return n=a.sent(),[3,4];case 3:throw r=a.sent(),(i=new Error("Failed to compress JSON of DOM: "+r.message+"\n See error.internalError for more details.")).internalError=r,i;case 4:return[2,n]}})})}function k(t,e,n){return m(this,void 0,Promise,function(){var r,a,s;return b(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,o.K.get("oss",{baseURL:"mtop.alibaba.rdc.snapshot",params:g({appKey:t},n)})];case 1:return r=u.sent(),[3,3];case 2:throw a=u.sent(),(s=new Error("Failed to get OSS upload context via MTOP: "+a.message+"\n See error.internalError for more details.")).internalError=a,s;case 3:return[4,i.l.uploadSnapshotFile(e,r.key+".json",{type:i.l.CloudServiceType.ALI_OSS,config:r})];case 4:return u.sent(),[2,r]}})})}function O(t,e){var n=Date.now();return new Promise(function(r,o){!function i(){var a=document.createElement("img");function s(){a.removeEventListener("load",u),a.removeEventListener("error",c),a.removeEventListener("abort",c)}function u(){s(),r()}function c(){s(),Date.now()-n<e.timeout?setTimeout(function(){i()},1e3):o(new Error("Timeout when generating capture."))}a.addEventListener("load",u),a.addEventListener("error",c),a.addEventListener("abort",c),a.src=t}()})}var T=n(26);n.d(e,"d",function(){return P}),n.d(e,"e",function(){return D}),n.d(e,"f",function(){return L}),n.d(e,"g",function(){return F}),n.d(e,"h",function(){return M}),n.d(e,"c",function(){return j}),n.d(e,"k",function(){return U}),n.d(e,"i",function(){return q}),n.d(e,"j",function(){return B}),n.d(e,"l",function(){return H}),n.d(e,"a",function(){return W}),n.d(e,"b",function(){return z}),n.d(e,"m",function(){return K});var x,S,R=function(){return(R=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},A=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},N=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},I={trackers:["HTML","Mouse","Error","Console"],baseXRTPURL:"mtop.alibaba.rdc.xreplay"},C=!1,P=new y;function D(t,e){if(C)throw new Error(a.a.XREPLAY_ALREADY_INITIALIZED);i.h.resumeTransfersFromStorage();var n=R({},I,t);G(n),function(t){null!=t.environment&&(o.y.set(t.environment),delete t.environment)}(x=n),S=R({xrVersion:s.b,xrEnvironment:Object(s.a)()},e),C=!0}function L(){return C}function F(){return L()}function M(t){X(F()),x&&(x.user=t)}function j(t){return X(F()),function(t,e){return m(this,void 0,Promise,function(){var n,r,o,i;return b(this,function(a){switch(a.label){case 0:return n=g({},w,e),[4,E()];case 1:return r=a.sent(),[4,k(t,r,n)];case 2:return o=a.sent(),[4,O(i=o.fileUrl,n)];case 3:return a.sent(),[2,{format:n.format,quality:n.quality,host:o.host,key:o.key,previewURL:i}]}})})}(x.appKey,t)}function U(t,e){return A(this,void 0,Promise,function(){return N(this,function(n){return[2,V(o.i.DEFAULT,t,e)]})})}function q(t,e){return A(this,void 0,Promise,function(){return N(this,function(n){return[2,V(o.i.BLACKBOX,t,e)]})})}function B(t,e){return A(this,void 0,Promise,function(){return N(this,function(n){return[2,V(o.i.BREAKPOINT_CONTINUINGLY,t,e)]})})}function H(t,e){return A(this,void 0,Promise,function(){return N(this,function(n){return[2,V(o.i.STREAMING,t,R({},e,{enableHTMLOptimization:!1}))]})})}function W(t,e){return A(this,void 0,Promise,function(){var n;return N(this,function(r){switch(r.label){case 0:return X(F()),n=R({},x,e),[4,P.UNSAFE_createRecordingContextFromURL(n,t)];case 1:return[2,r.sent()]}})})}function z(t){return i.h.resumeTransfersFromTasks(t)}function K(){Object(T.a)("xr.stopAllRecordings()","xr.global.stopRecordings"),P.stopRecordings()}function V(t,e,n){return A(this,void 0,Promise,function(){var r,o;return N(this,function(i){switch(i.label){case 0:return X(F()),G(r=R({},x,n)),o=R({},S,e),[4,P.UNSAFE_createRecordingContext(t,r,o)];case 1:return[2,i.sent()]}})})}function G(t){if(null==t.appKey)throw new Error(a.a.APP_KEY_CAN_NOT_BE_NULL);if(t.trackers&&-1===t.trackers.indexOf(o.n[o.n.HTML]))throw new Error(a.a.XREPLAY_HTML_TRACKER_NOT_FOUND)}function X(t){if(!t)throw new Error(a.a.XREPLAY_NOT_READY)}},function(t,e,n){"use strict";n.r(e);var r=n(0),o=n(8),i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},a=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},s=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t},u=["ec","ea","el","ev"];function c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0;r<t.length;r++)null!=t[r]&&n.push(u[r]+"@"+t[r]);if(n.length>0)return n.join("|")}var l=n(3);n.d(e,"XTrackerTracker",function(){return d});var f,h=(f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=function(){return(p=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._handleMessage=function(t){if(e.enableProcess&&t.source===e.contentWindow){var n=t.data;if(null!=n&&"SITE"===n.type){var i=n.payload;if(null!=i&&"event"===i.t){var a=e._filters[i.tid];if(null!=a){var s=c(i.ec,i.ea,i.el,i.ev);if(null!=s){var u=a.events[s];null!=u&&e.publish(r.b.XTRACKER_EVENT,p({},Object(o.a)(i),{id:e.context.getNextMarkerId(),projectName:a.projectName,eventName:u}))}}}}}},e}return h(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return r.n.XTracker},enumerable:!0,configurable:!0}),e.prototype.init=function(e){var n,r;t.prototype.init.call(this,e),e&&(this._filters=(n=e.filters,r={},Object.keys(n).forEach(function(t){var e=n[t];if(e&&e.events&&Array.isArray(e.events)){var o={};e.events.forEach(function(t){var e=a(t),n=e[0],r=e.slice(1),i=c.apply(void 0,s(r));null!=i&&(o[i]=n)}),Object.keys(o).length>0&&(r[t]=i({},e,{events:o}))}}),r))},e.prototype.start=function(){t.prototype.start.call(this),this._filters&&this.contentWindow.addEventListener("message",this._handleMessage,!0)},e.prototype.stop=function(){t.prototype.stop.call(this),this._filters&&this.contentWindow.removeEventListener("message",this._handleMessage,!0)},e}(l.Tracker)},function(t,e,n){!function(){"use strict";t.exports={polyfill:function(){var t=window,e=document;if(!("scrollBehavior"in e.documentElement.style&&!0!==t.__forceSmoothScrollPolyfill__)){var n,r=t.HTMLElement||t.Element,o=468,i={scroll:t.scroll||t.scrollTo,scrollBy:t.scrollBy,elementScroll:r.prototype.scroll||u,scrollIntoView:r.prototype.scrollIntoView},a=t.performance&&t.performance.now?t.performance.now.bind(t.performance):Date.now,s=(n=t.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(n)?1:0);t.scroll=t.scrollTo=function(){void 0!==arguments[0]&&(!0!==c(arguments[0])?d.call(t,e.body,void 0!==arguments[0].left?~~arguments[0].left:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:t.scrollY||t.pageYOffset):i.scroll.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:t.scrollY||t.pageYOffset))},t.scrollBy=function(){void 0!==arguments[0]&&(c(arguments[0])?i.scrollBy.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):d.call(t,e.body,~~arguments[0].left+(t.scrollX||t.pageXOffset),~~arguments[0].top+(t.scrollY||t.pageYOffset)))},r.prototype.scroll=r.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==c(arguments[0])){var t=arguments[0].left,e=arguments[0].top;d.call(this,this,void 0===t?this.scrollLeft:~~t,void 0===e?this.scrollTop:~~e)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");i.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},r.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==c(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):i.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},r.prototype.scrollIntoView=function(){if(!0!==c(arguments[0])){var n=function(t){for(;t!==e.body&&!1===h(t);)t=t.parentNode||t.host;return t}(this),r=n.getBoundingClientRect(),o=this.getBoundingClientRect();n!==e.body?(d.call(this,n,n.scrollLeft+o.left-r.left,n.scrollTop+o.top-r.top),"fixed"!==t.getComputedStyle(n).position&&t.scrollBy({left:r.left,top:r.top,behavior:"smooth"})):t.scrollBy({left:o.left,top:o.top,behavior:"smooth"})}else i.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function u(t,e){this.scrollLeft=t,this.scrollTop=e}function c(t){if(null===t||"object"!=typeof t||void 0===t.behavior||"auto"===t.behavior||"instant"===t.behavior)return!0;if("object"==typeof t&&"smooth"===t.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+t.behavior+" is not a valid value for enumeration ScrollBehavior.")}function l(t,e){return"Y"===e?t.clientHeight+s<t.scrollHeight:"X"===e?t.clientWidth+s<t.scrollWidth:void 0}function f(e,n){var r=t.getComputedStyle(e,null)["overflow"+n];return"auto"===r||"scroll"===r}function h(t){var e=l(t,"Y")&&f(t,"Y"),n=l(t,"X")&&f(t,"X");return e||n}function p(e){var n,r,i,s,u=(a()-e.startTime)/o;s=u=u>1?1:u,n=.5*(1-Math.cos(Math.PI*s)),r=e.startX+(e.x-e.startX)*n,i=e.startY+(e.y-e.startY)*n,e.method.call(e.scrollable,r,i),r===e.x&&i===e.y||t.requestAnimationFrame(p.bind(t,e))}function d(n,r,o){var s,c,l,f,h=a();n===e.body?(s=t,c=t.scrollX||t.pageXOffset,l=t.scrollY||t.pageYOffset,f=i.scroll):(s=n,c=n.scrollLeft,l=n.scrollTop,f=u),p({scrollable:s,method:f,startTime:h,startX:c,startY:l,x:r,y:o})}}}}()},function(t,e,n){t.exports=n(57)},function(t,e){"undefined"==typeof window&&(window={ctrl:{},lib:{}}),!window.ctrl&&(window.ctrl={}),!window.lib&&(window.lib={}),function(t,e){function n(){var t={},e=new c(function(e,n){t.resolve=e,t.reject=n});return t.promise=e,t}function r(t,e){for(var n in e)void 0===t[n]&&(t[n]=e[n]);return t}function o(t){var e=[];for(var n in t)t[n]&&e.push(n+"="+encodeURIComponent(t[n]));return e.join("&")}function i(t){return"[object Object]"=={}.toString.call(t)}function a(t){var e=new RegExp("(?:^|;\\s*)"+t+"\\=([^;]+)(?:;\\s*|$)").exec(document.cookie);return e?e[1]:void 0}function s(t,e,n){var r=new Date;r.setTime(r.getTime()-864e5);document.cookie=t+"=;path=/;domain=."+e+";expires="+r.toGMTString(),document.cookie=t+"=;path=/;domain=."+n+"."+e+";expires="+r.toGMTString()}function u(t){this.id=""+(new Date).getTime()+ ++_,this.params=r(t||{},{v:"*",data:{},type:"get",dataType:"jsonp"}),this.params.type=this.params.type.toLowerCase(),"object"==typeof this.params.data&&(this.params.data=JSON.stringify(this.params.data)),this.middlewares=h.slice(0)}var c=t.Promise,l=(c||{resolve:function(){}}).resolve();String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});var f={useJsonpResultType:!1,safariGoLogin:!0,useAlipayJSBridge:!1},h=[],p={ERROR:-1,SUCCESS:0,TOKEN_EXPIRED:1,SESSION_EXPIRED:2};(function(){var e=t.location.hostname;if(!e){var n=t.parent.location.hostname;n&&~n.indexOf("zebra.alibaba-inc.com")&&(e=n)}var r=new RegExp("([^.]*?)\\.?((?:"+["taobao.net","taobao.com","tmall.com","tmall.hk","alibaba-inc.com"].join(")|(?:").replace(/\./g,"\\.")+"))","i"),o=e.match(r)||[],i=o[2]||"taobao.com",a=o[1]||"m";"taobao.net"!==i||"x"!==a&&"waptest"!==a&&"daily"!==a?"taobao.net"===i&&"demo"===a?a="demo":"alibaba-inc.com"===i&&"zebra"===a?a="zebra":"waptest"!==a&&"wapa"!==a&&"m"!==a&&(a="m"):a="waptest";var s="h5api";"taobao.net"===i&&"waptest"===a&&(s="acs"),f.mainDomain=i,f.subDomain=a,f.prefix=s})(),function(){var e=t.navigator.userAgent,n=e.match(/WindVane[\/\s]([\d\.\_]+)/);n&&(f.WindVaneVersion=n[1]);var r=e.match(/AliApp\(([^\/]+)\/([\d\.\_]+)\)/i);r&&(f.AliAppName=r[1],f.AliAppVersion=r[2])}();var d="AP"===f.AliAppName&&parseFloat(f.AliAppVersion)>=10.1;d&&10.1===parseFloat(f.AliAppVersion)&&parseInt(f.AliAppVersion.substr(5))<2&&(d=!1);var _=0;u.prototype.use=function(t){if(!t)throw new Error("middleware is undefined");return this.middlewares.push(t),this},u.prototype.__processRequestMethod=function(t){var e=this.params,n=this.options;"get"===e.type&&"jsonp"===e.dataType?n.getJSONP=!0:"get"===e.type&&"originaljsonp"===e.dataType?n.getOriginalJSONP=!0:"get"===e.type&&"json"===e.dataType?n.getJSON=!0:"post"===e.type&&(n.postJSON=!0),t()},u.prototype.__processRequestType=function(n){var r=this,o=this.params,a=this.options;if(!0===f.H5Request&&(a.H5Request=!0),!0===f.WindVaneRequest&&(a.WindVaneRequest=!0),!1===a.H5Request&&!0===a.WindVaneRequest){if(!d&&(!e.windvane||parseFloat(a.WindVaneVersion)<5.4))throw new Error("WINDVANE_NOT_FOUND::缺少WindVane环境");if(d&&!t.AlipayJSBridge)throw new Error("ALIPAY_NOT_READY::支付宝通道未准备好，支付宝请见 https://lark.alipay.com/mtbsdkdocs/mtopjssdkdocs/pucq6z")}else if(!0===a.H5Request)a.WindVaneRequest=!1;else if(void 0===a.WindVaneRequest&&void 0===a.H5Request&&(e.windvane&&parseFloat(a.WindVaneVersion)>=5.4?(a.WindVaneRequest=!0,window.self!==window.top&&(a.H5Request=!0)):a.H5Request=!0,d))if(a.WindVaneRequest=a.H5Request=void 0,t.AlipayJSBridge)if(i(o.data))a.WindVaneRequest=!0;else try{i(JSON.parse(o.data))?a.WindVaneRequest=!0:a.H5Request=!0}catch(t){a.H5Request=!0}else a.H5Request=!0;var s=t.navigator.userAgent.toLowerCase();return s.indexOf("youku")>-1&&a.mainDomain.indexOf("youku.com")<0&&(a.WindVaneRequest=!1,a.H5Request=!0),a.mainDomain.indexOf("youku.com")>-1&&s.indexOf("youku")<0&&(a.WindVaneRequest=!1,a.H5Request=!0),n?n().then(function(){var t=a.retJson.ret;if(t instanceof Array&&(t=t.join(",")),!0===a.WindVaneRequest&&d&&a.retJson.error||!t||t.indexOf("PARAM_PARSE_ERROR")>-1||t.indexOf("HY_FAILED")>-1||t.indexOf("HY_NO_HANDLER")>-1||t.indexOf("HY_CLOSED")>-1||t.indexOf("HY_EXCEPTION")>-1||t.indexOf("HY_NO_PERMISSION")>-1){if(!d||!isNaN(a.retJson.error)||-1!==a.retJson.error.indexOf("FAIL_SYS_ACCESS_DENIED"))return d&&i(o.data)&&(o.data=JSON.stringify(o.data)),f.H5Request=!0,r.__sequence([r.__processRequestType,r.__processToken,r.__processRequestUrl,r.middlewares,r.__processRequest]);void 0===a.retJson.api&&void 0===a.retJson.v&&(a.retJson.api=o.api,a.retJson.v=o.v,a.retJson.ret=[a.retJson.error+"::"+a.retJson.errorMessage],a.retJson.data={})}}):void 0};var y="_m_h5_c",v="_m_h5_tk";u.prototype.__getTokenFromAlipay=function(){var e=n(),r=this.options,o=(t.navigator.userAgent,!!location.protocol.match(/^https?\:$/));return!0===r.useAlipayJSBridge&&!o&&d&&t.AlipayJSBridge&&t.AlipayJSBridge.call?t.AlipayJSBridge.call("getMtopToken",function(t){t&&t.token&&(r.token=t.token),e.resolve()},function(){e.resolve()}):e.resolve(),e.promise},u.prototype.__getTokenFromCookie=function(){var t=this.options;return t.CDR&&a(y)?t.token=a(y).split(";")[0]:t.token=t.token||a(v),t.token&&(t.token=t.token.split("_")[0]),c.resolve()},u.prototype.__waitWKWebViewCookie=function(e){var n=this.options;n.waitWKWebViewCookieFn&&n.H5Request&&t.webkit&&t.webkit.messageHandlers?n.waitWKWebViewCookieFn(e):e()},u.prototype.__processToken=function(t){var e=this,n=this.options;return this.params,n.token&&delete n.token,!0!==n.WindVaneRequest?l.then(function(){return e.__getTokenFromAlipay()}).then(function(){return e.__getTokenFromCookie()}).then(t).then(function(){var t=n.retJson,r=t.ret;if(r instanceof Array&&(r=r.join(",")),r.indexOf("TOKEN_EMPTY")>-1||(!0===n.CDR||!0===n.syncCookieMode)&&r.indexOf("ILLEGAL_ACCESS")>-1||r.indexOf("TOKEN_EXOIRED")>-1){if(n.maxRetryTimes=n.maxRetryTimes||5,n.failTimes=n.failTimes||0,n.H5Request&&++n.failTimes<n.maxRetryTimes){var o=[e.__waitWKWebViewCookie,e.__processToken,e.__processRequestUrl,e.middlewares,e.__processRequest];if(!0===n.syncCookieMode&&e.constructor.__cookieProcessorId!==e.id)if(e.constructor.__cookieProcessor){o=[function(t){var n=function(){e.constructor.__cookieProcessor=null,e.constructor.__cookieProcessorId=null,t()};e.constructor.__cookieProcessor?e.constructor.__cookieProcessor.then(n).catch(n):t()},e.__waitWKWebViewCookie,e.__processToken,e.__processRequestUrl,e.middlewares,e.__processRequest]}else e.constructor.__cookieProcessor=e.__requestProcessor,e.constructor.__cookieProcessorId=e.id;return e.__sequence(o)}n.maxRetryTimes>0&&(s(y,n.pageDomain,"*"),s(v,n.mainDomain,n.subDomain),s("_m_h5_tk_enc",n.mainDomain,n.subDomain)),t.retType=p.TOKEN_EXPIRED}}):void t()},u.prototype.__processRequestUrl=function(e){var n=this.params,r=this.options;if(r.hostSetting&&r.hostSetting[t.location.hostname]){var o=r.hostSetting[t.location.hostname];o.prefix&&(r.prefix=o.prefix),o.subDomain&&(r.subDomain=o.subDomain),o.mainDomain&&(r.mainDomain=o.mainDomain)}if(!0===r.H5Request){var i="//"+(r.prefix?r.prefix+".":"")+(r.subDomain?r.subDomain+".":"")+r.mainDomain+"/h5/"+n.api.toLowerCase()+"/"+n.v.toLowerCase()+"/",a=n.appKey||("waptest"===r.subDomain?"4272":"12574478"),s=(new Date).getTime(),u=function(t){function e(t,e){return t<<e|t>>>32-e}function n(t,e){var n,r,o,i,a;return o=2147483648&t,i=2147483648&e,a=(1073741823&t)+(1073741823&e),(n=1073741824&t)&(r=1073741824&e)?2147483648^a^o^i:n|r?1073741824&a?3221225472^a^o^i:1073741824^a^o^i:a^o^i}function r(t,r,o,i,a,s,u){return t=n(t,n(n(function(t,e,n){return t&e|~t&n}(r,o,i),a),u)),n(e(t,s),r)}function o(t,r,o,i,a,s,u){return t=n(t,n(n(function(t,e,n){return t&n|e&~n}(r,o,i),a),u)),n(e(t,s),r)}function i(t,r,o,i,a,s,u){return t=n(t,n(n(function(t,e,n){return t^e^n}(r,o,i),a),u)),n(e(t,s),r)}function a(t,r,o,i,a,s,u){return t=n(t,n(n(function(t,e,n){return e^(t|~n)}(r,o,i),a),u)),n(e(t,s),r)}function s(t){var e,n="",r="";for(e=0;3>=e;e++)n+=(r="0"+(t>>>8*e&255).toString(16)).substr(r.length-2,2);return n}var u,c,l,f,h,p,d,_,y,v;for(v=function(t){for(var e,n=t.length,r=n+8,o=16*((r-r%64)/64+1),i=new Array(o-1),a=0,s=0;n>s;)a=s%4*8,i[e=(s-s%4)/4]=i[e]|t.charCodeAt(s)<<a,s++;return a=s%4*8,i[e=(s-s%4)/4]=i[e]|128<<a,i[o-2]=n<<3,i[o-1]=n>>>29,i}(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);128>r?e+=String.fromCharCode(r):r>127&&2048>r?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e}(t)),p=1732584193,d=4023233417,_=2562383102,y=271733878,u=0;u<v.length;u+=16)c=p,l=d,f=_,h=y,p=r(p,d,_,y,v[u+0],7,3614090360),y=r(y,p,d,_,v[u+1],12,3905402710),_=r(_,y,p,d,v[u+2],17,606105819),d=r(d,_,y,p,v[u+3],22,3250441966),p=r(p,d,_,y,v[u+4],7,4118548399),y=r(y,p,d,_,v[u+5],12,1200080426),_=r(_,y,p,d,v[u+6],17,2821735955),d=r(d,_,y,p,v[u+7],22,4249261313),p=r(p,d,_,y,v[u+8],7,1770035416),y=r(y,p,d,_,v[u+9],12,2336552879),_=r(_,y,p,d,v[u+10],17,4294925233),d=r(d,_,y,p,v[u+11],22,2304563134),p=r(p,d,_,y,v[u+12],7,1804603682),y=r(y,p,d,_,v[u+13],12,4254626195),_=r(_,y,p,d,v[u+14],17,2792965006),p=o(p,d=r(d,_,y,p,v[u+15],22,1236535329),_,y,v[u+1],5,4129170786),y=o(y,p,d,_,v[u+6],9,3225465664),_=o(_,y,p,d,v[u+11],14,643717713),d=o(d,_,y,p,v[u+0],20,3921069994),p=o(p,d,_,y,v[u+5],5,3593408605),y=o(y,p,d,_,v[u+10],9,38016083),_=o(_,y,p,d,v[u+15],14,3634488961),d=o(d,_,y,p,v[u+4],20,3889429448),p=o(p,d,_,y,v[u+9],5,568446438),y=o(y,p,d,_,v[u+14],9,3275163606),_=o(_,y,p,d,v[u+3],14,4107603335),d=o(d,_,y,p,v[u+8],20,1163531501),p=o(p,d,_,y,v[u+13],5,2850285829),y=o(y,p,d,_,v[u+2],9,4243563512),_=o(_,y,p,d,v[u+7],14,1735328473),p=i(p,d=o(d,_,y,p,v[u+12],20,2368359562),_,y,v[u+5],4,4294588738),y=i(y,p,d,_,v[u+8],11,2272392833),_=i(_,y,p,d,v[u+11],16,1839030562),d=i(d,_,y,p,v[u+14],23,4259657740),p=i(p,d,_,y,v[u+1],4,2763975236),y=i(y,p,d,_,v[u+4],11,1272893353),_=i(_,y,p,d,v[u+7],16,4139469664),d=i(d,_,y,p,v[u+10],23,3200236656),p=i(p,d,_,y,v[u+13],4,681279174),y=i(y,p,d,_,v[u+0],11,3936430074),_=i(_,y,p,d,v[u+3],16,3572445317),d=i(d,_,y,p,v[u+6],23,76029189),p=i(p,d,_,y,v[u+9],4,3654602809),y=i(y,p,d,_,v[u+12],11,3873151461),_=i(_,y,p,d,v[u+15],16,530742520),p=a(p,d=i(d,_,y,p,v[u+2],23,3299628645),_,y,v[u+0],6,4096336452),y=a(y,p,d,_,v[u+7],10,1126891415),_=a(_,y,p,d,v[u+14],15,2878612391),d=a(d,_,y,p,v[u+5],21,4237533241),p=a(p,d,_,y,v[u+12],6,1700485571),y=a(y,p,d,_,v[u+3],10,2399980690),_=a(_,y,p,d,v[u+10],15,4293915773),d=a(d,_,y,p,v[u+1],21,2240044497),p=a(p,d,_,y,v[u+8],6,1873313359),y=a(y,p,d,_,v[u+15],10,4264355552),_=a(_,y,p,d,v[u+6],15,2734768916),d=a(d,_,y,p,v[u+13],21,1309151649),p=a(p,d,_,y,v[u+4],6,4149444226),y=a(y,p,d,_,v[u+11],10,3174756917),_=a(_,y,p,d,v[u+2],15,718787259),d=a(d,_,y,p,v[u+9],21,3951481745),p=n(p,c),d=n(d,l),_=n(_,f),y=n(y,h);return(s(p)+s(d)+s(_)+s(y)).toLowerCase()}(r.token+"&"+s+"&"+a+"&"+n.data),c={jsv:"2.5.1",appKey:a,t:s,sign:u},l={data:n.data,ua:n.ua};Object.keys(n).forEach(function(t){void 0===c[t]&&void 0===l[t]&&"headers"!==t&&"ext_headers"!==t&&"ext_querys"!==t&&(c[t]=n[t])}),n.ext_querys&&Object.keys(n.ext_querys).forEach(function(t){c[t]=n.ext_querys[t]}),r.getJSONP?c.type="jsonp":r.getOriginalJSONP?c.type="originaljsonp":(r.getJSON||r.postJSON)&&(c.type="originaljson"),void 0!==n.valueType&&("original"===n.valueType?r.getJSONP||r.getOriginalJSONP?c.type="originaljsonp":(r.getJSON||r.postJSON)&&(c.type="originaljson"):"string"===n.valueType&&(r.getJSONP||r.getOriginalJSONP?c.type="jsonp":(r.getJSON||r.postJSON)&&(c.type="json"))),!0===r.useJsonpResultType&&"originaljson"===c.type&&delete c.type,r.dangerouslySetProtocol&&(i=r.dangerouslySetProtocol+":"+i),r.querystring=c,r.postdata=l,r.path=i}e()},u.prototype.__processUnitPrefix=function(t){t()};var g=0;u.prototype.__requestJSONP=function(t){function e(t){if(c&&clearTimeout(c),l.parentNode&&l.parentNode.removeChild(l),"TIMEOUT"===t)window[u]=function(){window[u]=void 0;try{delete window[u]}catch(t){}};else{window[u]=void 0;try{delete window[u]}catch(t){}}}var r=n(),i=this.params,a=this.options,s=i.timeout||2e4,u="mtopjsonp"+(i.jsonpIncPrefix||"")+ ++g,c=setTimeout(function(){t(a.timeoutErrMsg||"TIMEOUT::接口超时"),e("TIMEOUT")},s);a.querystring.callback=u;var l=document.createElement("script");return l.src=a.path+"?"+o(a.querystring)+"&"+o(a.postdata),l.async=!0,l.onerror=function(){e("ABORT"),t(a.abortErrMsg||"ABORT::接口异常退出")},window[u]=function(){a.results=Array.prototype.slice.call(arguments),e(),r.resolve()},function(t){(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]||document.firstElementChild||document).appendChild(t)}(l),r.promise},u.prototype.__requestJSON=function(e){function r(t){f&&clearTimeout(f),"TIMEOUT"===t&&c.abort()}var i=n(),s=this.params,u=this.options,c=new t.XMLHttpRequest,l=s.timeout||2e4,f=setTimeout(function(){e(u.timeoutErrMsg||"TIMEOUT::接口超时"),r("TIMEOUT")},l);u.CDR&&a(y)&&(u.querystring.c=decodeURIComponent(a(y))),c.onreadystatechange=function(){if(4==c.readyState){var t,n,o=c.status;if(o>=200&&300>o||304==o){r(),t=c.responseText,n=c.getAllResponseHeaders()||"";try{(t=/^\s*$/.test(t)?{}:JSON.parse(t)).responseHeaders=n,u.results=[t],i.resolve()}catch(t){e("PARSE_JSON_ERROR::解析JSON失败")}}else r("ABORT"),e(u.abortErrMsg||"ABORT::接口异常退出")}};var h,p,d=u.path+"?"+o(u.querystring);u.getJSON?(h="GET",d+="&"+o(u.postdata)):u.postJSON&&(h="POST",p=o(u.postdata)),c.open(h,d,!0),c.withCredentials=!0,c.setRequestHeader("Accept","application/json"),c.setRequestHeader("Content-type","application/x-www-form-urlencoded");var _=s.ext_headers||s.headers;if(_)for(var v in _)c.setRequestHeader(v,_[v]);return c.send(p),i.promise},u.prototype.__requestWindVane=function(t){function r(t){a.results=[t],o.resolve()}var o=n(),i=this.params,a=this.options,s=i.data,u=i.api,c=i.v,l=a.postJSON?1:0,f=a.getJSON||a.postJSON||a.getOriginalJSONP?"originaljson":"";void 0!==i.valueType&&("original"===i.valueType?f="originaljson":"string"===i.valueType&&(f="")),!0===a.useJsonpResultType&&(f="");var h,p,d="https"===location.protocol?1:0,_=i.isSec||0,y=i.sessionOption||"AutoLoginOnly",v=i.ecode||0,g=i.ext_headers||{},m=i.ext_querys||{};g.referer=location.href,h=2*(p=void 0!==i.timer?parseInt(i.timer):void 0!==i.timeout?parseInt(i.timeout):2e4),!0===i.needLogin&&void 0===i.sessionOption&&(y="AutoLoginAndManualLogin"),void 0!==i.secType&&void 0===i.isSec&&(_=i.secType);var b={api:u,v:c,post:String(l),type:f,isHttps:String(d),ecode:String(v),isSec:String(_),param:JSON.parse(s),timer:p,sessionOption:y,ext_headers:g,ext_querys:m};return i.ttid&&!0===a.dangerouslySetWVTtid&&(b.ttid=i.ttid),Object.assign&&i.dangerouslySetWindvaneParams&&Object.assign(b,i.dangerouslySetWindvaneParams),e.windvane.call("MtopWVPlugin","send",b,r,r,h),o.promise},u.prototype.__requestAlipay=function(e){var r=n(),o=this.params,a=this.options,s={apiName:o.api,apiVersion:o.v,needEcodeSign:"1"===String(o.ecode),usePost:!!a.postJSON};return i(o.data)||(o.data=JSON.parse(o.data)),s.data=o.data,o.ttid&&!0===a.dangerouslySetWVTtid&&(s.ttid=o.ttid),(a.getJSON||a.postJSON||a.getOriginalJSONP)&&(s.type="originaljson"),void 0!==o.valueType&&("original"===o.valueType?s.type="originaljson":"string"===o.valueType&&delete s.type),!0===a.useJsonpResultType&&delete s.type,Object.assign&&o.dangerouslySetAlipayParams&&Object.assign(s,o.dangerouslySetAlipayParams),t.AlipayJSBridge.call("mtop",s,function(t){a.results=[t],r.resolve()}),r.promise},u.prototype.__processRequest=function(t,e){var n=this;return l.then(function(){var t=n.options;if(t.H5Request&&(t.getJSONP||t.getOriginalJSONP))return n.__requestJSONP(e);if(t.H5Request&&(t.getJSON||t.postJSON))return n.__requestJSON(e);if(t.WindVaneRequest)return d?n.__requestAlipay(e):n.__requestWindVane(e);throw new Error("UNEXCEPT_REQUEST::错误的请求类型")}).then(t).then(function(){var t=n.options,e=(n.params,t.results[0]),r=e&&e.ret||[];e.ret=r,r instanceof Array&&(r=r.join(","));var o=e.c;t.CDR&&o&&function(t,e,n){var r=n||{};document.cookie=t.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+e.replace(/[^+#$&\/:<-\[\]-}]/g,encodeURIComponent)+(r.domain?";domain="+r.domain:"")+(r.path?";path="+r.path:"")+(r.secure?";secure":"")+(r.httponly?";HttpOnly":"")}(y,o,{domain:t.pageDomain,path:"/"}),r.indexOf("SUCCESS")>-1?e.retType=p.SUCCESS:e.retType=p.ERROR,t.retJson=e})},u.prototype.__sequence=function(t){var e=this,r=[],o=[];t.forEach(function t(i){if(i instanceof Array)i.forEach(t);else{var a,s=n(),u=n();r.push(function(){return s=n(),(a=i.call(e,function(t){return s.resolve(t),u.promise},function(t){return s.reject(t),u.promise}))&&(a=a.catch(function(t){s.reject(t)})),s.promise}),o.push(function(t){return u.resolve(t),a})}});for(var i,a=l;i=r.shift();)a=a.then(i);for(;i=o.pop();)a=a.then(i);return a};var m=function(t){t()},b=function(t){t()};u.prototype.request=function(n){var o=this;if(this.options=r(n||{},f),!c){var i="当前浏览器不支持Promise，请在windows对象上挂载Promise对象";throw e.mtop={ERROR:i},new Error(i)}var a=c.resolve([m,b]).then(function(t){var e=t[0],n=t[1];return o.__sequence([e,o.__processRequestMethod,o.__processRequestType,o.__processToken,o.__processRequestUrl,o.middlewares,o.__processRequest,n])}).then(function(){var t=o.options.retJson;return t.retType!==p.SUCCESS?c.reject(t):o.options.successCallback?void o.options.successCallback(t):c.resolve(t)}).catch(function(t){var n;return t instanceof Error?(console.error(t.stack),n={ret:[t.message],stack:[t.stack],retJson:p.ERROR}):n="string"==typeof t?{ret:[t],retJson:p.ERROR}:void 0!==t?t:o.options.retJson,e.mtop.errorListener&&e.mtop.errorListener({api:o.params.api,v:o.params.v,retJson:n}),o.options.failureCallback?void o.options.failureCallback(n):c.reject(n)});return this.__processRequestType(),o.options.H5Request&&(o.constructor.__firstProcessor||(o.constructor.__firstProcessor=a),m=function(t){o.constructor.__firstProcessor.then(t).catch(t)}),("get"===this.params.type&&"json"===this.params.dataType||"post"===this.params.type)&&(n.pageDomain=n.pageDomain||function(t){try{return t.toLowerCase().indexOf("lazada")>-1&&".com"!==t.substring(t.lastIndexOf("."))?(t.split(".")||[]).length<=3?t:t.split(".").slice(1).join("."):t.substring(t.lastIndexOf(".",t.lastIndexOf(".")-1)+1)}catch(e){return t.substring(t.lastIndexOf(".",t.lastIndexOf(".")-1)+1)}}(t.location.hostname),n.mainDomain!==n.pageDomain&&(n.maxRetryTimes=4,n.CDR=!0)),this.__requestProcessor=a,a},e.mtop=function(t){return new u(t)},e.mtop.request=function(t,e,n){var r={H5Request:t.H5Request,WindVaneRequest:t.WindVaneRequest,LoginRequest:t.LoginRequest,AntiCreep:t.AntiCreep,AntiFlood:t.AntiFlood,successCallback:e,failureCallback:n||e};return new u(t).request(r)},e.mtop.H5Request=function(t,e,n){var r={H5Request:!0,successCallback:e,failureCallback:n||e};return new u(t).request(r)},e.mtop.middlewares=h,e.mtop.config=f,e.mtop.RESPONSE_TYPE=p,e.mtop.CLASS=u}(window,window.lib||(window.lib={})),function(t,e){function n(t){return t.preventDefault(),!1}function r(e,r){var o=this,i=t.dpr||1,a=document.createElement("div"),s=document.documentElement.getBoundingClientRect(),u=Math.max(s.width,window.innerWidth)/i,c=Math.max(s.height,window.innerHeight)/i;a.style.cssText=["-webkit-transform:scale("+i+") translateZ(0)","-ms-transform:scale("+i+") translateZ(0)","transform:scale("+i+") translateZ(0)","-webkit-transform-origin:0 0","-ms-transform-origin:0 0","transform-origin:0 0","width:"+u+"px","height:"+c+"px","z-index:999999","position:"+(u>800?"fixed":"absolute"),"left:0","top:0px","background:"+(u>800?"rgba(0,0,0,.5)":"#FFF"),"display:none"].join(";");var l=document.createElement("div");l.style.cssText=["width:100%","height:52px","background:#EEE","line-height:52px","text-align:left","box-sizing:border-box","padding-left:20px","position:absolute","left:0","top:0","font-size:16px","font-weight:bold","color:#333"].join(";"),l.innerText=e;var f=document.createElement("a");f.style.cssText=["display:block","position:absolute","right:0","top:0","height:52px","line-height:52px","padding:0 20px","color:#999"].join(";"),f.innerText="关闭";var h=document.createElement("iframe");h.style.cssText=["width:100%","height:100%","border:0","overflow:hidden"].join(";"),u>800&&(l.style.cssText=["width:370px","height:52px","background:#EEE","line-height:52px","text-align:left","box-sizing:border-box","padding-left:20px","position:absolute","left:"+(u/2-185)+"px","top:40px","font-size:16px","font-weight:bold","color:#333"].join(";"),h.style.cssText=["position:absolute","top:92px","left:"+(u/2-185)+"px","width:370px","height:480px","border:0","background:#FFF","overflow:hidden"].join(";")),l.appendChild(f),a.appendChild(l),a.appendChild(h),a.className="J_MIDDLEWARE_FRAME_WIDGET",document.body.appendChild(a),h.src=r,f.addEventListener("click",function(){o.hide();var t=document.createEvent("HTMLEvents");t.initEvent("close",!1,!1),a.dispatchEvent(t)},!1),this.addEventListener=function(){a.addEventListener.apply(a,arguments)},this.removeEventListener=function(){a.removeEventListener.apply(a,arguments)},this.show=function(){document.addEventListener("touchmove",n,!1),a.style.display="block",window.scrollTo(0,0)},this.hide=function(){document.removeEventListener("touchmove",n),window.scrollTo(0,-s.top),a.parentNode&&a.parentNode.removeChild(a)}}if(!e||!e.mtop||e.mtop.ERROR)throw new Error("Mtop 初始化失败！");var o=t.Promise,i=e.mtop.CLASS,a=e.mtop.config,s=e.mtop.RESPONSE_TYPE;e.mtop.middlewares.push(function(t){var n=this,r=this.options,o=this.params;return t().then(function(){var t=r.retJson,i=t.ret,u=navigator.userAgent.toLowerCase(),c=u.indexOf("safari")>-1&&u.indexOf("chrome")<0&&u.indexOf("qqbrowser")<0;if(i instanceof Array&&(i=i.join(",")),(i.indexOf("SESSION_EXPIRED")>-1||i.indexOf("SID_INVALID")>-1||i.indexOf("AUTH_REJECT")>-1||i.indexOf("NEED_LOGIN")>-1)&&(t.retType=s.SESSION_EXPIRED,!r.WindVaneRequest&&(!0===a.LoginRequest||!0===r.LoginRequest||!0===o.needLogin))){if(!e.login)throw new Error("LOGIN_NOT_FOUND::缺少lib.login");if(!0!==r.safariGoLogin||!c||"taobao.com"===r.pageDomain)return e.login.goLoginAsync().then(function(t){return n.__sequence([n.__processToken,n.__processRequestUrl,n.__processUnitPrefix,n.middlewares,n.__processRequest])}).catch(function(t){throw"CANCEL"===t?new Error("LOGIN_CANCEL::用户取消登录"):new Error("LOGIN_FAILURE::用户登录失败")});e.login.goLogin()}})}),e.mtop.loginRequest=function(t,e,n){var r={LoginRequest:!0,H5Request:!0,successCallback:e,failureCallback:n||e};return new i(t).request(r)},e.mtop.antiFloodRequest=function(t,e,n){var r={AntiFlood:!0,successCallback:e,failureCallback:n||e};return new i(t).request(r)},e.mtop.middlewares.push(function(t){var e=this.options;return this.params,!0!==e.H5Request||!0!==a.AntiFlood&&!0!==e.AntiFlood?void t():t().then(function(){var t=e.retJson,n=t.ret;n instanceof Array&&(n=n.join(",")),n.indexOf("FAIL_SYS_USER_VALIDATE")>-1&&t.data.url&&(e.AntiFloodReferer?location.href=t.data.url.replace(/(http_referer=).+/,"$1"+e.AntiFloodReferer):location.href=t.data.url)})}),e.mtop.antiCreepRequest=function(t,e,n){var r={AntiCreep:!0,successCallback:e,failureCallback:n||e};return new i(t).request(r)},e.mtop.middlewares.push(function(e){var n=this,i=this.options,s=this.params;return!1!==i.AntiCreep&&(i.AntiCreep=!0),!0!==s.forceAntiCreep&&!0!==i.H5Request||!0!==a.AntiCreep&&!0!==i.AntiCreep?void e():e().then(function(){var e=i.retJson,a=e.ret;if(a instanceof Array&&(a=a.join(",")),(a.indexOf("RGV587_ERROR::SM")>-1||a.indexOf("ASSIST_FLAG")>-1)&&e.data.url){var u="_m_h5_smt",c=function(t){var e=new RegExp("(?:^|;\\s*)"+t+"\\=([^;]+)(?:;\\s*|$)").exec(document.cookie);return e?e[1]:void 0}(u),l=!1;if(!0===i.saveAntiCreepToken&&c)for(var f in c=JSON.parse(c))s[f]&&(l=!0);if(!0===i.saveAntiCreepToken&&c&&!l){for(var f in c)s[f]=c[f];return n.__sequence([n.__processToken,n.__processRequestUrl,n.__processUnitPrefix,n.middlewares,n.__processRequest])}return new o(function(o,a){function c(){f.removeEventListener("close",c),t.removeEventListener("message",l),a("USER_INPUT_CANCEL::用户取消输入")}function l(e){var r;try{r=JSON.parse(e.data)||{}}catch(t){}if(r&&"child"===r.type){var h;f.removeEventListener("close",c),t.removeEventListener("message",l),f.hide();try{for(var p in"string"==typeof(h=JSON.parse(decodeURIComponent(r.content)))&&(h=JSON.parse(h)),h)s[p]=h[p];!0===i.saveAntiCreepToken?(document.cookie=u+"="+JSON.stringify(h)+";",t.location.reload()):n.__sequence([n.__processToken,n.__processRequestUrl,n.__processUnitPrefix,n.middlewares,n.__processRequest]).then(o)}catch(t){a("USER_INPUT_FAILURE::用户输入失败")}}}var f=new r("",e.data.url);f.addEventListener("close",c,!1),t.addEventListener("message",l,!1),f.show()})}})})}(window,window.lib||(window.lib={})),t.exports=window.lib.mtop},function(t,e,n){"use strict";var r=n(73),o=n(17),i=n(77),a=n(37),s=n(78),u=Object.prototype.toString,c=0,l=-1,f=0,h=8;function p(t){if(!(this instanceof p))return new p(t);this.options=o.assign({level:l,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==c)throw new Error(a[n]);if(e.header&&r.deflateSetHeader(this.strm,e.header),e.dictionary){var d;if(d="string"==typeof e.dictionary?i.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=r.deflateSetDictionary(this.strm,d))!==c)throw new Error(a[n]);this._dict_set=!0}}function d(t,e){var n=new p(e);if(n.push(t,!0),n.err)throw n.msg||a[n.err];return n.result}p.prototype.push=function(t,e){var n,a,s=this.strm,l=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"==typeof t?s.input=i.string2buf(t):"[object ArrayBuffer]"===u.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new o.Buf8(l),s.next_out=0,s.avail_out=l),1!==(n=r.deflate(s,a))&&n!==c)return this.onEnd(n),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(i.buf2binstring(o.shrinkBuf(s.output,s.next_out))):this.onData(o.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==n);return 4===a?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c):2!==a||(this.onEnd(c),s.avail_out=0,!0)},p.prototype.onData=function(t){this.chunks.push(t)},p.prototype.onEnd=function(t){t===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=p,e.deflate=d,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,d(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,d(t,e)}},function(t,e,n){var r,o,i=n(79),a=n(80),s=0,u=0;t.exports=function(t,e,n){var c=e&&n||0,l=e||[],f=(t=t||{}).node||r,h=void 0!==t.clockseq?t.clockseq:o;if(null==f||null==h){var p=i();null==f&&(f=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==h&&(h=o=16383&(p[6]<<8|p[7]))}var d=void 0!==t.msecs?t.msecs:(new Date).getTime(),_=void 0!==t.nsecs?t.nsecs:u+1,y=d-s+(_-u)/1e4;if(y<0&&void 0===t.clockseq&&(h=h+1&16383),(y<0||d>s)&&void 0===t.nsecs&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=d,u=_,o=h;var v=(1e4*(268435455&(d+=122192928e5))+_)%4294967296;l[c++]=v>>>24&255,l[c++]=v>>>16&255,l[c++]=v>>>8&255,l[c++]=255&v;var g=d/4294967296*1e4&268435455;l[c++]=g>>>8&255,l[c++]=255&g,l[c++]=g>>>24&15|16,l[c++]=g>>>16&255,l[c++]=h>>>8|128,l[c++]=255&h;for(var m=0;m<6;++m)l[c+m]=f[m];return e||a(l)}},function(t,e,n){"use strict";(function(t,n){var r=Object.keys,o=Array.isArray,i="undefined"!=typeof self?self:"undefined"!=typeof window?window:t;function a(t,e){return"object"!=typeof e?t:(r(e).forEach(function(n){t[n]=e[n]}),t)}var s=Object.getPrototypeOf,u={}.hasOwnProperty;function c(t,e){return u.call(t,e)}function l(t,e){"function"==typeof e&&(e=e(s(t))),r(e).forEach(function(n){h(t,n,e[n])})}var f=Object.defineProperty;function h(t,e,n,r){f(t,e,a(n&&c(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function p(t){return{from:function(e){return t.prototype=Object.create(e.prototype),h(t.prototype,"constructor",t),{extend:l.bind(null,t.prototype)}}}}var d=Object.getOwnPropertyDescriptor;var _=[].slice;function y(t,e,n){return _.call(t,e,n)}function v(t,e){return e(t)}function g(t){if(!t)throw new Error("Assertion Failed")}function m(t){i.setImmediate?n(t):setTimeout(t,0)}function b(t,e){return t.reduce(function(t,n,r){var o=e(n,r);return o&&(t[o[0]]=o[1]),t},{})}function w(t,e){return function(){try{t.apply(this,arguments)}catch(t){e(t)}}}function E(t,e,n){try{t.apply(null,n)}catch(t){e&&e(t)}}function k(t,e){if(c(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var n=[],r=0,o=e.length;r<o;++r){var i=k(t,e[r]);n.push(i)}return n}var a=e.indexOf(".");if(-1!==a){var s=t[e.substr(0,a)];return void 0===s?void 0:k(s,e.substr(a+1))}}function O(t,e,n){if(t&&void 0!==e&&!("isFrozen"in Object&&Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){g("string"!=typeof n&&"length"in n);for(var r=0,o=e.length;r<o;++r)O(t,e[r],n[r])}else{var i=e.indexOf(".");if(-1!==i){var a=e.substr(0,i),s=e.substr(i+1);if(""===s)void 0===n?delete t[a]:t[a]=n;else{var u=t[a];u||(u=t[a]={}),O(u,s,n)}}else void 0===n?delete t[e]:t[e]=n}}function T(t){var e={};for(var n in t)c(t,n)&&(e[n]=t[n]);return e}var x=[].concat;function S(t){return x.apply([],t)}var R="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(S([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(t){return i[t]}).map(function(t){return i[t]});function A(t){if(!t||"object"!=typeof t)return t;var e;if(o(t)){e=[];for(var n=0,r=t.length;n<r;++n)e.push(A(t[n]))}else if(R.indexOf(t.constructor)>=0)e=t;else for(var i in e=t.constructor?Object.create(t.constructor.prototype):{},t)c(t,i)&&(e[i]=A(t[i]));return e}function N(t,e,n,o){return n=n||{},o=o||"",r(t).forEach(function(r){if(c(e,r)){var i=t[r],a=e[r];"object"==typeof i&&"object"==typeof a&&i&&a&&""+i.constructor==""+a.constructor?N(i,a,n,o+r+"."):i!==a&&(n[o+r]=e[r])}else n[o+r]=void 0}),r(e).forEach(function(r){c(t,r)||(n[o+r]=e[r])}),n}var I="undefined"!=typeof Symbol&&Symbol.iterator,C=I?function(t){var e;return null!=t&&(e=t[I])&&e.apply(t)}:function(){return null},P={};function D(t){var e,n,r,i;if(1===arguments.length){if(o(t))return t.slice();if(this===P&&"string"==typeof t)return[t];if(i=C(t)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==t)return[t];if("number"==typeof(e=t.length)){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var L="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function F(t,e){L=t,M=e}var M=function(){return!0},j=!new Error("").stack;function U(){if(j)try{throw U.arguments,new Error}catch(t){return t}return new Error}function q(t,e){var n=t.stack;return n?(e=e||0,0===n.indexOf(t.name)&&(e+=(t.name+t.message).split("\n").length),n.split("\n").slice(e).filter(M).map(function(t){return"\n"+t}).join("")):""}var B=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],H=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(B),W={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function z(t,e){this._e=U(),this.name=t,this.message=e}function K(t,e,n,r){this._e=U(),this.failures=e,this.failedKeys=r,this.successCount=n}function V(t,e){this._e=U(),this.name="BulkError",this.failures=e,this.message=function(t,e){return t+". Errors: "+e.map(function(t){return t.toString()}).filter(function(t,e,n){return n.indexOf(t)===e}).join("\n")}(t,e)}p(z).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+q(this._e,2))}},toString:function(){return this.name+": "+this.message}}),p(K).from(z),p(V).from(z);var G=H.reduce(function(t,e){return t[e]=e+"Error",t},{}),X=z,J=H.reduce(function(t,e){var n=e+"Error";function r(t,r){this._e=U(),this.name=n,t?"string"==typeof t?(this.message=t,this.inner=r||null):"object"==typeof t&&(this.message=t.name+" "+t.message,this.inner=t):(this.message=W[e]||n,this.inner=null)}return p(r).from(X),t[e]=r,t},{});J.Syntax=SyntaxError,J.Type=TypeError,J.Range=RangeError;var Y=B.reduce(function(t,e){return t[e+"Error"]=J[e],t},{});var Q=H.reduce(function(t,e){return-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=J[e]),t},{});function $(){}function Z(t){return t}function tt(t,e){return null==t||t===Z?e:function(n){return e(t(n))}}function et(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function nt(t,e){return t===$?e:function(){var n=t.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?et(r,this.onsuccess):r),o&&(this.onerror=this.onerror?et(o,this.onerror):o),void 0!==i?i:n}}function rt(t,e){return t===$?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?et(n,this.onsuccess):n),r&&(this.onerror=this.onerror?et(r,this.onerror):r)}}function ot(t,e){return t===$?e:function(n){var r=t.apply(this,arguments);a(n,r);var o=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?et(o,this.onsuccess):o),i&&(this.onerror=this.onerror?et(i,this.onerror):i),void 0===r?void 0===s?void 0:s:a(r,s)}}function it(t,e){return t===$?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function at(t,e){return t===$?e:function(){var n=t.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return n.then(function(){return e.apply(r,i)})}return e.apply(this,arguments)}}Q.ModifyError=K,Q.DexieError=z,Q.BulkError=V;var st={},ut=100,ct=7,lt=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(e){var t=i.Promise;return t?[t.resolve(),t.prototype,t.resolve()]:[]}}(),ft=lt[0],ht=lt[1],pt=lt[2],dt=ht&&ht.then,_t=ft&&ft.constructor,yt=lt[3],vt=!!pt,gt=!1,mt=pt?function(){pt.then(qt)}:i.setImmediate?n.bind(null,qt):i.MutationObserver?function(){var t=document.createElement("div");new MutationObserver(function(){qt(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:function(){setTimeout(qt,0)},bt=function(t,e){At.push([t,e]),Et&&(mt(),Et=!1)},wt=!0,Et=!0,kt=[],Ot=[],Tt=null,xt=Z,St={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ce,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(t){try{ce(t[0],t[1])}catch(t){}})}},Rt=St,At=[],Nt=0,It=[];function Ct(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=$,this._lib=!1;var e=this._PSD=Rt;if(L&&(this._stackHolder=U(),this._prev=null,this._numPrev=0),"function"!=typeof t){if(t!==st)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Lt(this,this._value))}this._state=null,this._value=null,++e.ref,function t(e,n){try{n(function(n){if(null===e._state){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&Bt();n&&"function"==typeof n.then?t(e,function(t,e){n instanceof Ct?n._then(t,e):n.then(t,e)}):(e._state=!0,e._value=n,Ft(e)),r&&Ht()}},Lt.bind(null,e))}catch(t){Lt(e,t)}}(this,t)}var Pt={get:function(){var t=Rt,e=Yt;function n(n,r){var o=this,i=!t.global&&(t!==Rt||e!==Yt);i&&te();var a=new Ct(function(e,a){Mt(o,new Dt(ae(n,t,i),ae(r,t,i),e,a,t))});return L&&Ut(a,this),a}return n.prototype=st,n},set:function(t){h(this,"then",t&&t.prototype===st?Pt:{get:function(){return t},set:Pt.set})}};function Dt(t,e,n,r,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=r,this.psd=o}function Lt(t,e){if(Ot.push(e),null===t._state){var n=t._lib&&Bt();e=xt(e),t._state=!1,t._value=e,L&&null!==e&&"object"==typeof e&&!e._promise&&E(function(){var n=function t(e,n){var r;return d(e,n)||(r=s(e))&&t(r,n)}(e,"stack");e._promise=t,h(e,"stack",{get:function(){return gt?n&&(n.get?n.get.apply(e):n.value):t.stack}})}),function(t){kt.some(function(e){return e._value===t._value})||kt.push(t)}(t),Ft(t),n&&Ht()}}function Ft(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Mt(t,e[n]);var o=t._PSD;--o.ref||o.finalize(),0===Nt&&(++Nt,bt(function(){0==--Nt&&Wt()},[]))}function Mt(t,e){if(null!==t._state){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Nt,bt(jt,[n,t,e])}else t._listeners.push(e)}function jt(t,e,n){try{Tt=e;var r,o=e._value;e._state?r=t(o):(Ot.length&&(Ot=[]),r=t(o),-1===Ot.indexOf(o)&&function(t){var e=kt.length;for(;e;)if(kt[--e]._value===t._value)return void kt.splice(e,1)}(e)),n.resolve(r)}catch(t){n.reject(t)}finally{Tt=null,0==--Nt&&Wt(),--n.psd.ref||n.psd.finalize()}}function Ut(t,e){var n=e?e._numPrev+1:0;n<ut&&(t._prev=e,t._numPrev=n)}function qt(){Bt()&&Ht()}function Bt(){var t=wt;return wt=!1,Et=!1,t}function Ht(){var t,e,n;do{for(;At.length>0;)for(t=At,At=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}}while(At.length>0);wt=!0,Et=!0}function Wt(){var t=kt;kt=[],t.forEach(function(t){t._PSD.onunhandled.call(null,t._value,t)});for(var e=It.slice(0),n=e.length;n;)e[--n]()}function zt(t){return new Ct(st,!1,t)}function Kt(t,e){var n=Rt;return function(){var r=Bt(),o=Rt;try{return re(n,!0),t.apply(this,arguments)}catch(t){e&&e(t)}finally{re(o,!1),r&&Ht()}}}l(Ct.prototype,{then:Pt,_then:function(t,e){Mt(this,new Dt(null,null,t,e,Rt))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=arguments[0],n=arguments[1];return"function"==typeof e?this.then(null,function(t){return t instanceof e?n(t):zt(t)}):this.then(null,function(t){return t&&t.name===e?n(t):zt(t)})},finally:function(t){return this.then(function(e){return t(),e},function(e){return t(),zt(e)})},stack:{get:function(){if(this._stack)return this._stack;try{gt=!0;var t=function t(e,n,r){if(n.length===r)return n;var o="";if(!1===e._state){var i,a,s=e._value;null!=s?(i=s.name||"Error",a=s.message||s,o=q(s,0)):(i=s,a=""),n.push(i+(a?": "+a:"")+o)}L&&((o=q(e._stackHolder,2))&&-1===n.indexOf(o)&&n.push(o),e._prev&&t(e._prev,n,r));return n}(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=t),t}finally{gt=!1}}},timeout:function(t,e){var n=this;return t<1/0?new Ct(function(r,o){var i=setTimeout(function(){return o(new J.Timeout(e))},t);n.then(r,o).finally(clearTimeout.bind(null,i))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&h(Ct.prototype,Symbol.toStringTag,"Promise"),St.env=oe(),l(Ct,{all:function(){var t=D.apply(null,arguments).map(ee);return new Ct(function(e,n){0===t.length&&e([]);var r=t.length;t.forEach(function(o,i){return Ct.resolve(o).then(function(n){t[i]=n,--r||e(t)},n)})})},resolve:function(t){if(t instanceof Ct)return t;if(t&&"function"==typeof t.then)return new Ct(function(e,n){t.then(e,n)});var e=new Ct(st,!0,t);return Ut(e,Tt),e},reject:zt,race:function(){var t=D.apply(null,arguments).map(ee);return new Ct(function(e,n){t.map(function(t){return Ct.resolve(t).then(e,n)})})},PSD:{get:function(){return Rt},set:function(t){return Rt=t}},newPSD:$t,usePSD:ie,scheduler:{get:function(){return bt},set:function(t){bt=t}},rejectionMapper:{get:function(){return xt},set:function(t){xt=t}},follow:function(t,e){return new Ct(function(n,r){return $t(function(e,n){var r=Rt;r.unhandleds=[],r.onunhandled=n,r.finalize=et(function(){var t=this;!function(t){It.push(function e(){t();It.splice(It.indexOf(e),1)}),++Nt,bt(function(){0==--Nt&&Wt()},[])}(function(){0===t.unhandleds.length?e():n(t.unhandleds[0])})},r.finalize),t()},e,n,r)})}});var Vt={awaits:0,echoes:0,id:0},Gt=0,Xt=[],Jt=0,Yt=0,Qt=0;function $t(t,e,n,r){var o=Rt,i=Object.create(o);i.parent=o,i.ref=0,i.global=!1,i.id=++Qt;var s=St.env;i.env=vt?{Promise:Ct,PromiseProp:{value:Ct,configurable:!0,writable:!0},all:Ct.all,race:Ct.race,resolve:Ct.resolve,reject:Ct.reject,nthen:se(s.nthen,i),gthen:se(s.gthen,i)}:{},e&&a(i,e),++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=ie(i,t,n,r);return 0===i.ref&&i.finalize(),u}function Zt(){return Vt.id||(Vt.id=++Gt),++Vt.awaits,Vt.echoes+=ct,Vt.id}function te(t){!Vt.awaits||t&&t!==Vt.id||(0==--Vt.awaits&&(Vt.id=0),Vt.echoes=Vt.awaits*ct)}function ee(t){return Vt.echoes&&t&&t.constructor===_t?(Zt(),t.then(function(t){return te(),t},function(t){return te(),le(t)})):t}function ne(){var t=Xt[Xt.length-1];Xt.pop(),re(t,!1)}function re(t,e){var n,r=Rt;if((e?!Vt.echoes||Jt++&&t===Rt:!Jt||--Jt&&t===Rt)||(n=e?function(t){++Yt,Vt.echoes&&0!=--Vt.echoes||(Vt.echoes=Vt.id=0),Xt.push(Rt),re(t,!0)}.bind(null,t):ne,dt.call(ft,n)),t!==Rt&&(Rt=t,r===St&&(St.env=oe()),vt)){var o=St.env.Promise,a=t.env;ht.then=a.nthen,o.prototype.then=a.gthen,(r.global||t.global)&&(Object.defineProperty(i,"Promise",a.PromiseProp),o.all=a.all,o.race=a.race,o.resolve=a.resolve,o.reject=a.reject)}}function oe(){var t=i.Promise;return vt?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:t.all,race:t.race,resolve:t.resolve,reject:t.reject,nthen:ht.then,gthen:t.prototype.then}:{}}function ie(t,e,n,r,o){var i=Rt;try{return re(t,!0),e(n,r,o)}finally{re(i,!1)}}function ae(t,e,n){return"function"!=typeof t?t:function(){var r=Rt;n&&Zt(),re(e,!0);try{return t.apply(this,arguments)}finally{re(r,!1)}}}function se(t,e){return function(n,r){return t.call(this,ae(n,e,!1),ae(r,e,!1))}}var ue="unhandledrejection";function ce(t,e){var n;try{n=e.onuncatched(t)}catch(t){}if(!1!==n)try{var r,o={promise:e,reason:t};if(i.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(ue,!0,!0),a(r,o)):i.CustomEvent&&a(r=new CustomEvent(ue,{detail:o}),o),r&&i.dispatchEvent&&(dispatchEvent(r),!i.PromiseRejectionEvent&&i.onunhandledrejection))try{i.onunhandledrejection(r)}catch(t){}r.defaultPrevented||console.warn("Unhandled rejection: "+(t.stack||t))}catch(t){}}var le=Ct.reject;function fe(t){var e={},n=function(n,r){if(r){for(var o=arguments.length,i=new Array(o-1);--o;)i[o-1]=arguments[o];return e[n].subscribe.apply(null,i),t}if("string"==typeof n)return e[n]};n.addEventType=s;for(var i=1,a=arguments.length;i<a;++i)s(arguments[i]);return n;function s(t,i,a){if("object"!=typeof t){var u;i||(i=it),a||(a=$);var c={subscribers:[],fire:a,subscribe:function(t){-1===c.subscribers.indexOf(t)&&(c.subscribers.push(t),c.fire=i(c.fire,t))},unsubscribe:function(t){c.subscribers=c.subscribers.filter(function(e){return e!==t}),c.fire=c.subscribers.reduce(i,a)}};return e[t]=n[t]=c,c}r(u=t).forEach(function(t){var e=u[t];if(o(e))s(t,u[t][0],u[t][1]);else{if("asap"!==e)throw new J.InvalidArgument("Invalid event config");var n=s(t,Z,function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];n.subscribers.forEach(function(t){m(function(){t.apply(null,e)})})})}})}}var he,pe=String.fromCharCode(65535),de=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(t){return pe}}(),_e=-1/0,ye="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ve="String expected.",ge=[],me="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),be=me,we=me,Ee=function(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)};function ke(t,e){var n,s,u,f,p,d=ke.dependencies,_=a({addons:ke.addons,autoOpen:!0,indexedDB:d.indexedDB,IDBKeyRange:d.IDBKeyRange},e),m=_.addons,x=_.autoOpen,R=_.indexedDB,I=_.IDBKeyRange,C=this._dbSchema={},F=[],M=[],j={},B=null,H=null,W=!1,z=null,G=!1,X="readwrite",Y=this,Q=new Ct(function(t){n=t}),et=new Ct(function(t,e){s=e}),it=!0,st=!!De(R);function ut(t){this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function ct(t,e,n){var o=Y._createTransaction(X,M,C);o.create(e),o._completion.catch(n);var i=o._reject.bind(o);$t(function(){Rt.trans=o,0===t?(r(C).forEach(function(t){lt(e,t,C[t].primKey,C[t].indexes)}),Ct.follow(function(){return Y.on.populate.fire(o)}).catch(i)):function(t,e,n){var o=[],i=F.filter(function(e){return e._cfg.version===t})[0];if(!i)throw new J.Upgrade("Dexie specification of currently installed DB version is missing");C=Y._dbSchema=i._cfg.dbschema;var a=!1;return F.filter(function(e){return e._cfg.version>t}).forEach(function(t){o.push(function(){var r=C,o=t._cfg.dbschema;Pt(r,n),Pt(o,n),C=Y._dbSchema=o;var i=function(t,e){var n={del:[],add:[],change:[]};for(var r in t)e[r]||n.del.push(r);for(r in e){var o=t[r],i=e[r];if(o){var a={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(o.primKey.src!==i.primKey.src)a.recreate=!0,n.change.push(a);else{var s=o.idxByName,u=i.idxByName;for(var c in s)u[c]||a.del.push(c);for(c in u){var l=s[c],f=u[c];l?l.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}else n.add.push([r,i])}return n}(r,o);if(i.add.forEach(function(t){lt(n,t[0],t[1].primKey,t[1].indexes)}),i.change.forEach(function(t){if(t.recreate)throw new J.Upgrade("Not yet support for changing primary key");var e=n.objectStore(t.name);t.add.forEach(function(t){ft(e,t)}),t.change.forEach(function(t){e.deleteIndex(t.name),ft(e,t)}),t.del.forEach(function(t){e.deleteIndex(t)})}),t._cfg.contentUpgrade)return a=!0,Ct.follow(function(){t._cfg.contentUpgrade(e)})}),o.push(function(e){a&&be||function(t,e){for(var n=0;n<e.db.objectStoreNames.length;++n){var r=e.db.objectStoreNames[n];null==t[r]&&e.db.deleteObjectStore(r)}}(t._cfg.dbschema,e)})}),function t(){return o.length?Ct.resolve(o.shift()(e.idbtrans)).then(t):Ct.resolve()}().then(function(){!function(t,e){r(t).forEach(function(n){e.db.objectStoreNames.contains(n)||lt(e,n,t[n].primKey,t[n].indexes)})}(C,n)})}(t,o,e).catch(i)})}function lt(t,e,n,r){var o=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(t){ft(o,t)}),o}function ft(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function ht(t,e,n){this.name=t,this.schema=e,this._tx=n,this.hook=j[t]?j[t].hook:fe(null,{creating:[nt,$],reading:[tt,Z],updating:[ot,$],deleting:[rt,$]})}function pt(t,e,n){return(n?Re:xe)(function(n){t.push(n),e&&e()})}function dt(t,e,n,r,o){return new Ct(function(i,a){var s=n.length,u=s-1;if(0===s)return i();if(r){var c,l=Re(a),f=Te(null);E(function(){for(var r=0;r<s;++r){c={onsuccess:null,onerror:null};var a=n[r];o.call(c,a[0],a[1],e);var h=t.delete(a[0]);h._hookCtx=c,h.onerror=l,h.onsuccess=r===u?Te(i):f}},function(t){throw c.onerror&&c.onerror(t),t})}else for(var h=0;h<s;++h){var p=t.delete(n[h]);p.onerror=xe(a),h===u&&(p.onsuccess=Kt(function(){return i()}))}})}function vt(t,e,n,r){var o=this;this.db=Y,this.mode=t,this.storeNames=e,this.idbtrans=null,this.on=fe(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ct(function(t,e){o._resolve=t,o._reject=e}),this._completion.then(function(){o.active=!1,o.on.complete.fire()},function(t){var e=o.active;return o.active=!1,o.on.error.fire(t),o.parent?o.parent._reject(t):e&&o.idbtrans&&o.idbtrans.abort(),le(t)})}function gt(t,e,n){this._ctx={table:t,index:":id"===e?null:e,or:n}}function mt(t,e){var n=null,r=null;if(e)try{n=e()}catch(t){r=t}var o=t._ctx,i=o.table;this._ctx={table:i,index:o.index,isPrimKey:!o.index||i.schema.primKey.keyPath&&o.index===i.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:o.or,valueMapper:i.hook.reading.fire}}function bt(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function wt(t,e){return t._cfg.version-e._cfg.version}function Et(t,e,n){e.forEach(function(e){var r=n[e];t.forEach(function(t){e in t||(t===vt.prototype||t instanceof vt?h(t,e,{get:function(){return this.table(e)}}):t[e]=new ht(e,r))})})}function kt(t,e,n,r,o,i){var a=Kt(i?function(t,e,r){return n(i(t),e,r)}:n,o);t.onerror||(t.onerror=xe(o)),t.onsuccess=w(e?function(){var n=t.result;if(n){var i=function(){n.continue()};e(n,function(t){i=t},r,o)&&a(n.value,n,function(t){i=t}),i()}else r()}:function(){var e=t.result;if(e){var n=function(){e.continue()};a(e.value,e,function(t){n=t}),n()}else r()},o)}function Ot(t,e){return R.cmp(t,e)}function Tt(t,e){return Ot(t,e)>0?t:e}function xt(t,e){return R.cmp(t,e)}function St(t,e){return R.cmp(e,t)}function At(t,e){return t<e?-1:t===e?0:1}function Nt(t,e){return t>e?-1:t===e?0:1}function It(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}function Pt(t,e){for(var n=e.db.objectStoreNames,r=0;r<n.length;++r){var o=n[r],a=e.objectStore(o);u="getAll"in a;for(var s=0;s<a.indexNames.length;++s){var c=a.indexNames[s],l=a.index(c).keyPath,f="string"==typeof l?l:"["+y(l).join("+")+"]";if(t[o]){var h=t[o].idxByName[f];h&&(h.name=c)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(u=!1)}function Dt(t){Y.on("blocked").fire(t),ge.filter(function(t){return t.name===Y.name&&t!==Y&&!t._vcFired}).map(function(e){return e.on("versionchange").fire(t)})}this.version=function(t){if(B||W)throw new J.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var e=F.filter(function(e){return e._cfg.version===t})[0];return e||(e=new ut(t),F.push(e),F.sort(wt),it=!1,e)},a(ut.prototype,{stores:function(t){this._cfg.storesSource=this._cfg.storesSource?a(this._cfg.storesSource,t):t;var e={};F.forEach(function(t){a(e,t._cfg.storesSource)});var n=this._cfg.dbschema={};return this._parseStoresSpec(e,n),C=Y._dbSchema=n,[j,Y,vt.prototype].forEach(function(t){for(var e in t)t[e]instanceof ht&&delete t[e]}),Et([j,Y,vt.prototype,this._cfg.tables],r(n),n),M=r(n),this},upgrade:function(t){return this._cfg.contentUpgrade=t,this},_parseStoresSpec:function(t,e){r(t).forEach(function(n){if(null!==t[n]){var r={},i=function(t){var e=[];return t.split(",").forEach(function(t){var n=(t=t.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;e.push(new Ie(n,r||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),o(r),/\./.test(t)))}),e}(t[n]),a=i.shift();if(a.multi)throw new J.Schema("Primary key cannot be multi-valued");a.keyPath&&O(r,a.keyPath,a.auto?0:a.keyPath),i.forEach(function(t){if(t.auto)throw new J.Schema("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new J.Schema("Index must have a name and cannot be an empty string");O(r,t.keyPath,t.compound?t.keyPath.map(function(){return""}):"")}),e[n]=new Ce(n,a,i,r)}})}}),this._allTables=j,this._createTransaction=function(t,e,n,r){return new vt(t,e,n,r)},this._whenReady=function(t){return G||Rt.letThrough?t():new Ct(function(t,e){if(!W){if(!x)return void e(new J.DatabaseClosed);Y.open().catch($)}Q.then(t,e)}).then(t)},this.verno=0,this.open=function(){if(W||B)return Q.then(function(){return H?le(H):Y});L&&(et._stackHolder=U()),W=!0,H=null,G=!1;var e=n,o=null;return Ct.race([et,new Ct(function(e,n){if(!R)throw new J.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var i=it?R.open(t):R.open(t,Math.round(10*Y.verno));if(!i)throw new J.MissingAPI("IndexedDB API not available");i.onerror=xe(n),i.onblocked=Kt(Dt),i.onupgradeneeded=Kt(function(e){if(o=i.transaction,it&&!Y._allowEmptyDB){i.onerror=Ae,o.abort(),i.result.close();var r=R.deleteDatabase(t);r.onsuccess=r.onerror=Kt(function(){n(new J.NoSuchDatabase("Database "+t+" doesnt exist"))})}else{o.onerror=xe(n),ct((e.oldVersion>Math.pow(2,62)?0:e.oldVersion)/10,o,n)}},n),i.onsuccess=Kt(function(){if(o=null,B=i.result,ge.push(Y),it)!function(){if(Y.verno=B.version/10,Y._dbSchema=C={},0===(M=y(B.objectStoreNames,0)).length)return;var t=B.transaction(Pe(M),"readonly");M.forEach(function(e){for(var n=t.objectStore(e),r=n.keyPath,o=r&&"string"==typeof r&&-1!==r.indexOf("."),i=new Ie(r,r||"",!1,!1,!!n.autoIncrement,r&&"string"!=typeof r,o),a=[],s=0;s<n.indexNames.length;++s){var u=n.index(n.indexNames[s]);r=u.keyPath,o=r&&"string"==typeof r&&-1!==r.indexOf(".");var c=new Ie(u.name,r,!!u.unique,!!u.multiEntry,!1,r&&"string"!=typeof r,o);a.push(c)}C[e]=new Ce(e,i,a,{})}),Et([j],r(C),C)}();else if(B.objectStoreNames.length>0)try{Pt(C,B.transaction(Pe(B.objectStoreNames),"readonly"))}catch(t){}B.onversionchange=Kt(function(t){Y._vcFired=!0,Y.on("versionchange").fire(t)}),st||"__dbnames"===t||he.dbnames.put({name:t}).catch($),e()},n)})]).then(function(){return z=[],Ct.resolve(ke.vip(Y.on.ready.fire)).then(function t(){if(z.length>0){var e=z.reduce(at,$);return z=[],Ct.resolve(ke.vip(e)).then(t)}})}).finally(function(){z=null}).then(function(){return W=!1,Y}).catch(function(t){try{o&&o.abort()}catch(t){}return W=!1,Y.close(),le(H=t)}).finally(function(){G=!0,e()})},this.close=function(){var t=ge.indexOf(Y);if(t>=0&&ge.splice(t,1),B){try{B.close()}catch(t){}B=null}x=!1,H=new J.DatabaseClosed,W&&s(H),Q=new Ct(function(t){n=t}),et=new Ct(function(t,e){s=e})},this.delete=function(){var e=arguments.length>0;return new Ct(function(n,r){if(e)throw new J.InvalidArgument("Arguments not allowed in db.delete()");function o(){Y.close();var e=R.deleteDatabase(t);e.onsuccess=Kt(function(){st||he.dbnames.delete(t).catch($),n()}),e.onerror=xe(r),e.onblocked=Dt}W?Q.then(o):o()})},this.backendDB=function(){return B},this.isOpen=function(){return null!==B},this.hasBeenClosed=function(){return H&&H instanceof J.DatabaseClosed},this.hasFailed=function(){return null!==H},this.dynamicallyOpened=function(){return it},this.name=t,l(this,{tables:{get:function(){return r(j).map(function(t){return j[t]})}}}),this.on=fe(this,"populate","blocked","versionchange",{ready:[at,$]}),this.on.ready.subscribe=v(this.on.ready.subscribe,function(t){return function(e,n){ke.vip(function(){G?(H||Ct.resolve().then(e),n&&t(e)):z?(z.push(e),n&&t(e)):(t(e),n||t(function t(){Y.on.ready.unsubscribe(e),Y.on.ready.unsubscribe(t)}))})}}),this.transaction=function(){var t=function(t,e,n){var r=arguments.length;if(r<2)throw new J.InvalidArgument("Too few arguments");var o=new Array(r-1);for(;--r;)o[r-1]=arguments[r];n=o.pop();var i=S(o);return[t,i,n]}.apply(this,arguments);return this._transaction.apply(this,t)},this._transaction=function(t,e,n){var r=Rt.trans;r&&r.db===Y&&-1===t.indexOf("!")||(r=null);var o=-1!==t.indexOf("?");t=t.replace("!","").replace("?","");try{var i=e.map(function(t){var e=t instanceof ht?t.name:t;if("string"!=typeof e)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e});if("r"==t||"readonly"==t)t="readonly";else{if("rw"!=t&&t!=X)throw new J.InvalidArgument("Invalid transaction mode: "+t);t=X}if(r){if("readonly"===r.mode&&t===X){if(!o)throw new J.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&i.forEach(function(t){if(r&&-1===r.storeNames.indexOf(t)){if(!o)throw new J.SubTransaction("Table "+t+" not included in parent transaction.");r=null}}),o&&r&&!r.active&&(r=null)}}catch(t){return r?r._promise(null,function(e,n){n(t)}):le(t)}return r?r._promise(t,a,"lock"):Rt.trans?ie(Rt.transless,function(){return Y._whenReady(a)}):Y._whenReady(a);function a(){return Ct.resolve().then(function(){var e,o=Rt.transless||Rt,a=Y._createTransaction(t,i,C,r),s={trans:a,transless:o};r?a.idbtrans=r.idbtrans:a.create(),n.constructor===yt&&Zt();var u=Ct.follow(function(){if(e=n.call(a,a))if(e.constructor===_t){var t=te.bind(null,null);e.then(t,t)}else"function"==typeof e.next&&"function"==typeof e.throw&&(e=Ne(e))},s);return(e&&"function"==typeof e.then?Ct.resolve(e).then(function(t){return a.active?t:le(new J.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):u.then(function(){return e})).then(function(t){return r&&a._resolve(),a._completion.then(function(){return t})}).catch(function(t){return a._reject(t),le(t)})})}},this.table=function(t){if(!c(j,t))throw new J.InvalidTable("Table "+t+" does not exist");return j[t]},l(ht.prototype,{_trans:function(t,e,n){var r=this._tx||Rt.trans;return r&&r.db===Y?r===Rt.trans?r._promise(t,e,n):$t(function(){return r._promise(t,e,n)},{trans:r,transless:Rt.transless||Rt}):function t(e,n,r){if(G||Rt.letThrough){var o=Y._createTransaction(e,n,C);try{o.create()}catch(t){return le(t)}return o._promise(e,function(t,e){return $t(function(){return Rt.trans=o,r(t,e,o)})}).then(function(t){return o._completion.then(function(){return t})})}if(!W){if(!x)return le(new J.DatabaseClosed);Y.open().catch($)}return Q.then(function(){return t(e,n,r)})}(t,[this.name],e)},_idbstore:function(t,e,n){var r=this.name;return this._trans(t,function(t,n,o){if(-1===o.storeNames.indexOf(r))throw new J.NotFound("Table"+r+" not part of transaction");return e(t,n,o.idbtrans.objectStore(r),o)},n)},get:function(t,e){if(t&&t.constructor===Object)return this.where(t).first(e);var n=this;return this._idbstore("readonly",function(e,r,o){var i=o.get(t);i.onerror=xe(r),i.onsuccess=Kt(function(){e(n.hook.reading.fire(i.result))},r)}).then(e)},where:function(t){if("string"==typeof t)return new gt(this,t);if(o(t))return new gt(this,"["+t.join("+")+"]");var e=r(t);if(1===e.length)return this.where(e[0]).equals(t[e[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(t){return t.compound&&e.every(function(e){return t.keyPath.indexOf(e)>=0})&&t.keyPath.every(function(t){return e.indexOf(t)>=0})})[0];if(n&&de!==pe)return this.where(n.name).equals(n.keyPath.map(function(e){return t[e]}));n||console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a compound index ["+e.join("+")+"]");var i=this.schema.idxByName,a=e.reduce(function(e,n){return[e[0]||i[n],e[0]||!i[n]?It(e[1],function(e){return""+k(e,n)==""+t[n]}):e[1]]},[null,null]),s=a[0];return s?this.where(s.name).equals(t[s.keyPath]).filter(a[1]):n?this.filter(a[1]):this.where(e).equals("")},count:function(t){return this.toCollection().count(t)},offset:function(t){return this.toCollection().offset(t)},limit:function(t){return this.toCollection().limit(t)},reverse:function(){return this.toCollection().reverse()},filter:function(t){return this.toCollection().and(t)},each:function(t){return this.toCollection().each(t)},toArray:function(t){return this.toCollection().toArray(t)},orderBy:function(t){return new mt(new gt(this,o(t)?"["+t.join("+")+"]":t))},toCollection:function(){return new mt(new gt(this))},mapToClass:function(t,e){this.schema.mappedClass=t;var n=Object.create(t.prototype);e&&Oe(n,e),this.schema.instanceTemplate=n;var r=function(e){if(!e)return e;var n=Object.create(t.prototype);for(var r in e)if(c(e,r))try{n[r]=e[r]}catch(t){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),t},defineClass:function(t){return this.mapToClass(ke.defineClass(t),t)},bulkDelete:function(t){return this.hook.deleting.fire===$?this._idbstore(X,function(e,n,r,o){e(dt(r,o,t,!1,$))}):this.where(":id").anyOf(t).delete().then(function(){})},bulkPut:function(t,e){var n=this;return this._idbstore(X,function(r,o,i){if(!i.keyPath&&!n.schema.primKey.auto&&!e)throw new J.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(i.keyPath&&e)throw new J.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(e&&e.length!==t.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");if(0===t.length)return r();var a,s,u=function(t){0===c.length?r(t):o(new V(n.name+".bulkPut(): "+c.length+" of "+l+" operations failed",c))},c=[],l=t.length,f=n;if(n.hook.creating.fire===$&&n.hook.updating.fire===$){s=pt(c);for(var h=0,p=t.length;h<p;++h)(a=e?i.put(t[h],e[h]):i.put(t[h])).onerror=s;a.onerror=pt(c,u),a.onsuccess=Se(u)}else{var d=e||i.keyPath&&t.map(function(t){return k(t,i.keyPath)}),_=d&&b(d,function(e,n){return null!=e&&[e,t[n]]});(d?f.where(":id").anyOf(d.filter(function(t){return null!=t})).modify(function(){this.value=_[this.primKey],_[this.primKey]=null}).catch(K,function(t){c=t.failures}).then(function(){for(var n=[],r=e&&[],o=d.length-1;o>=0;--o){var i=d[o];(null==i||_[i])&&(n.push(t[o]),e&&r.push(i),null!=i&&(_[i]=null))}return n.reverse(),e&&r.reverse(),f.bulkAdd(n,r)}).then(function(t){var e=d[d.length-1];return null!=e?e:t}):f.bulkAdd(t)).then(u).catch(V,function(t){c=c.concat(t.failures),u()}).catch(o)}},"locked")},bulkAdd:function(t,e){var n=this,r=this.hook.creating.fire;return this._idbstore(X,function(o,i,a,s){if(!a.keyPath&&!n.schema.primKey.auto&&!e)throw new J.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(a.keyPath&&e)throw new J.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(e&&e.length!==t.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");if(0===t.length)return o();function u(t){0===h.length?o(t):i(new V(n.name+".bulkAdd(): "+h.length+" of "+p+" operations failed",h))}var c,l,f,h=[],p=t.length;if(r!==$){var d,_=a.keyPath;l=pt(h,null,!0),f=Te(null),E(function(){for(var n=0,o=t.length;n<o;++n){d={onerror:null,onsuccess:null};var i=e&&e[n],u=t[n],h=e?i:_?k(u,_):void 0,p=r.call(d,h,u,s);null==h&&null!=p&&(_?O(u=A(u),_,p):i=p),(c=null!=i?a.add(u,i):a.add(u))._hookCtx=d,n<o-1&&(c.onerror=l,d.onsuccess&&(c.onsuccess=f))}},function(t){throw d.onerror&&d.onerror(t),t}),c.onerror=pt(h,u,!0),c.onsuccess=Te(u)}else{l=pt(h);for(var y=0,v=t.length;y<v;++y)(c=e?a.add(t[y],e[y]):a.add(t[y])).onerror=l;c.onerror=pt(h,u),c.onsuccess=Se(u)}})},add:function(t,e){var n=this.hook.creating.fire;return this._idbstore(X,function(r,o,i,a){var s={onsuccess:null,onerror:null};if(n!==$){var u=null!=e?e:i.keyPath?k(t,i.keyPath):void 0,c=n.call(s,u,t,a);null==u&&null!=c&&(i.keyPath?O(t,i.keyPath,c):e=c)}try{var l=null!=e?i.add(t,e):i.add(t);l._hookCtx=s,l.onerror=Re(o),l.onsuccess=Te(function(e){var n=i.keyPath;n&&O(t,n,e),r(e)})}catch(t){throw s.onerror&&s.onerror(t),t}})},put:function(t,e){var n=this,r=this.hook.creating.fire,o=this.hook.updating.fire;if(r!==$||o!==$){var i=this.schema.primKey.keyPath,a=void 0!==e?e:i&&k(t,i);return null==a?this.add(t):(t=A(t),this._trans(X,function(){return n.where(":id").equals(a).modify(function(){this.value=t}).then(function(r){return 0===r?n.add(t,e):a})},"locked"))}return this._idbstore(X,function(n,r,o){var i=void 0!==e?o.put(t,e):o.put(t);i.onerror=xe(r),i.onsuccess=Kt(function(e){var r=o.keyPath;r&&O(t,r,e.target.result),n(i.result)})})},delete:function(t){return this.hook.deleting.subscribers.length?this.where(":id").equals(t).delete():this._idbstore(X,function(e,n,r){var o=r.delete(t);o.onerror=xe(n),o.onsuccess=Kt(function(){e(o.result)})})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(X,function(t,e,n){var r=n.clear();r.onerror=xe(e),r.onsuccess=Kt(function(){t(r.result)})})},update:function(t,e){if("object"!=typeof e||o(e))throw new J.InvalidArgument("Modifications must be an object.");if("object"!=typeof t||o(t))return this.where(":id").equals(t).modify(e);r(e).forEach(function(n){O(t,n,e[n])});var n=k(t,this.schema.primKey.keyPath);return void 0===n?le(new J.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(e)}}),l(vt.prototype,{_lock:function(){return g(!Rt.global),++this._reculock,1!==this._reculock||Rt.global||(Rt.lockOwnerFor=this),this},_unlock:function(){if(g(!Rt.global),0==--this._reculock)for(Rt.global||(Rt.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{ie(t[1],t[0])}catch(t){}}return this},_locked:function(){return this._reculock&&Rt.lockOwnerFor!==this},create:function(t){var e=this;if(!this.mode)return this;if(g(!this.idbtrans),!t&&!B)switch(H&&H.name){case"DatabaseClosedError":throw new J.DatabaseClosed(H);case"MissingAPIError":throw new J.MissingAPI(H.message,H);default:throw new J.OpenFailed(H)}if(!this.active)throw new J.TransactionInactive;return g(null===this._completion._state),(t=this.idbtrans=t||B.transaction(Pe(this.storeNames),this.mode)).onerror=Kt(function(n){Ae(n),e._reject(t.error)}),t.onabort=Kt(function(n){Ae(n),e.active&&e._reject(new J.Abort(t.error)),e.active=!1,e.on("abort").fire(n)}),t.oncomplete=Kt(function(){e.active=!1,e._resolve()}),this},_promise:function(t,e,n){var r=this;if(t===X&&this.mode!==X)return le(new J.ReadOnly("Transaction is readonly"));if(!this.active)return le(new J.TransactionInactive);if(this._locked())return new Ct(function(o,i){r._blockedFuncs.push([function(){r._promise(t,e,n).then(o,i)},Rt])});if(n)return $t(function(){var t=new Ct(function(t,n){r._lock();var o=e(t,n,r);o&&o.then&&o.then(t,n)});return t.finally(function(){return r._unlock()}),t._lib=!0,t});var o=new Ct(function(t,n){var o=e(t,n,r);o&&o.then&&o.then(t,n)});return o._lib=!0,o},_root:function(){return this.parent?this.parent._root():this},waitFor:function(t){var e=this._root();if(t=Ct.resolve(t),e._waitingFor)e._waitingFor=e._waitingFor.then(function(){return t});else{e._waitingFor=t,e._waitingQueue=[];var n=e.idbtrans.objectStore(e.storeNames[0]);!function t(){for(++e._spinCount;e._waitingQueue.length;)e._waitingQueue.shift()();e._waitingFor&&(n.get(-1/0).onsuccess=t)}()}var r=e._waitingFor;return new Ct(function(n,o){t.then(function(t){return e._waitingQueue.push(Kt(n.bind(null,t)))},function(t){return e._waitingQueue.push(Kt(o.bind(null,t)))}).finally(function(){e._waitingFor===r&&(e._waitingFor=null)})})},abort:function(){this.active&&this._reject(new J.Abort),this.active=!1},tables:{get:(f="Transaction.tables",p=function(){return j},function(){return console.warn(f+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+q(U(),1)),p.apply(this,arguments)})},table:function(t){return new ht(t,Y.table(t).schema,this)}}),l(gt.prototype,function(){function t(t,e,n){var r=t instanceof gt?new mt(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function e(t){return new mt(t,function(){return I.only("")}).limit(0)}function n(t,e,n,r,o,i){for(var a=Math.min(t.length,r.length),s=-1,u=0;u<a;++u){var c=e[u];if(c!==r[u])return o(t[u],n[u])<0?t.substr(0,u)+n[u]+n.substr(u+1):o(t[u],r[u])<0?t.substr(0,u)+r[u]+n.substr(u+1):s>=0?t.substr(0,s)+e[s]+n.substr(s+1):null;o(t[u],c)<0&&(s=u)}return a<r.length&&"next"===i?t+n.substr(t.length):a<t.length&&"prev"===i?t.substr(0,n.length):s<0?null:t.substr(0,s)+r[s]+n.substr(s+1)}function r(e,r,o,i){var a,s,u,c,l,f,h,p=o.length;if(!o.every(function(t){return"string"==typeof t}))return t(e,ve);function d(t){a=function(t){return"next"===t?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}(t),s=function(t){return"next"===t?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}(t),u="next"===t?At:Nt;var e=o.map(function(t){return{lower:s(t),upper:a(t)}}).sort(function(t,e){return u(t.lower,e.lower)});c=e.map(function(t){return t.upper}),l=e.map(function(t){return t.lower}),f=t,h="next"===t?"":i}d("next");var _=new mt(e,function(){return I.bound(c[0],l[p-1]+i)});_._ondirectionchange=function(t){d(t)};var y=0;return _._addAlgorithm(function(t,e,o){var i=t.key;if("string"!=typeof i)return!1;var a=s(i);if(r(a,l,y))return!0;for(var d=null,_=y;_<p;++_){var v=n(i,a,c[_],l[_],u,f);null===v&&null===d?y=_+1:(null===d||u(d,v)>0)&&(d=v)}return e(null!==d?function(){t.continue(d+h)}:o),!1}),_}return{between:function(n,r,o,i){o=!1!==o,i=!0===i;try{return Ot(n,r)>0||0===Ot(n,r)&&(o||i)&&(!o||!i)?e(this):new mt(this,function(){return I.bound(n,r,!o,!i)})}catch(e){return t(this,ye)}},equals:function(t){return new mt(this,function(){return I.only(t)})},above:function(t){return new mt(this,function(){return I.lowerBound(t,!0)})},aboveOrEqual:function(t){return new mt(this,function(){return I.lowerBound(t)})},below:function(t){return new mt(this,function(){return I.upperBound(t,!0)})},belowOrEqual:function(t){return new mt(this,function(){return I.upperBound(t)})},startsWith:function(e){return"string"!=typeof e?t(this,ve):this.between(e,e+pe,!0,!0)},startsWithIgnoreCase:function(t){return""===t?this.startsWith(t):r(this,function(t,e){return 0===t.indexOf(e[0])},[t],pe)},equalsIgnoreCase:function(t){return r(this,function(t,e){return t===e[0]},[t],"")},anyOfIgnoreCase:function(){var t=D.apply(P,arguments);return 0===t.length?e(this):r(this,function(t,e){return-1!==e.indexOf(t)},t,"")},startsWithAnyOfIgnoreCase:function(){var t=D.apply(P,arguments);return 0===t.length?e(this):r(this,function(t,e){return e.some(function(e){return 0===t.indexOf(e)})},t,pe)},anyOf:function(){var n=D.apply(P,arguments),r=xt;try{n.sort(r)}catch(e){return t(this,ye)}if(0===n.length)return e(this);var o=new mt(this,function(){return I.bound(n[0],n[n.length-1])});o._ondirectionchange=function(t){r="next"===t?xt:St,n.sort(r)};var i=0;return o._addAlgorithm(function(t,e,o){for(var a=t.key;r(a,n[i])>0;)if(++i===n.length)return e(o),!1;return 0===r(a,n[i])||(e(function(){t.continue(n[i])}),!1)}),o},notEqual:function(t){return this.inAnyRange([[_e,t],[t,de]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var e=D.apply(P,arguments);if(0===e.length)return new mt(this);try{e.sort(xt)}catch(e){return t(this,ye)}var n=e.reduce(function(t,e){return t?t.concat([[t[t.length-1][1],e]]):[[_e,e]]},null);return n.push([e[e.length-1],de]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(n,r){if(0===n.length)return e(this);if(!n.every(function(t){return void 0!==t[0]&&void 0!==t[1]&&xt(t[0],t[1])<=0}))return t(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",J.InvalidArgument);var o=!r||!1!==r.includeLowers,i=r&&!0===r.includeUppers;var a,s=xt;function u(t,e){return s(t[0],e[0])}try{(a=n.reduce(function(t,e){for(var n=0,r=t.length;n<r;++n){var o=t[n];if(Ot(e[0],o[1])<0&&Ot(e[1],o[0])>0){o[0]=(i=o[0],a=e[0],Ot(i,a)<0?i:a),o[1]=Tt(o[1],e[1]);break}}var i,a;return n===r&&t.push(e),t},[])).sort(u)}catch(e){return t(this,ye)}var c=0,l=i?function(t){return xt(t,a[c][1])>0}:function(t){return xt(t,a[c][1])>=0},f=o?function(t){return St(t,a[c][0])>0}:function(t){return St(t,a[c][0])>=0};var h=l,p=new mt(this,function(){return I.bound(a[0][0],a[a.length-1][1],!o,!i)});return p._ondirectionchange=function(t){"next"===t?(h=l,s=xt):(h=f,s=St),a.sort(u)},p._addAlgorithm(function(t,e,n){for(var r=t.key;h(r);)if(++c===a.length)return e(n),!1;return!!function(t){return!l(t)&&!f(t)}(r)||0!==Ot(r,a[c][1])&&0!==Ot(r,a[c][0])&&(e(function(){s===xt?t.continue(a[c][0]):t.continue(a[c][1])}),!1)}),p},startsWithAnyOf:function(){var n=D.apply(P,arguments);return n.every(function(t){return"string"==typeof t})?0===n.length?e(this):this.inAnyRange(n.map(function(t){return[t,t+pe]})):t(this,"startsWithAnyOf() only works with strings")}}}),l(mt.prototype,function(){function t(t,e){t.filter=It(t.filter,e)}function e(t,e,n){var r=t.replayFilter;t.replayFilter=r?function(){return It(r(),e())}:e,t.justLimit=n&&!r}function n(t,e){if(t.isPrimKey)return e;var n=t.table.schema.idxByName[t.index];if(!n)throw new J.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return e.index(n.name)}function o(t,e){var r=n(t,e);return t.keysOnly&&"openKeyCursor"in r?r.openKeyCursor(t.range||null,t.dir+t.unique):r.openCursor(t.range||null,t.dir+t.unique)}function i(t,e,n,r,i){var a=t.replayFilter?It(t.filter,t.replayFilter()):t.filter;t.or?function(){var s={},u=0;function l(){2==++u&&n()}function f(t,n,o){if(!a||a(n,o,l,r)){var i=n.primaryKey,u=""+i;"[object ArrayBuffer]"===u&&(u=""+new Uint8Array(i)),c(s,u)||(s[u]=!0,e(t,n,o))}}t.or._iterate(f,l,r,i),kt(o(t,i),t.algorithm,f,l,r,!t.keysOnly&&t.valueMapper)}():kt(o(t,i),It(t.algorithm,a),e,n,r,!t.keysOnly&&t.valueMapper)}return{_read:function(t,e){var n=this._ctx;return n.error?n.table._trans(null,le.bind(null,n.error)):n.table._idbstore("readonly",t).then(e)},_write:function(t){var e=this._ctx;return e.error?e.table._trans(null,le.bind(null,e.error)):e.table._idbstore(X,t,"locked")},_addAlgorithm:function(t){var e=this._ctx;e.algorithm=It(e.algorithm,t)},_iterate:function(t,e,n,r){return i(this._ctx,t,e,n,r)},clone:function(t){var e=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return t&&a(n,t),e._ctx=n,e},raw:function(){return this._ctx.valueMapper=null,this},each:function(t){var e=this._ctx;return this._read(function(n,r,o){i(e,t,n,r,o)})},count:function(t){var e=this._ctx;if(bt(e,!0))return this._read(function(t,r,o){var i=n(e,o),a=e.range?i.count(e.range):i.count();a.onerror=xe(r),a.onsuccess=function(n){t(Math.min(n.target.result,e.limit))}},t);var r=0;return this._read(function(t,n,o){i(e,function(){return++r,!1},function(){t(r)},n,o)},t)},sortBy:function(t,e){var n=t.split(".").reverse(),r=n[0],o=n.length-1;function i(t,e){return e?i(t[n[e]],e-1):t[r]}var a="next"===this._ctx.dir?1:-1;function s(t,e){var n=i(t,o),r=i(e,o);return n<r?-a:n>r?a:0}return this.toArray(function(t){return t.sort(s)}).then(e)},toArray:function(t){var e=this._ctx;return this._read(function(t,r,o){if(u&&"next"===e.dir&&bt(e,!0)&&e.limit>0){var a=e.table.hook.reading.fire,s=n(e,o),c=e.limit<1/0?s.getAll(e.range,e.limit):s.getAll(e.range);c.onerror=xe(r),c.onsuccess=Se(a===Z?t:function(e){try{t(e.map(a))}catch(t){r(t)}})}else{var l=[];i(e,function(t){l.push(t)},function(){t(l)},r,o)}},t)},offset:function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,bt(n)?e(n,function(){var e=t;return function(t,n){return 0===e||(1===e?(--e,!1):(n(function(){t.advance(e),e=0}),!1))}}):e(n,function(){var e=t;return function(){return--e<0}}),this)},limit:function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),e(this._ctx,function(){var e=t;return function(t,n,r){return--e<=0&&n(r),e>=0}},!0),this},until:function(e,n){return t(this._ctx,function(t,r,o){return!e(t.value)||(r(o),n)}),this},first:function(t){return this.limit(1).toArray(function(t){return t[0]}).then(t)},last:function(t){return this.reverse().first(t)},filter:function(e){var n,r;return t(this._ctx,function(t){return e(t.value)}),n=this._ctx,r=e,n.isMatch=It(n.isMatch,r),this},and:function(t){return this.filter(t)},or:function(t){return new gt(this._ctx.table,t,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,n){t(n.key,n)})},eachUniqueKey:function(t){return this._ctx.unique="unique",this.eachKey(t)},eachPrimaryKey:function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,n){t(n.primaryKey,n)})},keys:function(t){var e=this._ctx;e.keysOnly=!e.isMatch;var n=[];return this.each(function(t,e){n.push(e.key)}).then(function(){return n}).then(t)},primaryKeys:function(t){var e=this._ctx;if(u&&"next"===e.dir&&bt(e,!0)&&e.limit>0)return this._read(function(t,r,o){var i=n(e,o),a=e.limit<1/0?i.getAllKeys(e.range,e.limit):i.getAllKeys(e.range);a.onerror=xe(r),a.onsuccess=Se(t)}).then(t);e.keysOnly=!e.isMatch;var r=[];return this.each(function(t,e){r.push(e.primaryKey)}).then(function(){return r}).then(t)},uniqueKeys:function(t){return this._ctx.unique="unique",this.keys(t)},firstKey:function(t){return this.limit(1).keys(function(t){return t[0]}).then(t)},lastKey:function(t){return this.reverse().firstKey(t)},distinct:function(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return t(this._ctx,function(t){var e=t.primaryKey.toString(),n=c(r,e);return r[e]=!0,!n}),this},modify:function(t){var e=this,n=this._ctx.table.hook,o=n.updating.fire,i=n.deleting.fire;return this._write(function(n,s,u,l){var f;if("function"==typeof t)f=o===$&&i===$?t:function(e){var n=A(e);if(!1===t.call(this,e,this))return!1;if(c(this,"value")){var a=N(n,this.value),s=o.call(this,a,this.primKey,n,l);s&&(e=this.value,r(s).forEach(function(t){O(e,t,s[t])}))}else i.call(this,this.primKey,e,l)};else if(o===$){var h=r(t),p=h.length;f=function(e){for(var n=!1,r=0;r<p;++r){var o=h[r],i=t[o];k(e,o)!==i&&(O(e,o,i),n=!0)}return n}}else{var d=t;t=T(d),f=function(e){var n=!1,i=o.call(this,t,this.primKey,A(e),l);return i&&a(t,i),r(t).forEach(function(r){var o=t[r];k(e,r)!==o&&(O(e,r,o),n=!0)}),i&&(t=T(d)),n}}var _=0,y=0,v=!1,g=[],m=[],b=null;function w(t){return t&&(g.push(t),m.push(b)),s(new K("Error modifying one or more objects",g,y,m))}function x(){v&&y+g.length===_&&(g.length>0?w():n(y))}e.clone().raw()._iterate(function(t,e){b=e.primaryKey;var n={primKey:e.primaryKey,value:t,onsuccess:null,onerror:null};function r(t){return g.push(t),m.push(n.primKey),x(),!0}if(!1!==f.call(n,t,n)){var o=!c(n,"value");++_,E(function(){var t=o?e.delete():e.update(n.value);t._hookCtx=n,t.onerror=Re(r),t.onsuccess=Te(function(){++y,x()})},r)}else n.onsuccess&&n.onsuccess(n.value)},function(){v=!0,x()},w,u)})},delete:function(){var t=this,e=this._ctx,n=e.range,r=e.table.hook.deleting.fire,o=r!==$;if(!o&&bt(e)&&(e.isPrimKey&&!we||!n))return this._write(function(t,e,r){var o=xe(e),i=n?r.count(n):r.count();i.onerror=o,i.onsuccess=function(){var a=i.result;E(function(){var e=n?r.delete(n):r.clear();e.onerror=o,e.onsuccess=function(){return t(a)}},function(t){return e(t)})}});var i=o?2e3:1e4;return this._write(function(n,a,s,u){var c=0,l=t.clone({keysOnly:!e.isMatch&&!o}).distinct().limit(i).raw(),f=[],h=function(){return l.each(o?function(t,e){f.push([e.primaryKey,e.value])}:function(t,e){f.push(e.primaryKey)}).then(function(){return o?f.sort(function(t,e){return xt(t[0],e[0])}):f.sort(xt),dt(s,u,f,o,r)}).then(function(){var t=f.length;return c+=t,f=[],t<i?c:h()})};n(h())})}}}),a(this,{Collection:mt,Table:ht,Transaction:vt,Version:ut,WhereClause:gt}),Y.on("versionchange",function(t){t.newVersion>0?console.warn("Another connection wants to upgrade database '"+Y.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+Y.name+"'. Closing db now to resume the delete request."),Y.close()}),Y.on("blocked",function(t){!t.newVersion||t.newVersion<t.oldVersion?console.warn("Dexie.delete('"+Y.name+"') was blocked"):console.warn("Upgrade '"+Y.name+"' blocked by other connection holding version "+t.oldVersion/10)}),m.forEach(function(t){t(Y)})}function Oe(t,e){return r(e).forEach(function(n){var r=function t(e){if("function"==typeof e)return new e;if(o(e))return[t(e[0])];if(e&&"object"==typeof e){var n={};return Oe(n,e),n}return e}(e[n]);t[n]=r}),t}function Te(t){return Kt(function(e){var n=e.target,r=n._hookCtx,o=r.value||n.result,i=r&&r.onsuccess;i&&i(o),t&&t(o)},t)}function xe(t){return Kt(function(e){return Ae(e),t(e.target.error),!1})}function Se(t){return Kt(function(e){t(e.target.result)})}function Re(t){return Kt(function(e){var n=e.target,r=n.error,o=n._hookCtx,i=o&&o.onerror;return i&&i(r),Ae(e),t(r),!1})}function Ae(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}function Ne(t){var e=function(e){return t.next(e)},n=i(e),r=i(function(e){return t.throw(e)});function i(t){return function(e){var i=t(e),a=i.value;return i.done?a:a&&"function"==typeof a.then?a.then(n,r):o(a)?Ct.all(a).then(n,r):n(a)}}return i(e)()}function Ie(t,e,n,r,o,i,a){this.name=t,this.keyPath=e,this.unique=n,this.multi=r,this.auto=o,this.compound=i,this.dotted=a;var s="string"==typeof e?e:e&&"["+[].join.call(e,"+")+"]";this.src=(n?"&":"")+(r?"*":"")+(o?"++":"")+s}function Ce(t,e,n,r){this.name=t,this.primKey=e||new Ie,this.indexes=n||[new Ie],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=b(n,function(t){return[t.name,t]})}function Pe(t){return 1===t.length?t[0]:t}function De(t){var e=t&&(t.getDatabaseNames||t.webkitGetDatabaseNames);return e&&e.bind(t)}F(L,Ee),l(ke,Q),l(ke,{delete:function(t){var e=new ke(t),n=e.delete();return n.onblocked=function(t){return e.on("blocked",t),this},n},exists:function(t){return new ke(t).open().then(function(t){return t.close(),!0}).catch(ke.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(t){var e=De(ke.dependencies.indexedDB);return e?new Ct(function(t,n){var r=e();r.onsuccess=function(e){t(y(e.target.result,0))},r.onerror=xe(n)}).then(t):he.dbnames.toCollection().primaryKeys(t)},defineClass:function(){return function(t){t&&a(this,t)}},applyStructure:Oe,ignoreTransaction:function(t){return Rt.trans?ie(Rt.transless,t):t()},vip:function(t){return $t(function(){return Rt.letThrough=!0,t()})},async:function(t){return function(){try{var e=Ne(t.apply(this,arguments));return e&&"function"==typeof e.then?e:Ct.resolve(e)}catch(t){return le(t)}}},spawn:function(t,e,n){try{var r=Ne(t.apply(n,e||[]));return r&&"function"==typeof r.then?r:Ct.resolve(r)}catch(t){return le(t)}},currentTransaction:{get:function(){return Rt.trans||null}},waitFor:function(t,e){var n=Ct.resolve("function"==typeof t?ke.ignoreTransaction(t):t).timeout(e||6e4);return Rt.trans?Rt.trans.waitFor(n):n},Promise:Ct,debug:{get:function(){return L},set:function(t){F(t,"dexie"===t?function(){return!0}:Ee)}},derive:p,extend:a,props:l,override:v,Events:fe,getByKeyPath:k,setByKeyPath:O,delByKeyPath:function(t,e){"string"==typeof e?O(t,e,void 0):"length"in e&&[].map.call(e,function(e){O(t,e,void 0)})},shallowClone:T,deepClone:A,getObjectDiff:N,asap:m,maxKey:de,minKey:_e,addons:[],connections:ge,MultiModifyError:J.Modify,errnames:G,IndexSpec:Ie,TableSchema:Ce,dependencies:function(){try{return{indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch(t){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:"{version}",version:"{version}".split(".").map(function(t){return parseInt(t)}).reduce(function(t,e,n){return t+e/Math.pow(10,2*n)}),default:ke,Dexie:ke}),Ct.rejectionMapper=function(t,e){if(!t||t instanceof z||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Y[t.name])return t;var n=new Y[t.name](e||t.message,t);return"stack"in t&&h(n,"stack",{get:function(){return this.inner.stack}}),n},(he=new ke("__dbnames")).version(1).stores({dbnames:"name"}),function(){try{void 0!==typeof localStorage&&void 0!==i.document&&(JSON.parse(localStorage.getItem("Dexie.DatabaseNames")||"[]").forEach(function(t){return he.dbnames.put({name:t}).catch($)}),localStorage.removeItem("Dexie.DatabaseNames"))}catch(t){}}(),e.a=ke}).call(this,n(27),n(81).setImmediate)},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,o="~";function i(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new a(n,r||t,i),u=o?o+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function c(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),c.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(o?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},c.prototype.listeners=function(t){var e=o?o+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,a=new Array(i);r<i;r++)a[r]=n[r].fn;return a},c.prototype.listenerCount=function(t){var e=o?o+t:t,n=this._events[e];return n?n.fn?1:n.length:0},c.prototype.emit=function(t,e,n,r,i,a){var s=o?o+t:t;if(!this._events[s])return!1;var u,c,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,i),!0;case 6:return l.fn.call(l.context,e,n,r,i,a),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,p=l.length;for(c=0;c<p;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,n);break;case 4:l[c].fn.call(l[c].context,e,n,r);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},c.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},c.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},c.prototype.removeListener=function(t,e,n,r){var i=o?o+t:t;if(!this._events[i])return this;if(!e)return u(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||r&&!a.once||n&&a.context!==n||u(this,i);else{for(var s=0,c=[],l=a.length;s<l;s++)(a[s].fn!==e||r&&!a[s].once||n&&a[s].context!==n)&&c.push(a[s]);c.length?this._events[i]=1===c.length?c[0]:c:u(this,i)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=o?o+t:t,this._events[e]&&u(this,e)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=o,c.EventEmitter=c,t.exports=c},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,o="~";function i(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new a(n,r||t,i),u=o?o+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function c(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),c.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(o?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},c.prototype.listeners=function(t){var e=o?o+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,a=new Array(i);r<i;r++)a[r]=n[r].fn;return a},c.prototype.listenerCount=function(t){var e=o?o+t:t,n=this._events[e];return n?n.fn?1:n.length:0},c.prototype.emit=function(t,e,n,r,i,a){var s=o?o+t:t;if(!this._events[s])return!1;var u,c,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,i),!0;case 6:return l.fn.call(l.context,e,n,r,i,a),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,p=l.length;for(c=0;c<p;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,n);break;case 4:l[c].fn.call(l[c].context,e,n,r);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},c.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},c.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},c.prototype.removeListener=function(t,e,n,r){var i=o?o+t:t;if(!this._events[i])return this;if(!e)return u(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||r&&!a.once||n&&a.context!==n||u(this,i);else{for(var s=0,c=[],l=a.length;s<l;s++)(a[s].fn!==e||r&&!a[s].once||n&&a[s].context!==n)&&c.push(a[s]);c.length?this._events[i]=1===c.length?c[0]:c:u(this,i)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=o?o+t:t,this._events[e]&&u(this,e)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=o,c.EventEmitter=c,t.exports=c},function(t,e,n){t.exports=n(56)},function(t,e,n){"use strict";n.r(e);var r=n(9);n.d(e,"ERROR_MESSAGES",function(){return r.a});var o=n(15);n.d(e,"environment",function(){return o.a}),n.d(e,"version",function(){return o.b});var i=n(45);n.d(e,"global",function(){return i.d}),n.d(e,"init",function(){return i.e}),n.d(e,"isInitialized",function(){return i.f}),n.d(e,"isReady",function(){return i.g}),n.d(e,"setUser",function(){return i.h}),n.d(e,"captureImage",function(){return i.c}),n.d(e,"startRecording",function(){return i.k}),n.d(e,"startBlackboxRecording",function(){return i.i}),n.d(e,"startBreakpointContinuinglyRecording",function(){return i.j}),n.d(e,"startStreamingRecording",function(){return i.l}),n.d(e,"UNSAFE_loadRecording",function(){return i.a}),n.d(e,"UNSAFE_resumeTransfers",function(){return i.b}),n.d(e,"stopAllRecordings",function(){return i.m});var a=n(16);n.d(e,"RecordingContext",function(){return a.a});var s=n(7);for(var u in s)["ERROR_MESSAGES","environment","version","global","init","isInitialized","isReady","setUser","captureImage","startRecording","startBlackboxRecording","startBreakpointContinuinglyRecording","startStreamingRecording","UNSAFE_loadRecording","UNSAFE_resumeTransfers","stopAllRecordings","RecordingContext","default"].indexOf(u)<0&&function(t){n.d(e,t,function(){return s[t]})}(u)},function(t,e,n){"use strict";var r=n(4),o=n(28),i=n(59),a=n(35);function s(t){var e=new i(t),n=o(i.prototype.request,e);return r.extend(n,i.prototype,e),r.extend(n,e),n}var u=s(n(31));u.Axios=i,u.create=function(t){return s(a(u.defaults,t))},u.Cancel=n(36),u.CancelToken=n(71),u.isCancel=n(30),u.all=function(t){return Promise.all(t)},u.spread=n(72),t.exports=u,t.exports.default=u},function(t,e){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},function(t,e,n){"use strict";var r=n(4),o=n(29),i=n(60),a=n(61),s=n(35);function u(t){this.defaults=t,this.interceptors={request:new i,response:new i}}u.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=s(this.defaults,t)).method=t.method?t.method.toLowerCase():"get";var e=[a,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},u.prototype.getUri=function(t){return t=s(this.defaults,t),o(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],function(t){u.prototype[t]=function(e,n){return this.request(r.merge(n||{},{method:t,url:e}))}}),r.forEach(["post","put","patch"],function(t){u.prototype[t]=function(e,n,o){return this.request(r.merge(o||{},{method:t,url:e,data:n}))}}),t.exports=u},function(t,e,n){"use strict";var r=n(4);function o(){this.handlers=[]}o.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},o.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},o.prototype.forEach=function(t){r.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=o},function(t,e,n){"use strict";var r=n(4),o=n(62),i=n(30),a=n(31),s=n(69),u=n(70);function c(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return c(t),t.baseURL&&!s(t.url)&&(t.url=u(t.baseURL,t.url)),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||a.adapter)(t).then(function(e){return c(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return i(e)||(c(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,n){"use strict";var r=n(4);t.exports=function(t,e,n){return r.forEach(n,function(n){t=n(t,e)}),t}},function(t,e,n){"use strict";var r=n(4);t.exports=function(t,e){r.forEach(t,function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])})}},function(t,e,n){"use strict";var r=n(34);t.exports=function(t,e,n){var o=n.config.validateStatus;!o||o(n.status)?t(n):e(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,o){return t.config=e,n&&(t.code=n),t.request=r,t.response=o,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},function(t,e,n){"use strict";var r=n(4),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,i,a={};return t?(r.forEach(t.split("\n"),function(t){if(i=t.indexOf(":"),e=r.trim(t.substr(0,i)).toLowerCase(),n=r.trim(t.substr(i+1)),e){if(a[e]&&o.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([n]):a[e]?a[e]+", "+n:n}}),a):a}},function(t,e,n){"use strict";var r=n(4);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=o(window.location.href),function(e){var n=r.isString(e)?o(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},function(t,e,n){"use strict";var r=n(4);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,o,i,a){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var r=n(36);function o(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new r(t),e(n.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var t;return{token:new o(function(e){t=e}),cancel:t}},t.exports=o},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){"use strict";var r,o=n(17),i=n(74),a=n(75),s=n(76),u=n(37),c=0,l=1,f=3,h=4,p=5,d=0,_=1,y=-2,v=-3,g=-5,m=-1,b=1,w=2,E=3,k=4,O=0,T=2,x=8,S=9,R=15,A=8,N=286,I=30,C=19,P=2*N+1,D=15,L=3,F=258,M=F+L+1,j=32,U=42,q=69,B=73,H=91,W=103,z=113,K=666,V=1,G=2,X=3,J=4,Y=3;function Q(t,e){return t.msg=u[e],e}function $(t){return(t<<1)-(t>4?9:0)}function Z(t){for(var e=t.length;--e>=0;)t[e]=0}function tt(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(o.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function et(t,e){i._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,tt(t.strm)}function nt(t,e){t.pending_buf[t.pending++]=e}function rt(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function ot(t,e){var n,r,o=t.max_chain_length,i=t.strstart,a=t.prev_length,s=t.nice_match,u=t.strstart>t.w_size-M?t.strstart-(t.w_size-M):0,c=t.window,l=t.w_mask,f=t.prev,h=t.strstart+F,p=c[i+a-1],d=c[i+a];t.prev_length>=t.good_match&&(o>>=2),s>t.lookahead&&(s=t.lookahead);do{if(c[(n=e)+a]===d&&c[n+a-1]===p&&c[n]===c[i]&&c[++n]===c[i+1]){i+=2,n++;do{}while(c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&i<h);if(r=F-(h-i),i=h-F,r>a){if(t.match_start=e,a=r,r>=s)break;p=c[i+a-1],d=c[i+a]}}}while((e=f[e&l])>u&&0!=--o);return a<=t.lookahead?a:t.lookahead}function it(t){var e,n,r,i,u,c,l,f,h,p,d=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-M)){o.arraySet(t.window,t.window,d,d,0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=n=t.hash_size;do{r=t.head[--e],t.head[e]=r>=d?r-d:0}while(--n);e=n=d;do{r=t.prev[--e],t.prev[e]=r>=d?r-d:0}while(--n);i+=d}if(0===t.strm.avail_in)break;if(c=t.strm,l=t.window,f=t.strstart+t.lookahead,h=i,p=void 0,(p=c.avail_in)>h&&(p=h),n=0===p?0:(c.avail_in-=p,o.arraySet(l,c.input,c.next_in,p,f),1===c.state.wrap?c.adler=a(c.adler,l,p,f):2===c.state.wrap&&(c.adler=s(c.adler,l,p,f)),c.next_in+=p,c.total_in+=p,p),t.lookahead+=n,t.lookahead+t.insert>=L)for(u=t.strstart-t.insert,t.ins_h=t.window[u],t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+L-1])&t.hash_mask,t.prev[u&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=u,u++,t.insert--,!(t.lookahead+t.insert<L)););}while(t.lookahead<M&&0!==t.strm.avail_in)}function at(t,e){for(var n,r;;){if(t.lookahead<M){if(it(t),t.lookahead<M&&e===c)return V;if(0===t.lookahead)break}if(n=0,t.lookahead>=L&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+L-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-M&&(t.match_length=ot(t,n)),t.match_length>=L)if(r=i._tr_tally(t,t.strstart-t.match_start,t.match_length-L),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=L){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+L-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=i._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(et(t,!1),0===t.strm.avail_out))return V}return t.insert=t.strstart<L-1?t.strstart:L-1,e===h?(et(t,!0),0===t.strm.avail_out?X:J):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?V:G}function st(t,e){for(var n,r,o;;){if(t.lookahead<M){if(it(t),t.lookahead<M&&e===c)return V;if(0===t.lookahead)break}if(n=0,t.lookahead>=L&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+L-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=L-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-M&&(t.match_length=ot(t,n),t.match_length<=5&&(t.strategy===b||t.match_length===L&&t.strstart-t.match_start>4096)&&(t.match_length=L-1)),t.prev_length>=L&&t.match_length<=t.prev_length){o=t.strstart+t.lookahead-L,r=i._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-L),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=o&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+L-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=L-1,t.strstart++,r&&(et(t,!1),0===t.strm.avail_out))return V}else if(t.match_available){if((r=i._tr_tally(t,0,t.window[t.strstart-1]))&&et(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return V}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=i._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<L-1?t.strstart:L-1,e===h?(et(t,!0),0===t.strm.avail_out?X:J):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?V:G}function ut(t,e,n,r,o){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=o}function ct(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*P),this.dyn_dtree=new o.Buf16(2*(2*I+1)),this.bl_tree=new o.Buf16(2*(2*C+1)),Z(this.dyn_ltree),Z(this.dyn_dtree),Z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(D+1),this.heap=new o.Buf16(2*N+1),Z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*N+1),Z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function lt(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=T,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?U:z,t.adler=2===e.wrap?0:1,e.last_flush=c,i._tr_init(e),d):Q(t,y)}function ft(t){var e,n=lt(t);return n===d&&((e=t.state).window_size=2*e.w_size,Z(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=L-1,e.match_available=0,e.ins_h=0),n}function ht(t,e,n,r,i,a){if(!t)return y;var s=1;if(e===m&&(e=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>S||n!==x||r<8||r>15||e<0||e>9||a<0||a>k)return Q(t,y);8===r&&(r=9);var u=new ct;return t.state=u,u.strm=t,u.wrap=s,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=i+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+L-1)/L),u.window=new o.Buf8(2*u.w_size),u.head=new o.Buf16(u.hash_size),u.prev=new o.Buf16(u.w_size),u.lit_bufsize=1<<i+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new o.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=a,u.method=n,ft(t)}r=[new ut(0,0,0,0,function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(it(t),0===t.lookahead&&e===c)return V;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,et(t,!1),0===t.strm.avail_out))return V;if(t.strstart-t.block_start>=t.w_size-M&&(et(t,!1),0===t.strm.avail_out))return V}return t.insert=0,e===h?(et(t,!0),0===t.strm.avail_out?X:J):(t.strstart>t.block_start&&(et(t,!1),t.strm.avail_out),V)}),new ut(4,4,8,4,at),new ut(4,5,16,8,at),new ut(4,6,32,32,at),new ut(4,4,16,16,st),new ut(8,16,32,32,st),new ut(8,16,128,128,st),new ut(8,32,128,256,st),new ut(32,128,258,1024,st),new ut(32,258,258,4096,st)],e.deflateInit=function(t,e){return ht(t,e,x,R,A,O)},e.deflateInit2=ht,e.deflateReset=ft,e.deflateResetKeep=lt,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?y:(t.state.gzhead=e,d):y},e.deflate=function(t,e){var n,o,a,u;if(!t||!t.state||e>p||e<0)return t?Q(t,y):y;if(o=t.state,!t.output||!t.input&&0!==t.avail_in||o.status===K&&e!==h)return Q(t,0===t.avail_out?g:y);if(o.strm=t,n=o.last_flush,o.last_flush=e,o.status===U)if(2===o.wrap)t.adler=0,nt(o,31),nt(o,139),nt(o,8),o.gzhead?(nt(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),nt(o,255&o.gzhead.time),nt(o,o.gzhead.time>>8&255),nt(o,o.gzhead.time>>16&255),nt(o,o.gzhead.time>>24&255),nt(o,9===o.level?2:o.strategy>=w||o.level<2?4:0),nt(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(nt(o,255&o.gzhead.extra.length),nt(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=s(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=q):(nt(o,0),nt(o,0),nt(o,0),nt(o,0),nt(o,0),nt(o,9===o.level?2:o.strategy>=w||o.level<2?4:0),nt(o,Y),o.status=z);else{var v=x+(o.w_bits-8<<4)<<8;v|=(o.strategy>=w||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(v|=j),v+=31-v%31,o.status=z,rt(o,v),0!==o.strstart&&(rt(o,t.adler>>>16),rt(o,65535&t.adler)),t.adler=1}if(o.status===q)if(o.gzhead.extra){for(a=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>a&&(t.adler=s(t.adler,o.pending_buf,o.pending-a,a)),tt(t),a=o.pending,o.pending!==o.pending_buf_size));)nt(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>a&&(t.adler=s(t.adler,o.pending_buf,o.pending-a,a)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=B)}else o.status=B;if(o.status===B)if(o.gzhead.name){a=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>a&&(t.adler=s(t.adler,o.pending_buf,o.pending-a,a)),tt(t),a=o.pending,o.pending===o.pending_buf_size)){u=1;break}u=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,nt(o,u)}while(0!==u);o.gzhead.hcrc&&o.pending>a&&(t.adler=s(t.adler,o.pending_buf,o.pending-a,a)),0===u&&(o.gzindex=0,o.status=H)}else o.status=H;if(o.status===H)if(o.gzhead.comment){a=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>a&&(t.adler=s(t.adler,o.pending_buf,o.pending-a,a)),tt(t),a=o.pending,o.pending===o.pending_buf_size)){u=1;break}u=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,nt(o,u)}while(0!==u);o.gzhead.hcrc&&o.pending>a&&(t.adler=s(t.adler,o.pending_buf,o.pending-a,a)),0===u&&(o.status=W)}else o.status=W;if(o.status===W&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&tt(t),o.pending+2<=o.pending_buf_size&&(nt(o,255&t.adler),nt(o,t.adler>>8&255),t.adler=0,o.status=z)):o.status=z),0!==o.pending){if(tt(t),0===t.avail_out)return o.last_flush=-1,d}else if(0===t.avail_in&&$(e)<=$(n)&&e!==h)return Q(t,g);if(o.status===K&&0!==t.avail_in)return Q(t,g);if(0!==t.avail_in||0!==o.lookahead||e!==c&&o.status!==K){var m=o.strategy===w?function(t,e){for(var n;;){if(0===t.lookahead&&(it(t),0===t.lookahead)){if(e===c)return V;break}if(t.match_length=0,n=i._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(et(t,!1),0===t.strm.avail_out))return V}return t.insert=0,e===h?(et(t,!0),0===t.strm.avail_out?X:J):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?V:G}(o,e):o.strategy===E?function(t,e){for(var n,r,o,a,s=t.window;;){if(t.lookahead<=F){if(it(t),t.lookahead<=F&&e===c)return V;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=L&&t.strstart>0&&(r=s[o=t.strstart-1])===s[++o]&&r===s[++o]&&r===s[++o]){a=t.strstart+F;do{}while(r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&o<a);t.match_length=F-(a-o),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=L?(n=i._tr_tally(t,1,t.match_length-L),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=i._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(et(t,!1),0===t.strm.avail_out))return V}return t.insert=0,e===h?(et(t,!0),0===t.strm.avail_out?X:J):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?V:G}(o,e):r[o.level].func(o,e);if(m!==X&&m!==J||(o.status=K),m===V||m===X)return 0===t.avail_out&&(o.last_flush=-1),d;if(m===G&&(e===l?i._tr_align(o):e!==p&&(i._tr_stored_block(o,0,0,!1),e===f&&(Z(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),tt(t),0===t.avail_out))return o.last_flush=-1,d}return e!==h?d:o.wrap<=0?_:(2===o.wrap?(nt(o,255&t.adler),nt(o,t.adler>>8&255),nt(o,t.adler>>16&255),nt(o,t.adler>>24&255),nt(o,255&t.total_in),nt(o,t.total_in>>8&255),nt(o,t.total_in>>16&255),nt(o,t.total_in>>24&255)):(rt(o,t.adler>>>16),rt(o,65535&t.adler)),tt(t),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?d:_)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==U&&e!==q&&e!==B&&e!==H&&e!==W&&e!==z&&e!==K?Q(t,y):(t.state=null,e===z?Q(t,v):d):y},e.deflateSetDictionary=function(t,e){var n,r,i,s,u,c,l,f,h=e.length;if(!t||!t.state)return y;if(2===(s=(n=t.state).wrap)||1===s&&n.status!==U||n.lookahead)return y;for(1===s&&(t.adler=a(t.adler,e,h,0)),n.wrap=0,h>=n.w_size&&(0===s&&(Z(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new o.Buf8(n.w_size),o.arraySet(f,e,h-n.w_size,n.w_size,0),e=f,h=n.w_size),u=t.avail_in,c=t.next_in,l=t.input,t.avail_in=h,t.next_in=0,t.input=e,it(n);n.lookahead>=L;){r=n.strstart,i=n.lookahead-(L-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+L-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=L-1,it(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=L-1,n.match_available=0,t.next_in=c,t.input=l,t.avail_in=u,n.wrap=s,d},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,n){"use strict";var r=n(17),o=4,i=0,a=1,s=2;function u(t){for(var e=t.length;--e>=0;)t[e]=0}var c=0,l=1,f=2,h=29,p=256,d=p+1+h,_=30,y=19,v=2*d+1,g=15,m=16,b=7,w=256,E=16,k=17,O=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],A=new Array(2*(d+2));u(A);var N=new Array(2*_);u(N);var I=new Array(512);u(I);var C=new Array(256);u(C);var P=new Array(h);u(P);var D,L,F,M=new Array(_);function j(t,e,n,r,o){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=o,this.has_stree=t&&t.length}function U(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function q(t){return t<256?I[t]:I[256+(t>>>7)]}function B(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function H(t,e,n){t.bi_valid>m-n?(t.bi_buf|=e<<t.bi_valid&65535,B(t,t.bi_buf),t.bi_buf=e>>m-t.bi_valid,t.bi_valid+=n-m):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function W(t,e,n){H(t,n[2*e],n[2*e+1])}function z(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function K(t,e,n){var r,o,i=new Array(g+1),a=0;for(r=1;r<=g;r++)i[r]=a=a+n[r-1]<<1;for(o=0;o<=e;o++){var s=t[2*o+1];0!==s&&(t[2*o]=z(i[s]++,s))}}function V(t){var e;for(e=0;e<d;e++)t.dyn_ltree[2*e]=0;for(e=0;e<_;e++)t.dyn_dtree[2*e]=0;for(e=0;e<y;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*w]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function G(t){t.bi_valid>8?B(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function X(t,e,n,r){var o=2*e,i=2*n;return t[o]<t[i]||t[o]===t[i]&&r[e]<=r[n]}function J(t,e,n){for(var r=t.heap[n],o=n<<1;o<=t.heap_len&&(o<t.heap_len&&X(e,t.heap[o+1],t.heap[o],t.depth)&&o++,!X(e,r,t.heap[o],t.depth));)t.heap[n]=t.heap[o],n=o,o<<=1;t.heap[n]=r}function Y(t,e,n){var r,o,i,a,s=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],o=t.pending_buf[t.l_buf+s],s++,0===r?W(t,o,e):(W(t,(i=C[o])+p+1,e),0!==(a=T[i])&&H(t,o-=P[i],a),W(t,i=q(--r),n),0!==(a=x[i])&&H(t,r-=M[i],a))}while(s<t.last_lit);W(t,w,e)}function Q(t,e){var n,r,o,i=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,u=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=v,n=0;n<u;n++)0!==i[2*n]?(t.heap[++t.heap_len]=c=n,t.depth[n]=0):i[2*n+1]=0;for(;t.heap_len<2;)i[2*(o=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[o]=0,t.opt_len--,s&&(t.static_len-=a[2*o+1]);for(e.max_code=c,n=t.heap_len>>1;n>=1;n--)J(t,i,n);o=u;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],J(t,i,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,i[2*o]=i[2*n]+i[2*r],t.depth[o]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,i[2*n+1]=i[2*r+1]=o,t.heap[1]=o++,J(t,i,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,o,i,a,s,u=e.dyn_tree,c=e.max_code,l=e.stat_desc.static_tree,f=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,d=e.stat_desc.max_length,_=0;for(i=0;i<=g;i++)t.bl_count[i]=0;for(u[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<v;n++)(i=u[2*u[2*(r=t.heap[n])+1]+1]+1)>d&&(i=d,_++),u[2*r+1]=i,r>c||(t.bl_count[i]++,a=0,r>=p&&(a=h[r-p]),s=u[2*r],t.opt_len+=s*(i+a),f&&(t.static_len+=s*(l[2*r+1]+a)));if(0!==_){do{for(i=d-1;0===t.bl_count[i];)i--;t.bl_count[i]--,t.bl_count[i+1]+=2,t.bl_count[d]--,_-=2}while(_>0);for(i=d;0!==i;i--)for(r=t.bl_count[i];0!==r;)(o=t.heap[--n])>c||(u[2*o+1]!==i&&(t.opt_len+=(i-u[2*o+1])*u[2*o],u[2*o+1]=i),r--)}}(t,e),K(i,c,t.bl_count)}function $(t,e,n){var r,o,i=-1,a=e[1],s=0,u=7,c=4;for(0===a&&(u=138,c=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)o=a,a=e[2*(r+1)+1],++s<u&&o===a||(s<c?t.bl_tree[2*o]+=s:0!==o?(o!==i&&t.bl_tree[2*o]++,t.bl_tree[2*E]++):s<=10?t.bl_tree[2*k]++:t.bl_tree[2*O]++,s=0,i=o,0===a?(u=138,c=3):o===a?(u=6,c=3):(u=7,c=4))}function Z(t,e,n){var r,o,i=-1,a=e[1],s=0,u=7,c=4;for(0===a&&(u=138,c=3),r=0;r<=n;r++)if(o=a,a=e[2*(r+1)+1],!(++s<u&&o===a)){if(s<c)do{W(t,o,t.bl_tree)}while(0!=--s);else 0!==o?(o!==i&&(W(t,o,t.bl_tree),s--),W(t,E,t.bl_tree),H(t,s-3,2)):s<=10?(W(t,k,t.bl_tree),H(t,s-3,3)):(W(t,O,t.bl_tree),H(t,s-11,7));s=0,i=o,0===a?(u=138,c=3):o===a?(u=6,c=3):(u=7,c=4)}}u(M);var tt=!1;function et(t,e,n,o){H(t,(c<<1)+(o?1:0),3),function(t,e,n,o){G(t),o&&(B(t,n),B(t,~n)),r.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}e._tr_init=function(t){tt||(function(){var t,e,n,r,o,i=new Array(g+1);for(n=0,r=0;r<h-1;r++)for(P[r]=n,t=0;t<1<<T[r];t++)C[n++]=r;for(C[n-1]=r,o=0,r=0;r<16;r++)for(M[r]=o,t=0;t<1<<x[r];t++)I[o++]=r;for(o>>=7;r<_;r++)for(M[r]=o<<7,t=0;t<1<<x[r]-7;t++)I[256+o++]=r;for(e=0;e<=g;e++)i[e]=0;for(t=0;t<=143;)A[2*t+1]=8,t++,i[8]++;for(;t<=255;)A[2*t+1]=9,t++,i[9]++;for(;t<=279;)A[2*t+1]=7,t++,i[7]++;for(;t<=287;)A[2*t+1]=8,t++,i[8]++;for(K(A,d+1,i),t=0;t<_;t++)N[2*t+1]=5,N[2*t]=z(t,5);D=new j(A,T,p+1,d,g),L=new j(N,x,0,_,g),F=new j(new Array(0),S,0,y,b)}(),tt=!0),t.l_desc=new U(t.dyn_ltree,D),t.d_desc=new U(t.dyn_dtree,L),t.bl_desc=new U(t.bl_tree,F),t.bi_buf=0,t.bi_valid=0,V(t)},e._tr_stored_block=et,e._tr_flush_block=function(t,e,n,r){var u,c,h=0;t.level>0?(t.strm.data_type===s&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return i;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return a;for(e=32;e<p;e++)if(0!==t.dyn_ltree[2*e])return a;return i}(t)),Q(t,t.l_desc),Q(t,t.d_desc),h=function(t){var e;for($(t,t.dyn_ltree,t.l_desc.max_code),$(t,t.dyn_dtree,t.d_desc.max_code),Q(t,t.bl_desc),e=y-1;e>=3&&0===t.bl_tree[2*R[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),u=t.opt_len+3+7>>>3,(c=t.static_len+3+7>>>3)<=u&&(u=c)):u=c=n+5,n+4<=u&&-1!==e?et(t,e,n,r):t.strategy===o||c===u?(H(t,(l<<1)+(r?1:0),3),Y(t,A,N)):(H(t,(f<<1)+(r?1:0),3),function(t,e,n,r){var o;for(H(t,e-257,5),H(t,n-1,5),H(t,r-4,4),o=0;o<r;o++)H(t,t.bl_tree[2*R[o]+1],3);Z(t,t.dyn_ltree,e-1),Z(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,h+1),Y(t,t.dyn_ltree,t.dyn_dtree)),V(t),r&&G(t)},e._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(C[n]+p+1)]++,t.dyn_dtree[2*q(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){H(t,l<<1,3),W(t,w,A),function(t){16===t.bi_valid?(B(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,n){"use strict";t.exports=function(t,e,n,r){for(var o=65535&t|0,i=t>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{i=i+(o=o+e[r++]|0)|0}while(--a);o%=65521,i%=65521}return o|i<<16|0}},function(t,e,n){"use strict";var r=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function(t,e,n,o){var i=r,a=o+n;t^=-1;for(var s=o;s<a;s++)t=t>>>8^i[255&(t^e[s])];return-1^t}},function(t,e,n){"use strict";var r=n(17),o=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(t){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){i=!1}for(var a=new r.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function u(t,e){if(e<65534&&(t.subarray&&i||!t.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var n="",a=0;a<e;a++)n+=String.fromCharCode(t[a]);return n}a[254]=a[254]=1,e.string2buf=function(t){var e,n,o,i,a,s=t.length,u=0;for(i=0;i<s;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<s&&56320==(64512&(o=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(o-56320),i++),u+=n<128?1:n<2048?2:n<65536?3:4;for(e=new r.Buf8(u),a=0,i=0;a<u;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<s&&56320==(64512&(o=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(o-56320),i++),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|63&n):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e},e.buf2binstring=function(t){return u(t,t.length)},e.binstring2buf=function(t){for(var e=new r.Buf8(t.length),n=0,o=e.length;n<o;n++)e[n]=t.charCodeAt(n);return e},e.buf2string=function(t,e){var n,r,o,i,s=e||t.length,c=new Array(2*s);for(r=0,n=0;n<s;)if((o=t[n++])<128)c[r++]=o;else if((i=a[o])>4)c[r++]=65533,n+=i-1;else{for(o&=2===i?31:3===i?15:7;i>1&&n<s;)o=o<<6|63&t[n++],i--;i>1?c[r++]=65533:o<65536?c[r++]=o:(o-=65536,c[r++]=55296|o>>10&1023,c[r++]=56320|1023&o)}return u(c,r)},e.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0?e:0===n?e:n+a[t[n]]>e?n:e}},function(t,e,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},function(t,e){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,o=n;return[o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]]].join("")}},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(82),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(27))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,o,i,a,s,u=1,c={},l=!1,f=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){d(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){d(t.data)},r=function(t){i.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(o=f.documentElement,r=function(t){var e=f.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,o.removeChild(e),e=null},o.appendChild(e)}):r=function(t){setTimeout(d,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&d(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(a+e,"*")}),h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var o={callback:t,args:e};return c[u]=o,r(u),u++},h.clearImmediate=p}function p(t){delete c[t]}function d(t){if(l)setTimeout(d,0,t);else{var e=c[t];if(e){l=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{p(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(27),n(32))},function(t,e,n){var r={"./":11,"./HTMLPerformer":18,"./HTMLPerformer.js":18,"./MousePerformer":19,"./MousePerformer.js":19,"./index":11,"./index.js":11};function o(t){var e=i(t);return n(e)}function i(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}o.keys=function(){return Object.keys(r)},o.resolve=i,t.exports=o,o.id=83},function(t,e,n){var r={"./":5,"./ConsoleTracker":38,"./ConsoleTracker.js":38,"./ErrorTracker":39,"./ErrorTracker.js":39,"./HTMLTracker":6,"./HTMLTracker/":6,"./HTMLTracker/ActionScheduler":23,"./HTMLTracker/ActionScheduler.js":23,"./HTMLTracker/ActionWorkLoop":22,"./HTMLTracker/ActionWorkLoop.js":22,"./HTMLTracker/HTMLTracker":21,"./HTMLTracker/HTMLTracker.js":21,"./HTMLTracker/index":6,"./HTMLTracker/index.js":6,"./MouseTracker":40,"./MouseTracker.js":40,"./NetworkTracker":41,"./NetworkTracker.js":41,"./Tracker":3,"./Tracker.js":3,"./TrackerContext":10,"./TrackerContext.js":10,"./TrackerLoader":20,"./TrackerLoader.js":20,"./XTrackerTracker":46,"./XTrackerTracker.js":46,"./index":5,"./index.js":5};function o(t){var e=i(t);return n(e)}function i(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}o.keys=function(){return Object.keys(r)},o.resolve=i,t.exports=o,o.id=84}]);